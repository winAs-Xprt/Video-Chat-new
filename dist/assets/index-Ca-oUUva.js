function rv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sv={exports:{}},Yc={},ov={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=Symbol.for("react.element"),Fw=Symbol.for("react.portal"),jw=Symbol.for("react.fragment"),Uw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Bw=Symbol.for("react.context"),zw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Ww=Symbol.for("react.memo"),qw=Symbol.for("react.lazy"),np=Symbol.iterator;function Kw(e){return e===null||typeof e!="object"?null:(e=np&&e[np]||e["@@iterator"],typeof e=="function"?e:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cv=Object.assign,lv={};function os(e,t,n){this.props=e,this.context=t,this.refs=lv,this.updater=n||av}os.prototype.isReactComponent={};os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uv(){}uv.prototype=os.prototype;function df(e,t,n){this.props=e,this.context=t,this.refs=lv,this.updater=n||av}var ff=df.prototype=new uv;ff.constructor=df;cv(ff,os.prototype);ff.isPureReactComponent=!0;var rp=Array.isArray,dv=Object.prototype.hasOwnProperty,hf={current:null},fv={key:!0,ref:!0,__self:!0,__source:!0};function hv(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)dv.call(t,r)&&!fv.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Oo,type:e,key:s,ref:o,props:i,_owner:hf.current}}function Gw(e,t){return{$$typeof:Oo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oo}function Jw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ip=/\/+/g;function Fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jw(""+e.key):t.toString(36)}function Ca(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Oo:case Fw:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Fl(o,0):r,rp(i)?(n="",e!=null&&(n=e.replace(ip,"$&/")+"/"),Ca(i,t,n,"",function(l){return l})):i!=null&&(pf(i)&&(i=Gw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ip,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",rp(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+Fl(s,a);o+=Ca(s,t,n,c,i)}else if(c=Kw(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+Fl(s,a++),o+=Ca(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Wo(e,t,n){if(e==null)return e;var r=[],i=0;return Ca(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Yw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tt={current:null},Ea={transition:null},Qw={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:Ea,ReactCurrentOwner:hf};function pv(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Wo,forEach:function(e,t,n){Wo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Wo(e,function(){t++}),t},toArray:function(e){return Wo(e,function(t){return t})||[]},only:function(e){if(!pf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=os;le.Fragment=jw;le.Profiler=$w;le.PureComponent=df;le.StrictMode=Uw;le.Suspense=Hw;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;le.act=pv;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cv({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=hf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)dv.call(t,c)&&!fv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Oo,type:e.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(e){return e={$$typeof:Bw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vw,_context:e},e.Consumer=e};le.createElement=hv;le.createFactory=function(e){var t=hv.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:zw,render:e}};le.isValidElement=pf;le.lazy=function(e){return{$$typeof:qw,_payload:{_status:-1,_result:e},_init:Yw}};le.memo=function(e,t){return{$$typeof:Ww,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=Ea.transition;Ea.transition={};try{e()}finally{Ea.transition=t}};le.unstable_act=pv;le.useCallback=function(e,t){return Tt.current.useCallback(e,t)};le.useContext=function(e){return Tt.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return Tt.current.useDeferredValue(e)};le.useEffect=function(e,t){return Tt.current.useEffect(e,t)};le.useId=function(){return Tt.current.useId()};le.useImperativeHandle=function(e,t,n){return Tt.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return Tt.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return Tt.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return Tt.current.useMemo(e,t)};le.useReducer=function(e,t,n){return Tt.current.useReducer(e,t,n)};le.useRef=function(e){return Tt.current.useRef(e)};le.useState=function(e){return Tt.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return Tt.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return Tt.current.useTransition()};le.version="18.3.1";ov.exports=le;var C=ov.exports;const Xw=iv(C),Zw=rv({__proto__:null,default:Xw},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC=C,tC=Symbol.for("react.element"),nC=Symbol.for("react.fragment"),rC=Object.prototype.hasOwnProperty,iC=eC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sC={key:!0,ref:!0,__self:!0,__source:!0};function mv(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rC.call(t,r)&&!sC.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tC,type:e,key:s,ref:o,props:i,_owner:iC.current}}Yc.Fragment=nC;Yc.jsx=mv;Yc.jsxs=mv;sv.exports=Yc;var w=sv.exports,gv={exports:{}},Qt={},vv={exports:{}},yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,_){var F=R.length;R.push(_);e:for(;0<F;){var J=F-1>>>1,oe=R[J];if(0<i(oe,_))R[J]=_,R[F]=oe,F=J;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var _=R[0],F=R.pop();if(F!==_){R[0]=F;e:for(var J=0,oe=R.length,He=oe>>>1;J<He;){var Y=2*(J+1)-1,te=R[Y],z=Y+1,X=R[z];if(0>i(te,F))z<oe&&0>i(X,te)?(R[J]=X,R[z]=F,J=z):(R[J]=te,R[Y]=F,J=Y);else if(z<oe&&0>i(X,F))R[J]=X,R[z]=F,J=z;else break e}}return _}function i(R,_){var F=R.sortIndex-_.sortIndex;return F!==0?F:R.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,f=null,d=3,h=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(R){for(var _=n(l);_!==null;){if(_.callback===null)r(l);else if(_.startTime<=R)r(l),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(l)}}function b(R){if(m=!1,S(R),!p)if(n(c)!==null)p=!0,L(E);else{var _=n(l);_!==null&&q(b,_.startTime-R)}}function E(R,_){p=!1,m&&(m=!1,g(x),x=-1),h=!0;var F=d;try{for(S(_),f=n(c);f!==null&&(!(f.expirationTime>_)||R&&!V());){var J=f.callback;if(typeof J=="function"){f.callback=null,d=f.priorityLevel;var oe=J(f.expirationTime<=_);_=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(c)&&r(c),S(_)}else r(c);f=n(c)}if(f!==null)var He=!0;else{var Y=n(l);Y!==null&&q(b,Y.startTime-_),He=!1}return He}finally{f=null,d=F,h=!1}}var k=!1,T=null,x=-1,j=5,P=-1;function V(){return!(e.unstable_now()-P<j)}function N(){if(T!==null){var R=e.unstable_now();P=R;var _=!0;try{_=T(!0,R)}finally{_?D():(k=!1,T=null)}}else k=!1}var D;if(typeof y=="function")D=function(){y(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=N,D=function(){$.postMessage(null)}}else D=function(){v(N,0)};function L(R){T=R,k||(k=!0,D())}function q(R,_){x=v(function(){R(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(d){case 1:case 2:case 3:var _=3;break;default:_=d}var F=d;d=_;try{return R()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,_){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=d;d=R;try{return _()}finally{d=F}},e.unstable_scheduleCallback=function(R,_,F){var J=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,R){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=F+oe,R={id:u++,callback:_,priorityLevel:R,startTime:F,expirationTime:oe,sortIndex:-1},F>J?(R.sortIndex=F,t(l,R),n(c)===null&&R===n(l)&&(m?(g(x),x=-1):m=!0,q(b,F-J))):(R.sortIndex=oe,t(c,R),p||h||(p=!0,L(E))),R},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(R){var _=d;return function(){var F=d;d=_;try{return R.apply(this,arguments)}finally{d=F}}}})(yv);vv.exports=yv;var oC=vv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC=C,Jt=oC;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sv=new Set,Zs={};function ci(e,t){qi(e,t),qi(e+"Capture",t)}function qi(e,t){for(Zs[e]=t,e=0;e<t.length;e++)Sv.add(t[e])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fu=Object.prototype.hasOwnProperty,cC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sp={},op={};function lC(e){return Fu.call(op,e)?!0:Fu.call(sp,e)?!1:cC.test(e)?op[e]=!0:(sp[e]=!0,!1)}function uC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dC(e,t,n,r){if(t===null||typeof t>"u"||uC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rt(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new Rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new Rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new Rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new Rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new Rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new Rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new Rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new Rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new Rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mf=/[\-:]([a-z])/g;function gf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mf,gf);ot[t]=new Rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mf,gf);ot[t]=new Rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mf,gf);ot[t]=new Rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new Rt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new Rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function vf(e,t,n,r){var i=ot.hasOwnProperty(t)?ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dC(t,n,i,r)&&(n=null),r||i===null?lC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ir=aC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),wi=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),yf=Symbol.for("react.strict_mode"),ju=Symbol.for("react.profiler"),bv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Sf=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),bf=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),Cv=Symbol.for("react.offscreen"),ap=Symbol.iterator;function ys(e){return e===null||typeof e!="object"?null:(e=ap&&e[ap]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,jl;function Ns(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Ul=!1;function $l(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ns(e):""}function fC(e){switch(e.tag){case 5:return Ns(e.type);case 16:return Ns("Lazy");case 13:return Ns("Suspense");case 19:return Ns("SuspenseList");case 0:case 2:case 15:return e=$l(e.type,!1),e;case 11:return e=$l(e.type.render,!1),e;case 1:return e=$l(e.type,!0),e;default:return""}}function Vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ci:return"Fragment";case wi:return"Portal";case ju:return"Profiler";case yf:return"StrictMode";case Uu:return"Suspense";case $u:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wv:return(e.displayName||"Context")+".Consumer";case bv:return(e._context.displayName||"Context")+".Provider";case Sf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bf:return t=e.displayName||null,t!==null?t:Vu(e.type)||"Memo";case lr:t=e._payload,e=e._init;try{return Vu(e(t))}catch{}}return null}function hC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(t);case 8:return t===yf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ev(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pC(e){var t=Ev(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ko(e){e._valueTracker||(e._valueTracker=pC(e))}function kv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ev(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bu(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tv(e,t){t=t.checked,t!=null&&vf(e,"checked",t,!1)}function zu(e,t){Tv(e,t);var n=xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hu(e,t.type,xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hu(e,t,n){(t!=="number"||Ka(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var As=Array.isArray;function Di(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Wu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function up(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(As(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xr(n)}}function Rv(e,t){var n=xr(t.value),r=xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _v(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_v(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Go,Iv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Go=Go||document.createElement("div"),Go.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Go.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function eo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mC=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(e){mC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Us[t]=Us[e]})});function xv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Us.hasOwnProperty(e)&&Us[e]?(""+t).trim():t+"px"}function Pv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var gC=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(e,t){if(t){if(gC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Gu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=null;function wf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yu=null,Li=null,Mi=null;function fp(e){if(e=Do(e)){if(typeof Yu!="function")throw Error(A(280));var t=e.stateNode;t&&(t=tl(t),Yu(e.stateNode,e.type,t))}}function Ov(e){Li?Mi?Mi.push(e):Mi=[e]:Li=e}function Nv(){if(Li){var e=Li,t=Mi;if(Mi=Li=null,fp(e),t)for(e=0;e<t.length;e++)fp(t[e])}}function Av(e,t){return e(t)}function Dv(){}var Vl=!1;function Lv(e,t,n){if(Vl)return e(t,n);Vl=!0;try{return Av(e,t,n)}finally{Vl=!1,(Li!==null||Mi!==null)&&(Dv(),Nv())}}function to(e,t){var n=e.stateNode;if(n===null)return null;var r=tl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Qu=!1;if(Xn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Qu=!1}function vC(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var $s=!1,Ga=null,Ja=!1,Xu=null,yC={onError:function(e){$s=!0,Ga=e}};function SC(e,t,n,r,i,s,o,a,c){$s=!1,Ga=null,vC.apply(yC,arguments)}function bC(e,t,n,r,i,s,o,a,c){if(SC.apply(this,arguments),$s){if($s){var l=Ga;$s=!1,Ga=null}else throw Error(A(198));Ja||(Ja=!0,Xu=l)}}function li(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hp(e){if(li(e)!==e)throw Error(A(188))}function wC(e){var t=e.alternate;if(!t){if(t=li(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return hp(i),e;if(s===r)return hp(i),t;s=s.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function Fv(e){return e=wC(e),e!==null?jv(e):null}function jv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jv(e);if(t!==null)return t;e=e.sibling}return null}var Uv=Jt.unstable_scheduleCallback,pp=Jt.unstable_cancelCallback,CC=Jt.unstable_shouldYield,EC=Jt.unstable_requestPaint,ze=Jt.unstable_now,kC=Jt.unstable_getCurrentPriorityLevel,Cf=Jt.unstable_ImmediatePriority,$v=Jt.unstable_UserBlockingPriority,Ya=Jt.unstable_NormalPriority,TC=Jt.unstable_LowPriority,Vv=Jt.unstable_IdlePriority,Qc=null,Nn=null;function RC(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Qc,e,void 0,(e.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:xC,_C=Math.log,IC=Math.LN2;function xC(e){return e>>>=0,e===0?32:31-(_C(e)/IC|0)|0}var Jo=64,Yo=4194304;function Ds(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ds(a):(s&=o,s!==0&&(r=Ds(s)))}else o=n&~i,o!==0?r=Ds(o):s!==0&&(r=Ds(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yn(t),i=1<<n,r|=e[n],t&=~i;return r}function PC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-yn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=PC(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function Zu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bv(){var e=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),e}function Bl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function No(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yn(t),e[t]=n}function NC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-yn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ef(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ye=0;function zv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hv,kf,Wv,qv,Kv,ed=!1,Qo=[],yr=null,Sr=null,br=null,no=new Map,ro=new Map,fr=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mp(e,t){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":no.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(t.pointerId)}}function bs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Do(t),t!==null&&kf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function DC(e,t,n,r,i){switch(t){case"focusin":return yr=bs(yr,e,t,n,r,i),!0;case"dragenter":return Sr=bs(Sr,e,t,n,r,i),!0;case"mouseover":return br=bs(br,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return no.set(s,bs(no.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ro.set(s,bs(ro.get(s)||null,e,t,n,r,i)),!0}return!1}function Gv(e){var t=Hr(e.target);if(t!==null){var n=li(t);if(n!==null){if(t=n.tag,t===13){if(t=Mv(n),t!==null){e.blockedOn=t,Kv(e.priority,function(){Wv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=td(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ju=r,n.target.dispatchEvent(r),Ju=null}else return t=Do(n),t!==null&&kf(t),e.blockedOn=n,!1;t.shift()}return!0}function gp(e,t,n){ka(e)&&n.delete(t)}function LC(){ed=!1,yr!==null&&ka(yr)&&(yr=null),Sr!==null&&ka(Sr)&&(Sr=null),br!==null&&ka(br)&&(br=null),no.forEach(gp),ro.forEach(gp)}function ws(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,LC)))}function io(e){function t(i){return ws(i,e)}if(0<Qo.length){ws(Qo[0],e);for(var n=1;n<Qo.length;n++){var r=Qo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yr!==null&&ws(yr,e),Sr!==null&&ws(Sr,e),br!==null&&ws(br,e),no.forEach(t),ro.forEach(t),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)Gv(n),n.blockedOn===null&&fr.shift()}var Fi=ir.ReactCurrentBatchConfig,Xa=!0;function MC(e,t,n,r){var i=ye,s=Fi.transition;Fi.transition=null;try{ye=1,Tf(e,t,n,r)}finally{ye=i,Fi.transition=s}}function FC(e,t,n,r){var i=ye,s=Fi.transition;Fi.transition=null;try{ye=4,Tf(e,t,n,r)}finally{ye=i,Fi.transition=s}}function Tf(e,t,n,r){if(Xa){var i=td(e,t,n,r);if(i===null)Xl(e,t,r,Za,n),mp(e,r);else if(DC(i,e,t,n,r))r.stopPropagation();else if(mp(e,r),t&4&&-1<AC.indexOf(e)){for(;i!==null;){var s=Do(i);if(s!==null&&Hv(s),s=td(e,t,n,r),s===null&&Xl(e,t,r,Za,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xl(e,t,r,null,n)}}var Za=null;function td(e,t,n,r){if(Za=null,e=wf(r),e=Hr(e),e!==null)if(t=li(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Za=e,null}function Jv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kC()){case Cf:return 1;case $v:return 4;case Ya:case TC:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var mr=null,Rf=null,Ta=null;function Yv(){if(Ta)return Ta;var e,t=Rf,n=t.length,r,i="value"in mr?mr.value:mr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Ta=i.slice(e,1<r?1-r:void 0)}function Ra(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xo(){return!0}function vp(){return!1}function Xt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xo:vp,this.isPropagationStopped=vp,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),t}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_f=Xt(as),Ao=Me({},as,{view:0,detail:0}),jC=Xt(Ao),zl,Hl,Cs,Xc=Me({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:If,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(zl=e.screenX-Cs.screenX,Hl=e.screenY-Cs.screenY):Hl=zl=0,Cs=e),zl)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),yp=Xt(Xc),UC=Me({},Xc,{dataTransfer:0}),$C=Xt(UC),VC=Me({},Ao,{relatedTarget:0}),Wl=Xt(VC),BC=Me({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Xt(BC),HC=Me({},as,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WC=Xt(HC),qC=Me({},as,{data:0}),Sp=Xt(qC),KC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JC[e])?!!t[e]:!1}function If(){return YC}var QC=Me({},Ao,{key:function(e){if(e.key){var t=KC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:If,charCode:function(e){return e.type==="keypress"?Ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XC=Xt(QC),ZC=Me({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=Xt(ZC),eE=Me({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:If}),tE=Xt(eE),nE=Me({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),rE=Xt(nE),iE=Me({},Xc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sE=Xt(iE),oE=[9,13,27,32],xf=Xn&&"CompositionEvent"in window,Vs=null;Xn&&"documentMode"in document&&(Vs=document.documentMode);var aE=Xn&&"TextEvent"in window&&!Vs,Qv=Xn&&(!xf||Vs&&8<Vs&&11>=Vs),wp=" ",Cp=!1;function Xv(e,t){switch(e){case"keyup":return oE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ei=!1;function cE(e,t){switch(e){case"compositionend":return Zv(t);case"keypress":return t.which!==32?null:(Cp=!0,wp);case"textInput":return e=t.data,e===wp&&Cp?null:e;default:return null}}function lE(e,t){if(Ei)return e==="compositionend"||!xf&&Xv(e,t)?(e=Yv(),Ta=Rf=mr=null,Ei=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qv&&t.locale!=="ko"?null:t.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uE[e.type]:t==="textarea"}function ey(e,t,n,r){Ov(r),t=ec(t,"onChange"),0<t.length&&(n=new _f("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bs=null,so=null;function dE(e){dy(e,0)}function Zc(e){var t=Ri(e);if(kv(t))return e}function fE(e,t){if(e==="change")return t}var ty=!1;if(Xn){var ql;if(Xn){var Kl="oninput"in document;if(!Kl){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),Kl=typeof kp.oninput=="function"}ql=Kl}else ql=!1;ty=ql&&(!document.documentMode||9<document.documentMode)}function Tp(){Bs&&(Bs.detachEvent("onpropertychange",ny),so=Bs=null)}function ny(e){if(e.propertyName==="value"&&Zc(so)){var t=[];ey(t,so,e,wf(e)),Lv(dE,t)}}function hE(e,t,n){e==="focusin"?(Tp(),Bs=t,so=n,Bs.attachEvent("onpropertychange",ny)):e==="focusout"&&Tp()}function pE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zc(so)}function mE(e,t){if(e==="click")return Zc(t)}function gE(e,t){if(e==="input"||e==="change")return Zc(t)}function vE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:vE;function oo(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fu.call(t,i)||!bn(e[i],t[i]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _p(e,t){var n=Rp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rp(n)}}function ry(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ry(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iy(){for(var e=window,t=Ka();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ka(e.document)}return t}function Pf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yE(e){var t=iy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ry(n.ownerDocument.documentElement,n)){if(r!==null&&Pf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=_p(n,s);var o=_p(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SE=Xn&&"documentMode"in document&&11>=document.documentMode,ki=null,nd=null,zs=null,rd=!1;function Ip(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rd||ki==null||ki!==Ka(r)||(r=ki,"selectionStart"in r&&Pf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&oo(zs,r)||(zs=r,r=ec(nd,"onSelect"),0<r.length&&(t=new _f("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ki)))}function Zo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ti={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},Gl={},sy={};Xn&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function el(e){if(Gl[e])return Gl[e];if(!Ti[e])return e;var t=Ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sy)return Gl[e]=t[n];return e}var oy=el("animationend"),ay=el("animationiteration"),cy=el("animationstart"),ly=el("transitionend"),uy=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){uy.set(e,t),ci(t,[e])}for(var Jl=0;Jl<xp.length;Jl++){var Yl=xp[Jl],bE=Yl.toLowerCase(),wE=Yl[0].toUpperCase()+Yl.slice(1);Mr(bE,"on"+wE)}Mr(oy,"onAnimationEnd");Mr(ay,"onAnimationIteration");Mr(cy,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(ly,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function Pp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bC(r,t,void 0,e),e.currentTarget=null}function dy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Pp(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Pp(i,a,l),s=c}}}if(Ja)throw e=Xu,Ja=!1,Xu=null,e}function _e(e,t){var n=t[cd];n===void 0&&(n=t[cd]=new Set);var r=e+"__bubble";n.has(r)||(fy(t,e,2,!1),n.add(r))}function Ql(e,t,n){var r=0;t&&(r|=4),fy(n,e,r,t)}var ea="_reactListening"+Math.random().toString(36).slice(2);function ao(e){if(!e[ea]){e[ea]=!0,Sv.forEach(function(n){n!=="selectionchange"&&(CE.has(n)||Ql(n,!1,e),Ql(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ea]||(t[ea]=!0,Ql("selectionchange",!1,t))}}function fy(e,t,n,r){switch(Jv(t)){case 1:var i=MC;break;case 4:i=FC;break;default:i=Tf}n=i.bind(null,t,n,e),i=void 0,!Qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Xl(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hr(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Lv(function(){var l=s,u=wf(n),f=[];e:{var d=uy.get(e);if(d!==void 0){var h=_f,p=e;switch(e){case"keypress":if(Ra(n)===0)break e;case"keydown":case"keyup":h=XC;break;case"focusin":p="focus",h=Wl;break;case"focusout":p="blur",h=Wl;break;case"beforeblur":case"afterblur":h=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=tE;break;case oy:case ay:case cy:h=zC;break;case ly:h=rE;break;case"scroll":h=jC;break;case"wheel":h=sE;break;case"copy":case"cut":case"paste":h=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=bp}var m=(t&4)!==0,v=!m&&e==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var y=l,S;y!==null;){S=y;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,g!==null&&(b=to(y,g),b!=null&&m.push(co(y,b,S)))),v)break;y=y.return}0<m.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Ju&&(p=n.relatedTarget||n.fromElement)&&(Hr(p)||p[Zn]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Hr(p):null,p!==null&&(v=li(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=yp,b="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=bp,b="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?d:Ri(h),S=p==null?d:Ri(p),d=new m(b,y+"leave",h,n,u),d.target=v,d.relatedTarget=S,b=null,Hr(u)===l&&(m=new m(g,y+"enter",p,n,u),m.target=S,m.relatedTarget=v,b=m),v=b,h&&p)t:{for(m=h,g=p,y=0,S=m;S;S=mi(S))y++;for(S=0,b=g;b;b=mi(b))S++;for(;0<y-S;)m=mi(m),y--;for(;0<S-y;)g=mi(g),S--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=mi(m),g=mi(g)}m=null}else m=null;h!==null&&Op(f,d,h,m,!1),p!==null&&v!==null&&Op(f,v,p,m,!0)}}e:{if(d=l?Ri(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=fE;else if(Ep(d))if(ty)E=gE;else{E=pE;var k=hE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=mE);if(E&&(E=E(e,l))){ey(f,E,n,u);break e}k&&k(e,d,l),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&Hu(d,"number",d.value)}switch(k=l?Ri(l):window,e){case"focusin":(Ep(k)||k.contentEditable==="true")&&(ki=k,nd=l,zs=null);break;case"focusout":zs=nd=ki=null;break;case"mousedown":rd=!0;break;case"contextmenu":case"mouseup":case"dragend":rd=!1,Ip(f,n,u);break;case"selectionchange":if(SE)break;case"keydown":case"keyup":Ip(f,n,u)}var T;if(xf)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ei?Xv(e,n)&&(x="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Qv&&n.locale!=="ko"&&(Ei||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ei&&(T=Yv()):(mr=u,Rf="value"in mr?mr.value:mr.textContent,Ei=!0)),k=ec(l,x),0<k.length&&(x=new Sp(x,e,null,n,u),f.push({event:x,listeners:k}),T?x.data=T:(T=Zv(n),T!==null&&(x.data=T)))),(T=aE?cE(e,n):lE(e,n))&&(l=ec(l,"onBeforeInput"),0<l.length&&(u=new Sp("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:l}),u.data=T))}dy(f,t)})}function co(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ec(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=to(e,n),s!=null&&r.unshift(co(e,s,i)),s=to(e,t),s!=null&&r.push(co(e,s,i))),e=e.return}return r}function mi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Op(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=to(n,s),c!=null&&o.unshift(co(n,c,a))):i||(c=to(n,s),c!=null&&o.push(co(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var EE=/\r\n?/g,kE=/\u0000|\uFFFD/g;function Np(e){return(typeof e=="string"?e:""+e).replace(EE,`
`).replace(kE,"")}function ta(e,t,n){if(t=Np(t),Np(e)!==t&&n)throw Error(A(425))}function tc(){}var id=null,sd=null;function od(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,RE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(e){return Ap.resolve(null).then(e).catch(_E)}:ad;function _E(e){setTimeout(function(){throw e})}function Zl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),io(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);io(t)}function wr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),_n="__reactFiber$"+cs,lo="__reactProps$"+cs,Zn="__reactContainer$"+cs,cd="__reactEvents$"+cs,IE="__reactListeners$"+cs,xE="__reactHandles$"+cs;function Hr(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zn]||n[_n]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dp(e);e!==null;){if(n=e[_n])return n;e=Dp(e)}return t}e=n,n=e.parentNode}return null}function Do(e){return e=e[_n]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ri(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function tl(e){return e[lo]||null}var ld=[],_i=-1;function Fr(e){return{current:e}}function Ie(e){0>_i||(e.current=ld[_i],ld[_i]=null,_i--)}function ke(e,t){_i++,ld[_i]=e.current,e.current=t}var Pr={},mt=Fr(Pr),Mt=Fr(!1),Qr=Pr;function Ki(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(e){return e=e.childContextTypes,e!=null}function nc(){Ie(Mt),Ie(mt)}function Lp(e,t,n){if(mt.current!==Pr)throw Error(A(168));ke(mt,t),ke(Mt,n)}function hy(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(A(108,hC(e)||"Unknown",i));return Me({},n,r)}function rc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,Qr=mt.current,ke(mt,e),ke(Mt,Mt.current),!0}function Mp(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=hy(e,t,Qr),r.__reactInternalMemoizedMergedChildContext=e,Ie(Mt),Ie(mt),ke(mt,e)):Ie(Mt),ke(Mt,n)}var qn=null,nl=!1,eu=!1;function py(e){qn===null?qn=[e]:qn.push(e)}function PE(e){nl=!0,py(e)}function jr(){if(!eu&&qn!==null){eu=!0;var e=0,t=ye;try{var n=qn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qn=null,nl=!1}catch(i){throw qn!==null&&(qn=qn.slice(e+1)),Uv(Cf,jr),i}finally{ye=t,eu=!1}}return null}var Ii=[],xi=0,ic=null,sc=0,tn=[],nn=0,Xr=null,Jn=1,Yn="";function $r(e,t){Ii[xi++]=sc,Ii[xi++]=ic,ic=e,sc=t}function my(e,t,n){tn[nn++]=Jn,tn[nn++]=Yn,tn[nn++]=Xr,Xr=e;var r=Jn;e=Yn;var i=32-yn(r)-1;r&=~(1<<i),n+=1;var s=32-yn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jn=1<<32-yn(t)+i|n<<i|r,Yn=s+e}else Jn=1<<s|n<<i|r,Yn=e}function Of(e){e.return!==null&&($r(e,1),my(e,1,0))}function Nf(e){for(;e===ic;)ic=Ii[--xi],Ii[xi]=null,sc=Ii[--xi],Ii[xi]=null;for(;e===Xr;)Xr=tn[--nn],tn[nn]=null,Yn=tn[--nn],tn[nn]=null,Jn=tn[--nn],tn[nn]=null}var Wt=null,Ht=null,Oe=!1,mn=null;function gy(e,t){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Ht=wr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xr!==null?{id:Jn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wt=e,Ht=null,!0):!1;default:return!1}}function ud(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dd(e){if(Oe){var t=Ht;if(t){var n=t;if(!Fp(e,t)){if(ud(e))throw Error(A(418));t=wr(n.nextSibling);var r=Wt;t&&Fp(e,t)?gy(r,n):(e.flags=e.flags&-4097|2,Oe=!1,Wt=e)}}else{if(ud(e))throw Error(A(418));e.flags=e.flags&-4097|2,Oe=!1,Wt=e}}}function jp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function na(e){if(e!==Wt)return!1;if(!Oe)return jp(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!od(e.type,e.memoizedProps)),t&&(t=Ht)){if(ud(e))throw vy(),Error(A(418));for(;t;)gy(e,t),t=wr(t.nextSibling)}if(jp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ht=wr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ht=null}}else Ht=Wt?wr(e.stateNode.nextSibling):null;return!0}function vy(){for(var e=Ht;e;)e=wr(e.nextSibling)}function Gi(){Ht=Wt=null,Oe=!1}function Af(e){mn===null?mn=[e]:mn.push(e)}var OE=ir.ReactCurrentBatchConfig;function Es(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function ra(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Up(e){var t=e._init;return t(e._payload)}function yy(e){function t(g,y){if(e){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Tr(g,y),g.index=0,g.sibling=null,g}function s(g,y,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,S,b){return y===null||y.tag!==6?(y=au(S,g.mode,b),y.return=g,y):(y=i(y,S),y.return=g,y)}function c(g,y,S,b){var E=S.type;return E===Ci?u(g,y,S.props.children,b,S.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&Up(E)===y.type)?(b=i(y,S.props),b.ref=Es(g,y,S),b.return=g,b):(b=Aa(S.type,S.key,S.props,null,g.mode,b),b.ref=Es(g,y,S),b.return=g,b)}function l(g,y,S,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=cu(S,g.mode,b),y.return=g,y):(y=i(y,S.children||[]),y.return=g,y)}function u(g,y,S,b,E){return y===null||y.tag!==7?(y=Jr(S,g.mode,b,E),y.return=g,y):(y=i(y,S),y.return=g,y)}function f(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=au(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qo:return S=Aa(y.type,y.key,y.props,null,g.mode,S),S.ref=Es(g,null,y),S.return=g,S;case wi:return y=cu(y,g.mode,S),y.return=g,y;case lr:var b=y._init;return f(g,b(y._payload),S)}if(As(y)||ys(y))return y=Jr(y,g.mode,S,null),y.return=g,y;ra(g,y)}return null}function d(g,y,S,b){var E=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:a(g,y,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qo:return S.key===E?c(g,y,S,b):null;case wi:return S.key===E?l(g,y,S,b):null;case lr:return E=S._init,d(g,y,E(S._payload),b)}if(As(S)||ys(S))return E!==null?null:u(g,y,S,b,null);ra(g,S)}return null}function h(g,y,S,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(S)||null,a(y,g,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:return g=g.get(b.key===null?S:b.key)||null,c(y,g,b,E);case wi:return g=g.get(b.key===null?S:b.key)||null,l(y,g,b,E);case lr:var k=b._init;return h(g,y,S,k(b._payload),E)}if(As(b)||ys(b))return g=g.get(S)||null,u(y,g,b,E,null);ra(y,b)}return null}function p(g,y,S,b){for(var E=null,k=null,T=y,x=y=0,j=null;T!==null&&x<S.length;x++){T.index>x?(j=T,T=null):j=T.sibling;var P=d(g,T,S[x],b);if(P===null){T===null&&(T=j);break}e&&T&&P.alternate===null&&t(g,T),y=s(P,y,x),k===null?E=P:k.sibling=P,k=P,T=j}if(x===S.length)return n(g,T),Oe&&$r(g,x),E;if(T===null){for(;x<S.length;x++)T=f(g,S[x],b),T!==null&&(y=s(T,y,x),k===null?E=T:k.sibling=T,k=T);return Oe&&$r(g,x),E}for(T=r(g,T);x<S.length;x++)j=h(T,g,x,S[x],b),j!==null&&(e&&j.alternate!==null&&T.delete(j.key===null?x:j.key),y=s(j,y,x),k===null?E=j:k.sibling=j,k=j);return e&&T.forEach(function(V){return t(g,V)}),Oe&&$r(g,x),E}function m(g,y,S,b){var E=ys(S);if(typeof E!="function")throw Error(A(150));if(S=E.call(S),S==null)throw Error(A(151));for(var k=E=null,T=y,x=y=0,j=null,P=S.next();T!==null&&!P.done;x++,P=S.next()){T.index>x?(j=T,T=null):j=T.sibling;var V=d(g,T,P.value,b);if(V===null){T===null&&(T=j);break}e&&T&&V.alternate===null&&t(g,T),y=s(V,y,x),k===null?E=V:k.sibling=V,k=V,T=j}if(P.done)return n(g,T),Oe&&$r(g,x),E;if(T===null){for(;!P.done;x++,P=S.next())P=f(g,P.value,b),P!==null&&(y=s(P,y,x),k===null?E=P:k.sibling=P,k=P);return Oe&&$r(g,x),E}for(T=r(g,T);!P.done;x++,P=S.next())P=h(T,g,x,P.value,b),P!==null&&(e&&P.alternate!==null&&T.delete(P.key===null?x:P.key),y=s(P,y,x),k===null?E=P:k.sibling=P,k=P);return e&&T.forEach(function(N){return t(g,N)}),Oe&&$r(g,x),E}function v(g,y,S,b){if(typeof S=="object"&&S!==null&&S.type===Ci&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qo:e:{for(var E=S.key,k=y;k!==null;){if(k.key===E){if(E=S.type,E===Ci){if(k.tag===7){n(g,k.sibling),y=i(k,S.props.children),y.return=g,g=y;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&Up(E)===k.type){n(g,k.sibling),y=i(k,S.props),y.ref=Es(g,k,S),y.return=g,g=y;break e}n(g,k);break}else t(g,k);k=k.sibling}S.type===Ci?(y=Jr(S.props.children,g.mode,b,S.key),y.return=g,g=y):(b=Aa(S.type,S.key,S.props,null,g.mode,b),b.ref=Es(g,y,S),b.return=g,g=b)}return o(g);case wi:e:{for(k=S.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(g,y.sibling),y=i(y,S.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=cu(S,g.mode,b),y.return=g,g=y}return o(g);case lr:return k=S._init,v(g,y,k(S._payload),b)}if(As(S))return p(g,y,S,b);if(ys(S))return m(g,y,S,b);ra(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,S),y.return=g,g=y):(n(g,y),y=au(S,g.mode,b),y.return=g,g=y),o(g)):n(g,y)}return v}var Ji=yy(!0),Sy=yy(!1),oc=Fr(null),ac=null,Pi=null,Df=null;function Lf(){Df=Pi=ac=null}function Mf(e){var t=oc.current;Ie(oc),e._currentValue=t}function fd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){ac=e,Df=Pi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lt=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(Df!==e)if(e={context:e,memoizedValue:t,next:null},Pi===null){if(ac===null)throw Error(A(308));Pi=e,ac.dependencies={lanes:0,firstContext:e}}else Pi=Pi.next=e;return t}var Wr=null;function Ff(e){Wr===null?Wr=[e]:Wr.push(e)}function by(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ff(t)):(n.next=i.next,i.next=n),t.interleaved=n,er(e,r)}function er(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ur=!1;function jf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,er(e,n)}return i=r.interleaved,i===null?(t.next=t,Ff(r)):(t.next=i.next,i.next=t),r.interleaved=t,er(e,n)}function _a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ef(e,n)}}function $p(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cc(e,t,n,r){var i=e.updateQueue;ur=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,u=l=c=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Me({},f,d);break e;case 2:ur=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ei|=o,e.lanes=o,e.memoizedState=f}}function Vp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Lo={},An=Fr(Lo),uo=Fr(Lo),fo=Fr(Lo);function qr(e){if(e===Lo)throw Error(A(174));return e}function Uf(e,t){switch(ke(fo,t),ke(uo,e),ke(An,Lo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qu(t,e)}Ie(An),ke(An,t)}function Yi(){Ie(An),Ie(uo),Ie(fo)}function Cy(e){qr(fo.current);var t=qr(An.current),n=qu(t,e.type);t!==n&&(ke(uo,e),ke(An,n))}function $f(e){uo.current===e&&(Ie(An),Ie(uo))}var De=Fr(0);function lc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tu=[];function Vf(){for(var e=0;e<tu.length;e++)tu[e]._workInProgressVersionPrimary=null;tu.length=0}var Ia=ir.ReactCurrentDispatcher,nu=ir.ReactCurrentBatchConfig,Zr=0,Le=null,Ke=null,Xe=null,uc=!1,Hs=!1,ho=0,NE=0;function ct(){throw Error(A(321))}function Bf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bn(e[n],t[n]))return!1;return!0}function zf(e,t,n,r,i,s){if(Zr=s,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ia.current=e===null||e.memoizedState===null?ME:FE,e=n(r,i),Hs){s=0;do{if(Hs=!1,ho=0,25<=s)throw Error(A(301));s+=1,Xe=Ke=null,t.updateQueue=null,Ia.current=jE,e=n(r,i)}while(Hs)}if(Ia.current=dc,t=Ke!==null&&Ke.next!==null,Zr=0,Xe=Ke=Le=null,uc=!1,t)throw Error(A(300));return e}function Hf(){var e=ho!==0;return ho=0,e}function Rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function cn(){if(Ke===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=Xe===null?Le.memoizedState:Xe.next;if(t!==null)Xe=t,Ke=e;else{if(e===null)throw Error(A(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Xe===null?Le.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function po(e,t){return typeof t=="function"?t(e):t}function ru(e){var t=cn(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Zr&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Le.lanes|=u,ei|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,bn(r,t.memoizedState)||(Lt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Le.lanes|=s,ei|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function iu(e){var t=cn(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);bn(s,t.memoizedState)||(Lt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ey(){}function ky(e,t){var n=Le,r=cn(),i=t(),s=!bn(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,Wf(_y.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,mo(9,Ry.bind(null,n,r,i,t),void 0,null),et===null)throw Error(A(349));Zr&30||Ty(n,t,i)}return i}function Ty(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ry(e,t,n,r){t.value=n,t.getSnapshot=r,Iy(t)&&xy(e)}function _y(e,t,n){return n(function(){Iy(t)&&xy(e)})}function Iy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bn(e,n)}catch{return!0}}function xy(e){var t=er(e,1);t!==null&&Sn(t,e,1,-1)}function Bp(e){var t=Rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t.queue=e,e=e.dispatch=LE.bind(null,Le,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Py(){return cn().memoizedState}function xa(e,t,n,r){var i=Rn();Le.flags|=e,i.memoizedState=mo(1|t,n,void 0,r===void 0?null:r)}function rl(e,t,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&Bf(r,o.deps)){i.memoizedState=mo(t,n,s,r);return}}Le.flags|=e,i.memoizedState=mo(1|t,n,s,r)}function zp(e,t){return xa(8390656,8,e,t)}function Wf(e,t){return rl(2048,8,e,t)}function Oy(e,t){return rl(4,2,e,t)}function Ny(e,t){return rl(4,4,e,t)}function Ay(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dy(e,t,n){return n=n!=null?n.concat([e]):null,rl(4,4,Ay.bind(null,t,e),n)}function qf(){}function Ly(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function My(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Bf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Fy(e,t,n){return Zr&21?(bn(n,t)||(n=Bv(),Le.lanes|=n,ei|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lt=!0),e.memoizedState=n)}function AE(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=nu.transition;nu.transition={};try{e(!1),t()}finally{ye=n,nu.transition=r}}function jy(){return cn().memoizedState}function DE(e,t,n){var r=kr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uy(e))$y(t,n);else if(n=by(e,t,n,r),n!==null){var i=Et();Sn(n,e,r,i),Vy(n,t,r)}}function LE(e,t,n){var r=kr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uy(e))$y(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,bn(a,o)){var c=t.interleaved;c===null?(i.next=i,Ff(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=by(e,t,i,r),n!==null&&(i=Et(),Sn(n,e,r,i),Vy(n,t,r))}}function Uy(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function $y(e,t){Hs=uc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ef(e,n)}}var dc={readContext:an,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},ME={readContext:an,useCallback:function(e,t){return Rn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:zp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xa(4194308,4,Ay.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xa(4194308,4,e,t)},useInsertionEffect:function(e,t){return xa(4,2,e,t)},useMemo:function(e,t){var n=Rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=DE.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=Rn();return e={current:e},t.memoizedState=e},useState:Bp,useDebugValue:qf,useDeferredValue:function(e){return Rn().memoizedState=e},useTransition:function(){var e=Bp(!1),t=e[0];return e=AE.bind(null,e[1]),Rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,i=Rn();if(Oe){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),et===null)throw Error(A(349));Zr&30||Ty(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zp(_y.bind(null,r,s,e),[e]),r.flags|=2048,mo(9,Ry.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rn(),t=et.identifierPrefix;if(Oe){var n=Yn,r=Jn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ho++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=NE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FE={readContext:an,useCallback:Ly,useContext:an,useEffect:Wf,useImperativeHandle:Dy,useInsertionEffect:Oy,useLayoutEffect:Ny,useMemo:My,useReducer:ru,useRef:Py,useState:function(){return ru(po)},useDebugValue:qf,useDeferredValue:function(e){var t=cn();return Fy(t,Ke.memoizedState,e)},useTransition:function(){var e=ru(po)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Ey,useSyncExternalStore:ky,useId:jy,unstable_isNewReconciler:!1},jE={readContext:an,useCallback:Ly,useContext:an,useEffect:Wf,useImperativeHandle:Dy,useInsertionEffect:Oy,useLayoutEffect:Ny,useMemo:My,useReducer:iu,useRef:Py,useState:function(){return iu(po)},useDebugValue:qf,useDeferredValue:function(e){var t=cn();return Ke===null?t.memoizedState=e:Fy(t,Ke.memoizedState,e)},useTransition:function(){var e=iu(po)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Ey,useSyncExternalStore:ky,useId:jy,unstable_isNewReconciler:!1};function hn(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var il={isMounted:function(e){return(e=e._reactInternals)?li(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Et(),i=kr(e),s=Qn(r,i);s.payload=t,n!=null&&(s.callback=n),t=Cr(e,s,i),t!==null&&(Sn(t,e,i,r),_a(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Et(),i=kr(e),s=Qn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Cr(e,s,i),t!==null&&(Sn(t,e,i,r),_a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Et(),r=kr(e),i=Qn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Cr(e,i,r),t!==null&&(Sn(t,e,r,n),_a(t,e,r))}};function Hp(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!oo(n,r)||!oo(i,s):!0}function By(e,t,n){var r=!1,i=Pr,s=t.contextType;return typeof s=="object"&&s!==null?s=an(s):(i=Ft(t)?Qr:mt.current,r=t.contextTypes,s=(r=r!=null)?Ki(e,i):Pr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Wp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function pd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jf(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=an(s):(s=Ft(t)?Qr:mt.current,i.context=Ki(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(hd(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&il.enqueueReplaceState(i,i.state,null),cc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Qi(e,t){try{var n="",r=t;do n+=fC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function su(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function md(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UE=typeof WeakMap=="function"?WeakMap:Map;function zy(e,t,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hc||(hc=!0,Td=r),md(e,t)},n}function Hy(e,t,n){n=Qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){md(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){md(e,t),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function qp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UE;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ZE.bind(null,e,t,n),t.then(e,e))}function Kp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gp(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qn(-1,1),t.tag=2,Cr(n,t,1))),n.lanes|=1),e)}var $E=ir.ReactCurrentOwner,Lt=!1;function St(e,t,n,r){t.child=e===null?Sy(t,null,n,r):Ji(t,e.child,n,r)}function Jp(e,t,n,r,i){n=n.render;var s=t.ref;return ji(t,i),r=zf(e,t,n,r,s,i),n=Hf(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tr(e,t,i)):(Oe&&n&&Of(t),t.flags|=1,St(e,t,r,i),t.child)}function Yp(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!eh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Wy(e,t,s,r,i)):(e=Aa(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:oo,n(o,r)&&e.ref===t.ref)return tr(e,t,i)}return t.flags|=1,e=Tr(s,r),e.ref=t.ref,e.return=t,t.child=e}function Wy(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(oo(s,r)&&e.ref===t.ref)if(Lt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Lt=!0);else return t.lanes=e.lanes,tr(e,t,i)}return gd(e,t,n,r,i)}function qy(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Ni,Bt),Bt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(Ni,Bt),Bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(Ni,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ke(Ni,Bt),Bt|=r;return St(e,t,i,n),t.child}function Ky(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gd(e,t,n,r,i){var s=Ft(n)?Qr:mt.current;return s=Ki(t,s),ji(t,i),n=zf(e,t,n,r,s,i),r=Hf(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,tr(e,t,i)):(Oe&&r&&Of(t),t.flags|=1,St(e,t,n,i),t.child)}function Qp(e,t,n,r,i){if(Ft(n)){var s=!0;rc(t)}else s=!1;if(ji(t,i),t.stateNode===null)Pa(e,t),By(t,n,r),pd(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=an(l):(l=Ft(n)?Qr:mt.current,l=Ki(t,l));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&Wp(t,o,r,l),ur=!1;var d=t.memoizedState;o.state=d,cc(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Mt.current||ur?(typeof u=="function"&&(hd(t,n,u,r),c=t.memoizedState),(a=ur||Hp(t,n,a,r,d,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,wy(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:hn(t.type,a),o.props=l,f=t.pendingProps,d=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=an(c):(c=Ft(n)?Qr:mt.current,c=Ki(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==c)&&Wp(t,o,r,c),ur=!1,d=t.memoizedState,o.state=d,cc(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Mt.current||ur?(typeof h=="function"&&(hd(t,n,h,r),p=t.memoizedState),(l=ur||Hp(t,n,l,r,d,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return vd(e,t,n,r,s,i)}function vd(e,t,n,r,i,s){Ky(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Mp(t,n,!1),tr(e,t,s);r=t.stateNode,$E.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ji(t,e.child,null,s),t.child=Ji(t,null,a,s)):St(e,t,a,s),t.memoizedState=r.state,i&&Mp(t,n,!0),t.child}function Gy(e){var t=e.stateNode;t.pendingContext?Lp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lp(e,t.context,!1),Uf(e,t.containerInfo)}function Xp(e,t,n,r,i){return Gi(),Af(i),t.flags|=256,St(e,t,n,r),t.child}var yd={dehydrated:null,treeContext:null,retryLane:0};function Sd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jy(e,t,n){var r=t.pendingProps,i=De.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ke(De,i&1),e===null)return dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=al(o,r,0,null),e=Jr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Sd(n),t.memoizedState=yd,e):Kf(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return VE(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Tr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Tr(a,s):(s=Jr(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Sd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=yd,r}return s=e.child,e=s.sibling,r=Tr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Kf(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ia(e,t,n,r){return r!==null&&Af(r),Ji(t,e.child,null,n),e=Kf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function VE(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=su(Error(A(422))),ia(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=al({mode:"visible",children:r.children},i,0,null),s=Jr(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ji(t,e.child,null,o),t.child.memoizedState=Sd(o),t.memoizedState=yd,s);if(!(t.mode&1))return ia(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(A(419)),r=su(s,r,void 0),ia(e,t,o,r)}if(a=(o&e.childLanes)!==0,Lt||a){if(r=et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,er(e,i),Sn(r,e,i,-1))}return Zf(),r=su(Error(A(421))),ia(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=ek.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ht=wr(i.nextSibling),Wt=t,Oe=!0,mn=null,e!==null&&(tn[nn++]=Jn,tn[nn++]=Yn,tn[nn++]=Xr,Jn=e.id,Yn=e.overflow,Xr=t),t=Kf(t,r.children),t.flags|=4096,t)}function Zp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fd(e.return,t,n)}function ou(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yy(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(St(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zp(e,n,t);else if(e.tag===19)Zp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ke(De,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ou(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ou(t,!0,n,null,s);break;case"together":ou(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ei|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=Tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function BE(e,t,n){switch(t.tag){case 3:Gy(t),Gi();break;case 5:Cy(t);break;case 1:Ft(t.type)&&rc(t);break;case 4:Uf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ke(oc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ke(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?Jy(e,t,n):(ke(De,De.current&1),e=tr(e,t,n),e!==null?e.sibling:null);ke(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yy(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,qy(e,t,n)}return tr(e,t,n)}var Qy,bd,Xy,Zy;Qy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bd=function(){};Xy=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qr(An.current);var s=null;switch(n){case"input":i=Bu(e,i),r=Bu(e,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=Wu(e,i),r=Wu(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tc)}Ku(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Zs.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Zs.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&_e("scroll",e),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Zy=function(e,t,n,r){n!==r&&(t.flags|=4)};function ks(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zE(e,t,n){var r=t.pendingProps;switch(Nf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return Ft(t.type)&&nc(),lt(t),null;case 3:return r=t.stateNode,Yi(),Ie(Mt),Ie(mt),Vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(na(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&(Id(mn),mn=null))),bd(e,t),lt(t),null;case 5:$f(t);var i=qr(fo.current);if(n=t.type,e!==null&&t.stateNode!=null)Xy(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return lt(t),null}if(e=qr(An.current),na(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_n]=t,r[lo]=s,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<Ls.length;i++)_e(Ls[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":cp(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":up(r,s),_e("invalid",r)}Ku(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,a,e),i=["children",""+a]):Zs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ko(r),lp(r,s,!0);break;case"textarea":Ko(r),dp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tc)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_v(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[_n]=t,e[lo]=r,Qy(e,t,!1,!1),t.stateNode=e;e:{switch(o=Gu(n,r),n){case"dialog":_e("cancel",e),_e("close",e),i=r;break;case"iframe":case"object":case"embed":_e("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ls.length;i++)_e(Ls[i],e);i=r;break;case"source":_e("error",e),i=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),i=r;break;case"details":_e("toggle",e),i=r;break;case"input":cp(e,r),i=Bu(e,r),_e("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),_e("invalid",e);break;case"textarea":up(e,r),i=Wu(e,r),_e("invalid",e);break;default:i=r}Ku(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Pv(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iv(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&eo(e,c):typeof c=="number"&&eo(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&_e("scroll",e):c!=null&&vf(e,s,c,o))}switch(n){case"input":Ko(e),lp(e,r,!1);break;case"textarea":Ko(e),dp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Di(e,!!r.multiple,s,!1):r.defaultValue!=null&&Di(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)Zy(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=qr(fo.current),qr(An.current),na(t)){if(r=t.stateNode,n=t.memoizedProps,r[_n]=t,(s=r.nodeValue!==n)&&(e=Wt,e!==null))switch(e.tag){case 3:ta(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ta(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=t,t.stateNode=r}return lt(t),null;case 13:if(Ie(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&t.mode&1&&!(t.flags&128))vy(),Gi(),t.flags|=98560,s=!1;else if(s=na(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(A(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[_n]=t}else Gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),s=!1}else mn!==null&&(Id(mn),mn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Je===0&&(Je=3):Zf())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return Yi(),bd(e,t),e===null&&ao(t.stateNode.containerInfo),lt(t),null;case 10:return Mf(t.type._context),lt(t),null;case 17:return Ft(t.type)&&nc(),lt(t),null;case 19:if(Ie(De),s=t.memoizedState,s===null)return lt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ks(s,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lc(e),o!==null){for(t.flags|=128,ks(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ke(De,De.current&1|2),t.child}e=e.sibling}s.tail!==null&&ze()>Xi&&(t.flags|=128,r=!0,ks(s,!1),t.lanes=4194304)}else{if(!r)if(e=lc(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ks(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return lt(t),null}else 2*ze()-s.renderingStartTime>Xi&&n!==1073741824&&(t.flags|=128,r=!0,ks(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ze(),t.sibling=null,n=De.current,ke(De,r?n&1|2:n&1),t):(lt(t),null);case 22:case 23:return Xf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Bt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function HE(e,t){switch(Nf(t),t.tag){case 1:return Ft(t.type)&&nc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(),Ie(Mt),Ie(mt),Vf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $f(t),null;case 13:if(Ie(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(De),null;case 4:return Yi(),null;case 10:return Mf(t.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var sa=!1,ft=!1,WE=typeof WeakSet=="function"?WeakSet:Set,B=null;function Oi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function wd(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var em=!1;function qE(e,t){if(id=Xa,e=iy(),Pf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++u===r&&(c=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},Xa=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:hn(t.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(b){Fe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return p=em,em=!1,p}function Ws(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&wd(t,n,s)}i=i.next}while(i!==r)}}function sl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Cd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eS(e){var t=e.alternate;t!==null&&(e.alternate=null,eS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[lo],delete t[cd],delete t[IE],delete t[xE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tS(e){return e.tag===5||e.tag===3||e.tag===4}function tm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ed(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tc));else if(r!==4&&(e=e.child,e!==null))for(Ed(e,t,n),e=e.sibling;e!==null;)Ed(e,t,n),e=e.sibling}function kd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kd(e,t,n),e=e.sibling;e!==null;)kd(e,t,n),e=e.sibling}var nt=null,pn=!1;function ar(e,t,n){for(n=n.child;n!==null;)nS(e,t,n),n=n.sibling}function nS(e,t,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Qc,n)}catch{}switch(n.tag){case 5:ft||Oi(n,t);case 6:var r=nt,i=pn;nt=null,ar(e,t,n),nt=r,pn=i,nt!==null&&(pn?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(pn?(e=nt,n=n.stateNode,e.nodeType===8?Zl(e.parentNode,n):e.nodeType===1&&Zl(e,n),io(e)):Zl(nt,n.stateNode));break;case 4:r=nt,i=pn,nt=n.stateNode.containerInfo,pn=!0,ar(e,t,n),nt=r,pn=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wd(n,t,o),i=i.next}while(i!==r)}ar(e,t,n);break;case 1:if(!ft&&(Oi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,t,a)}ar(e,t,n);break;case 21:ar(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,ar(e,t,n),ft=r):ar(e,t,n);break;default:ar(e,t,n)}}function nm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new WE),t.forEach(function(r){var i=tk.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,pn=!1;break e;case 3:nt=a.stateNode.containerInfo,pn=!0;break e;case 4:nt=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(nt===null)throw Error(A(160));nS(s,o,i),nt=null,pn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Fe(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rS(t,e),t=t.sibling}function rS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dn(t,e),Tn(e),r&4){try{Ws(3,e,e.return),sl(3,e)}catch(m){Fe(e,e.return,m)}try{Ws(5,e,e.return)}catch(m){Fe(e,e.return,m)}}break;case 1:dn(t,e),Tn(e),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(dn(t,e),Tn(e),r&512&&n!==null&&Oi(n,n.return),e.flags&32){var i=e.stateNode;try{eo(i,"")}catch(m){Fe(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Tv(i,s),Gu(a,o);var l=Gu(a,s);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?Pv(i,f):u==="dangerouslySetInnerHTML"?Iv(i,f):u==="children"?eo(i,f):vf(i,u,f,l)}switch(a){case"input":zu(i,s);break;case"textarea":Rv(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Di(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Di(i,!!s.multiple,s.defaultValue,!0):Di(i,!!s.multiple,s.multiple?[]:"",!1))}i[lo]=s}catch(m){Fe(e,e.return,m)}}break;case 6:if(dn(t,e),Tn(e),r&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Fe(e,e.return,m)}}break;case 3:if(dn(t,e),Tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{io(t.containerInfo)}catch(m){Fe(e,e.return,m)}break;case 4:dn(t,e),Tn(e);break;case 13:dn(t,e),Tn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Yf=ze())),r&4&&nm(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(l=ft)||u,dn(t,e),ft=l):dn(t,e),Tn(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(B=e,u=e.child;u!==null;){for(f=B=u;B!==null;){switch(d=B,h=d.child,d.tag){case 0:case 11:case 14:case 15:Ws(4,d,d.return);break;case 1:Oi(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Fe(r,n,m)}}break;case 5:Oi(d,d.return);break;case 22:if(d.memoizedState!==null){im(f);continue}}h!==null?(h.return=d,B=h):im(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=xv("display",o))}catch(m){Fe(e,e.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Fe(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dn(t,e),Tn(e),r&4&&nm(e);break;case 21:break;default:dn(t,e),Tn(e)}}function Tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tS(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(eo(i,""),r.flags&=-33);var s=tm(e);kd(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tm(e);Ed(e,a,o);break;default:throw Error(A(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KE(e,t,n){B=e,iS(e)}function iS(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sa;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||ft;a=sa;var l=ft;if(sa=o,(ft=c)&&!l)for(B=i;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?sm(i):c!==null?(c.return=o,B=c):sm(i);for(;s!==null;)B=s,iS(s),s=s.sibling;B=i,sa=a,ft=l}rm(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):rm(e)}}function rm(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||sl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:hn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Vp(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&io(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}ft||t.flags&512&&Cd(t)}catch(d){Fe(t,t.return,d)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function im(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function sm(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(c){Fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){Fe(t,i,c)}}var s=t.return;try{Cd(t)}catch(c){Fe(t,s,c)}break;case 5:var o=t.return;try{Cd(t)}catch(c){Fe(t,o,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){B=null;break}var a=t.sibling;if(a!==null){a.return=t.return,B=a;break}B=t.return}}var GE=Math.ceil,fc=ir.ReactCurrentDispatcher,Gf=ir.ReactCurrentOwner,sn=ir.ReactCurrentBatchConfig,pe=0,et=null,We=null,st=0,Bt=0,Ni=Fr(0),Je=0,go=null,ei=0,ol=0,Jf=0,qs=null,Ot=null,Yf=0,Xi=1/0,Hn=null,hc=!1,Td=null,Er=null,oa=!1,gr=null,pc=0,Ks=0,Rd=null,Oa=-1,Na=0;function Et(){return pe&6?ze():Oa!==-1?Oa:Oa=ze()}function kr(e){return e.mode&1?pe&2&&st!==0?st&-st:OE.transition!==null?(Na===0&&(Na=Bv()),Na):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Jv(e.type)),e):1}function Sn(e,t,n,r){if(50<Ks)throw Ks=0,Rd=null,Error(A(185));No(e,n,r),(!(pe&2)||e!==et)&&(e===et&&(!(pe&2)&&(ol|=n),Je===4&&hr(e,st)),jt(e,r),n===1&&pe===0&&!(t.mode&1)&&(Xi=ze()+500,nl&&jr()))}function jt(e,t){var n=e.callbackNode;OC(e,t);var r=Qa(e,e===et?st:0);if(r===0)n!==null&&pp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pp(n),t===1)e.tag===0?PE(om.bind(null,e)):py(om.bind(null,e)),RE(function(){!(pe&6)&&jr()}),n=null;else{switch(zv(r)){case 1:n=Cf;break;case 4:n=$v;break;case 16:n=Ya;break;case 536870912:n=Vv;break;default:n=Ya}n=fS(n,sS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sS(e,t){if(Oa=-1,Na=0,pe&6)throw Error(A(327));var n=e.callbackNode;if(Ui()&&e.callbackNode!==n)return null;var r=Qa(e,e===et?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=mc(e,r);else{t=r;var i=pe;pe|=2;var s=aS();(et!==e||st!==t)&&(Hn=null,Xi=ze()+500,Gr(e,t));do try{QE();break}catch(a){oS(e,a)}while(!0);Lf(),fc.current=s,pe=i,We!==null?t=0:(et=null,st=0,t=Je)}if(t!==0){if(t===2&&(i=Zu(e),i!==0&&(r=i,t=_d(e,i))),t===1)throw n=go,Gr(e,0),hr(e,r),jt(e,ze()),n;if(t===6)hr(e,r);else{if(i=e.current.alternate,!(r&30)&&!JE(i)&&(t=mc(e,r),t===2&&(s=Zu(e),s!==0&&(r=s,t=_d(e,s))),t===1))throw n=go,Gr(e,0),hr(e,r),jt(e,ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Vr(e,Ot,Hn);break;case 3:if(hr(e,r),(r&130023424)===r&&(t=Yf+500-ze(),10<t)){if(Qa(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Et(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ad(Vr.bind(null,e,Ot,Hn),t);break}Vr(e,Ot,Hn);break;case 4:if(hr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-yn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GE(r/1960))-r,10<r){e.timeoutHandle=ad(Vr.bind(null,e,Ot,Hn),r);break}Vr(e,Ot,Hn);break;case 5:Vr(e,Ot,Hn);break;default:throw Error(A(329))}}}return jt(e,ze()),e.callbackNode===n?sS.bind(null,e):null}function _d(e,t){var n=qs;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=mc(e,t),e!==2&&(t=Ot,Ot=n,t!==null&&Id(t)),e}function Id(e){Ot===null?Ot=e:Ot.push.apply(Ot,e)}function JE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!bn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~Jf,t&=~ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yn(t),r=1<<n;e[n]=-1,t&=~r}}function om(e){if(pe&6)throw Error(A(327));Ui();var t=Qa(e,0);if(!(t&1))return jt(e,ze()),null;var n=mc(e,t);if(e.tag!==0&&n===2){var r=Zu(e);r!==0&&(t=r,n=_d(e,r))}if(n===1)throw n=go,Gr(e,0),hr(e,t),jt(e,ze()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,Ot,Hn),jt(e,ze()),null}function Qf(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(Xi=ze()+500,nl&&jr())}}function ti(e){gr!==null&&gr.tag===0&&!(pe&6)&&Ui();var t=pe;pe|=1;var n=sn.transition,r=ye;try{if(sn.transition=null,ye=1,e)return e()}finally{ye=r,sn.transition=n,pe=t,!(pe&6)&&jr()}}function Xf(){Bt=Ni.current,Ie(Ni)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TE(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Nf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nc();break;case 3:Yi(),Ie(Mt),Ie(mt),Vf();break;case 5:$f(r);break;case 4:Yi();break;case 13:Ie(De);break;case 19:Ie(De);break;case 10:Mf(r.type._context);break;case 22:case 23:Xf()}n=n.return}if(et=e,We=e=Tr(e.current,null),st=Bt=t,Je=0,go=null,Jf=ol=ei=0,Ot=qs=null,Wr!==null){for(t=0;t<Wr.length;t++)if(n=Wr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wr=null}return e}function oS(e,t){do{var n=We;try{if(Lf(),Ia.current=dc,uc){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uc=!1}if(Zr=0,Xe=Ke=Le=null,Hs=!1,ho=0,Gf.current=null,n===null||n.return===null){Je=1,go=t,We=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=st,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Kp(o);if(h!==null){h.flags&=-257,Gp(h,o,a,s,t),h.mode&1&&qp(s,l,t),t=h,c=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}else{if(!(t&1)){qp(s,l,t),Zf();break e}c=Error(A(426))}}else if(Oe&&a.mode&1){var v=Kp(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Gp(v,o,a,s,t),Af(Qi(c,a));break e}}s=c=Qi(c,a),Je!==4&&(Je=2),qs===null?qs=[s]:qs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=zy(s,c,t);$p(s,g);break e;case 1:a=c;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Er===null||!Er.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Hy(s,a,t);$p(s,b);break e}}s=s.return}while(s!==null)}lS(n)}catch(E){t=E,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function aS(){var e=fc.current;return fc.current=dc,e===null?dc:e}function Zf(){(Je===0||Je===3||Je===2)&&(Je=4),et===null||!(ei&268435455)&&!(ol&268435455)||hr(et,st)}function mc(e,t){var n=pe;pe|=2;var r=aS();(et!==e||st!==t)&&(Hn=null,Gr(e,t));do try{YE();break}catch(i){oS(e,i)}while(!0);if(Lf(),pe=n,fc.current=r,We!==null)throw Error(A(261));return et=null,st=0,Je}function YE(){for(;We!==null;)cS(We)}function QE(){for(;We!==null&&!CC();)cS(We)}function cS(e){var t=dS(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,t===null?lS(e):We=t,Gf.current=null}function lS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=HE(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,We=null;return}}else if(n=zE(n,t,Bt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Je===0&&(Je=5)}function Vr(e,t,n){var r=ye,i=sn.transition;try{sn.transition=null,ye=1,XE(e,t,n,r)}finally{sn.transition=i,ye=r}return null}function XE(e,t,n,r){do Ui();while(gr!==null);if(pe&6)throw Error(A(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(NC(e,s),e===et&&(We=et=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,fS(Ya,function(){return Ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var o=ye;ye=1;var a=pe;pe|=4,Gf.current=null,qE(e,n),rS(n,e),yE(sd),Xa=!!id,sd=id=null,e.current=n,KE(n),EC(),pe=a,ye=o,sn.transition=s}else e.current=n;if(oa&&(oa=!1,gr=e,pc=i),s=e.pendingLanes,s===0&&(Er=null),RC(n.stateNode),jt(e,ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hc)throw hc=!1,e=Td,Td=null,e;return pc&1&&e.tag!==0&&Ui(),s=e.pendingLanes,s&1?e===Rd?Ks++:(Ks=0,Rd=e):Ks=0,jr(),null}function Ui(){if(gr!==null){var e=zv(pc),t=sn.transition,n=ye;try{if(sn.transition=null,ye=16>e?16:e,gr===null)var r=!1;else{if(e=gr,gr=null,pc=0,pe&6)throw Error(A(331));var i=pe;for(pe|=4,B=e.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(B=l;B!==null;){var u=B;switch(u.tag){case 0:case 11:case 15:Ws(8,u,s)}var f=u.child;if(f!==null)f.return=u,B=f;else for(;B!==null;){u=B;var d=u.sibling,h=u.return;if(eS(u),u===l){B=null;break}if(d!==null){d.return=h,B=d;break}B=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ws(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,B=g;break e}B=s.return}}var y=e.current;for(B=y;B!==null;){o=B;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,B=S;else e:for(o=y;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sl(9,a)}}catch(E){Fe(a,a.return,E)}if(a===o){B=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,B=b;break e}B=a.return}}if(pe=i,jr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Qc,e)}catch{}r=!0}return r}finally{ye=n,sn.transition=t}}return!1}function am(e,t,n){t=Qi(n,t),t=zy(e,t,1),e=Cr(e,t,1),t=Et(),e!==null&&(No(e,1,t),jt(e,t))}function Fe(e,t,n){if(e.tag===3)am(e,e,n);else for(;t!==null;){if(t.tag===3){am(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){e=Qi(n,e),e=Hy(t,e,1),t=Cr(t,e,1),e=Et(),t!==null&&(No(t,1,e),jt(t,e));break}}t=t.return}}function ZE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Et(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(st&n)===n&&(Je===4||Je===3&&(st&130023424)===st&&500>ze()-Yf?Gr(e,0):Jf|=n),jt(e,t)}function uS(e,t){t===0&&(e.mode&1?(t=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):t=1);var n=Et();e=er(e,t),e!==null&&(No(e,t,n),jt(e,n))}function ek(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),uS(e,n)}function tk(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),uS(e,n)}var dS;dS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mt.current)Lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Lt=!1,BE(e,t,n);Lt=!!(e.flags&131072)}else Lt=!1,Oe&&t.flags&1048576&&my(t,sc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pa(e,t),e=t.pendingProps;var i=Ki(t,mt.current);ji(t,n),i=zf(null,t,r,e,i,n);var s=Hf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(s=!0,rc(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jf(t),i.updater=il,t.stateNode=i,i._reactInternals=t,pd(t,r,e,n),t=vd(null,t,r,!0,s,n)):(t.tag=0,Oe&&s&&Of(t),St(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pa(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=rk(r),e=hn(r,e),i){case 0:t=gd(null,t,r,e,n);break e;case 1:t=Qp(null,t,r,e,n);break e;case 11:t=Jp(null,t,r,e,n);break e;case 14:t=Yp(null,t,r,hn(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hn(r,i),gd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hn(r,i),Qp(e,t,r,i,n);case 3:e:{if(Gy(t),e===null)throw Error(A(387));r=t.pendingProps,s=t.memoizedState,i=s.element,wy(e,t),cc(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Qi(Error(A(423)),t),t=Xp(e,t,r,n,i);break e}else if(r!==i){i=Qi(Error(A(424)),t),t=Xp(e,t,r,n,i);break e}else for(Ht=wr(t.stateNode.containerInfo.firstChild),Wt=t,Oe=!0,mn=null,n=Sy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===i){t=tr(e,t,n);break e}St(e,t,r,n)}t=t.child}return t;case 5:return Cy(t),e===null&&dd(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,od(r,i)?o=null:s!==null&&od(r,s)&&(t.flags|=32),Ky(e,t),St(e,t,o,n),t.child;case 6:return e===null&&dd(t),null;case 13:return Jy(e,t,n);case 4:return Uf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ji(t,null,r,n):St(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hn(r,i),Jp(e,t,r,i,n);case 7:return St(e,t,t.pendingProps,n),t.child;case 8:return St(e,t,t.pendingProps.children,n),t.child;case 12:return St(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ke(oc,r._currentValue),r._currentValue=o,s!==null)if(bn(s.value,o)){if(s.children===i.children&&!Mt.current){t=tr(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Qn(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),fd(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fd(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}St(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ji(t,n),i=an(i),r=r(i),t.flags|=1,St(e,t,r,n),t.child;case 14:return r=t.type,i=hn(r,t.pendingProps),i=hn(r.type,i),Yp(e,t,r,i,n);case 15:return Wy(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hn(r,i),Pa(e,t),t.tag=1,Ft(r)?(e=!0,rc(t)):e=!1,ji(t,n),By(t,r,i),pd(t,r,i,n),vd(null,t,r,!0,e,n);case 19:return Yy(e,t,n);case 22:return qy(e,t,n)}throw Error(A(156,t.tag))};function fS(e,t){return Uv(e,t)}function nk(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,t,n,r){return new nk(e,t,n,r)}function eh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rk(e){if(typeof e=="function")return eh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sf)return 11;if(e===bf)return 14}return 2}function Tr(e,t){var n=e.alternate;return n===null?(n=rn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Aa(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")eh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ci:return Jr(n.children,i,s,t);case yf:o=8,i|=8;break;case ju:return e=rn(12,n,t,i|2),e.elementType=ju,e.lanes=s,e;case Uu:return e=rn(13,n,t,i),e.elementType=Uu,e.lanes=s,e;case $u:return e=rn(19,n,t,i),e.elementType=$u,e.lanes=s,e;case Cv:return al(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bv:o=10;break e;case wv:o=9;break e;case Sf:o=11;break e;case bf:o=14;break e;case lr:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=rn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Jr(e,t,n,r){return e=rn(7,e,r,t),e.lanes=n,e}function al(e,t,n,r){return e=rn(22,e,r,t),e.elementType=Cv,e.lanes=n,e.stateNode={isHidden:!1},e}function au(e,t,n){return e=rn(6,e,null,t),e.lanes=n,e}function cu(e,t,n){return t=rn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ik(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function th(e,t,n,r,i,s,o,a,c){return e=new ik(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=rn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jf(s),e}function sk(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hS(e){if(!e)return Pr;e=e._reactInternals;e:{if(li(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Ft(n))return hy(e,n,t)}return t}function pS(e,t,n,r,i,s,o,a,c){return e=th(n,r,!0,e,i,s,o,a,c),e.context=hS(null),n=e.current,r=Et(),i=kr(n),s=Qn(r,i),s.callback=t??null,Cr(n,s,i),e.current.lanes=i,No(e,i,r),jt(e,r),e}function cl(e,t,n,r){var i=t.current,s=Et(),o=kr(i);return n=hS(n),t.context===null?t.context=n:t.pendingContext=n,t=Qn(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cr(i,t,o),e!==null&&(Sn(e,i,o,s),_a(e,i,o)),o}function gc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nh(e,t){cm(e,t),(e=e.alternate)&&cm(e,t)}function ok(){return null}var mS=typeof reportError=="function"?reportError:function(e){console.error(e)};function rh(e){this._internalRoot=e}ll.prototype.render=rh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));cl(e,t,null,null)};ll.prototype.unmount=rh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ti(function(){cl(null,e,null,null)}),t[Zn]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=qv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fr.length&&t!==0&&t<fr[n].priority;n++);fr.splice(n,0,e),n===0&&Gv(e)}};function ih(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lm(){}function ak(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=gc(o);s.call(l)}}var o=pS(t,r,e,0,null,!1,!1,"",lm);return e._reactRootContainer=o,e[Zn]=o.current,ao(e.nodeType===8?e.parentNode:e),ti(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=gc(c);a.call(l)}}var c=th(e,0,!1,null,null,!1,!1,"",lm);return e._reactRootContainer=c,e[Zn]=c.current,ao(e.nodeType===8?e.parentNode:e),ti(function(){cl(t,c,n,r)}),c}function dl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=gc(o);a.call(c)}}cl(t,o,e,i)}else o=ak(n,t,e,i,r);return gc(o)}Hv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ds(t.pendingLanes);n!==0&&(Ef(t,n|1),jt(t,ze()),!(pe&6)&&(Xi=ze()+500,jr()))}break;case 13:ti(function(){var r=er(e,1);if(r!==null){var i=Et();Sn(r,e,1,i)}}),nh(e,1)}};kf=function(e){if(e.tag===13){var t=er(e,134217728);if(t!==null){var n=Et();Sn(t,e,134217728,n)}nh(e,134217728)}};Wv=function(e){if(e.tag===13){var t=kr(e),n=er(e,t);if(n!==null){var r=Et();Sn(n,e,t,r)}nh(e,t)}};qv=function(){return ye};Kv=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Yu=function(e,t,n){switch(t){case"input":if(zu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=tl(r);if(!i)throw Error(A(90));kv(r),zu(r,i)}}}break;case"textarea":Rv(e,n);break;case"select":t=n.value,t!=null&&Di(e,!!n.multiple,t,!1)}};Av=Qf;Dv=ti;var ck={usingClientEntryPoint:!1,Events:[Do,Ri,tl,Ov,Nv,Qf]},Ts={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lk={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fv(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||ok,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Qc=aa.inject(lk),Nn=aa}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;Qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ih(t))throw Error(A(200));return sk(e,t,null,n)};Qt.createRoot=function(e,t){if(!ih(e))throw Error(A(299));var n=!1,r="",i=mS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=th(e,1,!1,null,null,n,!1,r,i),e[Zn]=t.current,ao(e.nodeType===8?e.parentNode:e),new rh(t)};Qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=Fv(t),e=e===null?null:e.stateNode,e};Qt.flushSync=function(e){return ti(e)};Qt.hydrate=function(e,t,n){if(!ul(t))throw Error(A(200));return dl(null,e,t,!0,n)};Qt.hydrateRoot=function(e,t,n){if(!ih(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=pS(t,null,e,1,n??null,i,!1,s,o),e[Zn]=t.current,ao(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ll(t)};Qt.render=function(e,t,n){if(!ul(t))throw Error(A(200));return dl(null,e,t,!1,n)};Qt.unmountComponentAtNode=function(e){if(!ul(e))throw Error(A(40));return e._reactRootContainer?(ti(function(){dl(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1};Qt.unstable_batchedUpdates=Qf;Qt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ul(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return dl(e,t,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(e){console.error(e)}}gS(),gv.exports=Qt;var sh=gv.exports,vS,um=sh;vS=um.createRoot,um.hydrateRoot;const uk="modulepreload",dk=function(e){return"/"+e},dm={},fk=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=dk(c),c in dm)return;dm[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":uk,l||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};let yS=!0,SS=!0;function Da(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function ui(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==t)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function hk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(yS=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function pk(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(SS=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function bS(){if(typeof window=="object"){if(yS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function oh(e,t){SS&&console.warn(e+" is deprecated, please use "+t+" instead.")}function mk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Da(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Da(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Da(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function fm(e){return Object.prototype.toString.call(e)==="[object Object]"}function wS(e){return fm(e)?Object.keys(e).reduce(function(t,n){const r=fm(e[n]),i=r?wS(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function xd(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?xd(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{xd(e,e.get(i),n)})}))}function hm(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(a=>{a.type===r&&a.trackId===o.id&&xd(e,a,i)})}),i}const pm=bS;function CS(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const f=function(d,h){return d?d+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let d={};typeof u.ideal=="number"?(d[f("min",l)]=u.ideal,c.optional.push(d),d={},d[f("max",l)]=u.ideal,c.optional.push(d)):(d[f("",l)]=u.ideal,c.optional.push(d))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[f("",l)]=u.exact):["min","max"].forEach(d=>{u[d]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[f(d,l)]=u[d])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,f,d){f in u&&!(d in u)&&(u[d]=u[f],delete u[f])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let f;if(l.exact==="environment"||l.ideal==="environment"?f=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(d=>{d=d.filter(p=>p.kind==="videoinput");let h=d.find(p=>f.some(m=>p.label.toLowerCase().includes(m)));return!h&&d.length&&f.includes("back")&&(h=d[d.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),pm("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return pm("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,f=>{l&&l(s(f))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function gk(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}}}function ES(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function kS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ui(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function TS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function RS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const o=function(c){const l={};return c.result().forEach(f=>{const d={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(h=>{d[h]=f.stat(h)}),l[d.id]=d}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(o(l)))};return t.apply(this,[c,r])}return new Promise((c,l)=>{t.apply(this,[function(u){c(a(o(u)))},l])}).then(i,s)}}function _S(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>hm(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),ui(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>hm(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function IS(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(f=>f.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function xS(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return IS(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(f=>this._reverseStreams[f.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(f=>{if(this.getSenders().find(h=>h.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const f=new e.MediaStream(u.getTracks());this._streams[u.id]=f,this._reverseStreams[f.id]=u,u=f}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[f.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[f.id]=m,this._reverseStreams[m.id]=f,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let f=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(d=>{const h=l._reverseStreams[d],p=l._streams[h.id];f=f.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:f})}function o(l,u){let f=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(d=>{const h=l._reverseStreams[d],p=l._streams[h.id];f=f.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:f})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],f={[l](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);d[0].apply(null,[m])},p=>{d[1]&&d[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[l]=f[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(d=this._streams[h])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Pd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function PS(e,t){ui(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const mm=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:PS,shimAddTrackRemoveTrack:xS,shimAddTrackRemoveTrackWithNative:IS,shimGetDisplayMedia:gk,shimGetSendersWithDtmf:TS,shimGetStats:RS,shimGetUserMedia:CS,shimMediaStream:ES,shimOnTrack:kS,shimPeerConnection:Pd,shimSenderReceiverGetStats:_S},Symbol.toStringTag,{value:"Module"}));function OS(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){oh("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function vk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function NS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Od(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,f)=>{c.set(f,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function AS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function DS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ui(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function LS(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){oh("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function MS(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function FS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function jS(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function US(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function $S(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const gm=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:FS,shimCreateAnswer:$S,shimCreateOffer:US,shimGetDisplayMedia:vk,shimGetParameters:jS,shimGetUserMedia:OS,shimOnTrack:NS,shimPeerConnection:Od,shimRTCDataChannel:MS,shimReceiverGetStats:DS,shimRemoveStream:LS,shimSenderGetStats:AS},Symbol.toStringTag,{value:"Module"}));function VS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function BS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function zS(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(l,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[f]);return u?(d.then(l,u),Promise.resolve()):d},t.createAnswer=function(l,u){const f=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[f]);return u?(d.then(l,u),Promise.resolve()):d};let a=function(c,l,u){const f=i.apply(this,[c]);return u?(f.then(l,u),Promise.resolve()):f};t.setLocalDescription=a,a=function(c,l,u){const f=s.apply(this,[c]);return u?(f.then(l,u),Promise.resolve()):f},t.setRemoteDescription=a,a=function(c,l,u){const f=o.apply(this,[c]);return u?(f.then(l,u),Promise.resolve()):f},t.addIceCandidate=a}function HS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(WS(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function WS(e){return e&&e.video!==void 0?Object.assign({},e,{video:wS(e.video)}):e}function qS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(oh("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function KS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function GS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function JS(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const vm=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:JS,shimCallbacksAPI:zS,shimConstraints:WS,shimCreateOfferLegacy:GS,shimGetUserMedia:HS,shimLocalStreamsAPI:VS,shimRTCIceServerUrls:qS,shimRemoteStreamsAPI:BS,shimTrackEventTransceiver:KS},Symbol.toStringTag,{value:"Module"}));var YS={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),f=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=f.length?t.parseFmtp(f[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=t.writeRtpMap(o),i+=t.writeFmtp(o),i+=t.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=t.writeExtmap(o)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(d=>t.parseSsrcMedia(d)).filter(d=>d.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(d=>d.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(d=>{if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(d.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let f=t.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(d=>{d.maxBitrate=f})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=t.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=t.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(YS);var QS=YS.exports;const $i=iv(QS),yk=rv({__proto__:null,default:$i},[QS]);function La(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=$i.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,ui(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Nd(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||ui(e,"icecandidate",t=>{if(t.candidate){const n=$i.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ma(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=$i.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=$i.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=$i.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let f;l===0&&u===0?f=Number.POSITIVE_INFINITY:l===0||u===0?f=Math.max(l,u):f=Math.min(l,u);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return f}}),this._sctp=d}return o.apply(this,arguments)}}function Fa(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},ui(e,"datachannel",r=>(t(r.channel,r.target),r))}function Ad(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Dd(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function ja(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ua(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const Sk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Dd,shimAddIceCandidateNullOrEmpty:ja,shimConnectionState:Ad,shimMaxMessageSize:Ma,shimParameterlessSetLocalDescription:Ua,shimRTCIceCandidate:La,shimRTCIceCandidateRelayProtocol:Nd,shimSendThrowTypeError:Fa},Symbol.toStringTag,{value:"Module"}));function bk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=bS,r=mk(e),i={browserDetails:r,commonShim:Sk,extractVersion:Da,disableLog:hk,disableWarnings:pk,sdp:yk};switch(r.browser){case"chrome":if(!mm||!Pd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=mm,ja(e,r),Ua(e),CS(e,r),ES(e),Pd(e,r),kS(e),xS(e,r),TS(e),RS(e),_S(e),PS(e,r),La(e),Nd(e),Ad(e),Ma(e,r),Fa(e),Dd(e,r);break;case"firefox":if(!gm||!Od||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=gm,ja(e,r),Ua(e),OS(e,r),Od(e,r),NS(e),LS(e),AS(e),DS(e),MS(e),FS(e),jS(e),US(e),$S(e),La(e),Ad(e),Ma(e,r),Fa(e);break;case"safari":if(!vm||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=vm,ja(e,r),Ua(e),qS(e),GS(e),zS(e),VS(e),BS(e),KS(e),HS(e),JS(e),La(e),Nd(e),Ma(e,r),Fa(e),Dd(e,r);break;default:n("Unsupported browser!");break}return i}bk({window:typeof window>"u"?void 0:window});function ls(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function vc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}let Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),fl=[];for(let e=0;e<Gn.length;e++)fl[Gn[e].charCodeAt(0)]=e;fl[45]=Gn.indexOf("+");fl[95]=Gn.indexOf("/");function wk(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,o=0;for(let a=0;a<e.length;a++){if(s=fl[e.charCodeAt(a)],s===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function Ck(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=Gn[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=Gn[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=Gn[i|r>>6],t+=Gn[r&63],n=0;break}return n&&(t+=Gn[i],t+="=",n==1&&(t+="=")),t}var yc;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,s,o)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:s,data:o})},e.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of e.list(r))i.tag(s,o).raw(a)},e.list=(n,r)=>{if(t(n)){let i=n[e.symbol];return r?i.filter(s=>s.no==r):i}return[]},e.last=(n,r)=>e.list(n,r).slice(-1)[0];const t=n=>n&&Array.isArray(n[e.symbol])})(yc||(yc={}));function Ek(e,t){return Object.assign(Object.assign({},e),t)}var Ve;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Ve||(Ve={}));function kk(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function lu(e,t,n){for(let s=0;s<28;s=s+7){const o=e>>>s,a=!(!(o>>>7)&&t==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=t>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(t>>>31&1)}}const $a=65536*65536;function XS(e){let t=e[0]=="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const c=Number(e.slice(o,a));i*=n,r=r*n+c,r>=$a&&(i=i+(r/$a|0),r=r%$a)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function Ld(e,t){if(t>>>0<=2097151)return""+($a*t+(e>>>0));let n=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,i=t>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,c=1e7;s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c);function l(u,f){let d=u?String(u):"";return f?"0000000".slice(d.length)+d:d}return l(a,0)+l(o,a)+l(s,1)}function ym(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function Tk(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}let we;function Rk(){const e=new DataView(new ArrayBuffer(8));we=globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}Rk();function ZS(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const eb=/^-?[0-9]+$/,Sc=4294967296,ca=2147483648;class tb{constructor(t,n){this.lo=t|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*Sc+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class pt extends tb{static from(t){if(we)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=we.C(t);case"number":if(t===0)return this.ZERO;t=we.C(t);case"bigint":if(!t)return this.ZERO;if(t<we.UMIN)throw new Error("signed value for ulong");if(t>we.UMAX)throw new Error("ulong too large");return we.V.setBigUint64(0,t,!0),new pt(we.V.getInt32(0,!0),we.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!eb.test(t))throw new Error("string is no integer");let[n,r,i]=XS(t);if(n)throw new Error("signed value for ulong");return new pt(r,i);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new pt(t,t/Sc)}throw new Error("unknown value "+typeof t)}toString(){return we?this.toBigInt().toString():Ld(this.lo,this.hi)}toBigInt(){return ZS(we),we.V.setInt32(0,this.lo,!0),we.V.setInt32(4,this.hi,!0),we.V.getBigUint64(0,!0)}}pt.ZERO=new pt(0,0);class Te extends tb{static from(t){if(we)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=we.C(t);case"number":if(t===0)return this.ZERO;t=we.C(t);case"bigint":if(!t)return this.ZERO;if(t<we.MIN)throw new Error("signed long too small");if(t>we.MAX)throw new Error("signed long too large");return we.V.setBigInt64(0,t,!0),new Te(we.V.getInt32(0,!0),we.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!eb.test(t))throw new Error("string is no integer");let[n,r,i]=XS(t);if(n){if(i>ca||i==ca&&r!=0)throw new Error("signed long too small")}else if(i>=ca)throw new Error("signed long too large");let s=new Te(r,i);return n?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new Te(t,t/Sc):new Te(-t,-t/Sc).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&ca)!==0}negate(){let t=~this.hi,n=this.lo;return n?n=~n+1:t+=1,new Te(n,t)}toString(){if(we)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+Ld(t.lo,t.hi)}return Ld(this.lo,this.hi)}toBigInt(){return ZS(we),we.V.setInt32(0,this.lo,!0),we.V.setInt32(4,this.hi,!0),we.V.getBigInt64(0,!0)}}Te.ZERO=new Te(0,0);const Sm={readUnknownField:!0,readerFactory:e=>new Ik(e)};function _k(e){return e?Object.assign(Object.assign({},Sm),e):Sm}class Ik{constructor(t,n){this.varint64=kk,this.uint32=Tk,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t){let n=this.pos;switch(t){case Ve.Varint:for(;this.buf[this.pos++]&128;);break;case Ve.Bit64:this.pos+=4;case Ve.Bit32:this.pos+=4;break;case Ve.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Ve.StartGroup:let i;for(;(i=this.tag()[1])!==Ve.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new Te(...this.varint64())}uint64(){return new pt(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,new Te(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new pt(this.sfixed32(),this.sfixed32())}sfixed64(){return new Te(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function me(e,t){if(!e)throw new Error(t)}const xk=34028234663852886e22,Pk=-34028234663852886e22,Ok=4294967295,Nk=2147483647,Ak=-2147483648;function Gs(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Nk||e<Ak)throw new Error("invalid int 32: "+e)}function bc(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Ok||e<0)throw new Error("invalid uint 32: "+e)}function ah(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>xk||e<Pk))throw new Error("invalid float 32: "+e)}const bm={writeUnknownFields:!0,writerFactory:()=>new Lk};function Dk(e){return e?Object.assign(Object.assign({},bm),e):bm}class Lk{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(bc(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Gs(t),ym(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){ah(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){bc(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Gs(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Gs(t),t=(t<<1^t>>31)>>>0,ym(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Te.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=pt.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=Te.from(t);return lu(n.lo,n.hi,this.buf),this}sint64(t){let n=Te.from(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return lu(i,s,this.buf),this}uint64(t){let n=pt.from(t);return lu(n.lo,n.hi,this.buf),this}}const wm={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Cm={ignoreUnknownFields:!1};function Mk(e){return e?Object.assign(Object.assign({},Cm),e):Cm}function Fk(e){return e?Object.assign(Object.assign({},wm),e):wm}function jk(e,t){var n,r;let i=Object.assign(Object.assign({},e),t);return i.typeRegistry=[...(n=e==null?void 0:e.typeRegistry)!==null&&n!==void 0?n:[],...(r=t==null?void 0:t.typeRegistry)!==null&&r!==void 0?r:[]],i}const nb=Symbol.for("protobuf-ts/message-type");function wc(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);i=="_"?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var O;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(O||(O={}));var Dn;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})(Dn||(Dn={}));var Cc;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})(Cc||(Cc={}));function Uk(e){var t,n,r,i;return e.localName=(t=e.localName)!==null&&t!==void 0?t:wc(e.name),e.jsonName=(n=e.jsonName)!==null&&n!==void 0?n:wc(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:Cc.NO,e.opt=(i=e.opt)!==null&&i!==void 0?i:e.repeat||e.oneof?!1:e.kind=="message",e}function $k(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}class Vk{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;const t=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),t.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&t.push(i.localName);break;case"message":i.repeat&&t.push(i.localName);break;case"map":t.push(i.localName);break}this.data={req:t,known:n,oneofs:Object.values(r)}}is(t,n,r=!1){if(n<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let i=Object.keys(t),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(const o of s.oneofs){const a=t[o];if(!$k(a))return!1;if(a.oneofKind===void 0)continue;const c=this.fields.find(l=>l.localName===a.oneofKind);if(!c||!this.field(a[a.oneofKind],c,r,n))return!1}for(const o of this.fields)if(o.oneof===void 0&&!this.field(t[o.localName],o,r,n))return!1;return!0}field(t,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return t===void 0?n.opt:s?this.scalars(t,n.T,i,n.L):this.scalar(t,n.T,n.L);case"enum":return t===void 0?n.opt:s?this.scalars(t,O.INT32,i):this.scalar(t,O.INT32);case"message":return t===void 0?!0:s?this.messages(t,n.T(),r,i):this.message(t,n.T(),r,i);case"map":if(typeof t!="object"||t===null)return!1;if(i<2)return!0;if(!this.mapKeys(t,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(t),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(t),O.INT32,i);case"message":return this.messages(Object.values(t),n.V.T(),r,i)}break}return!0}message(t,n,r,i){return r?n.isAssignable(t,i):n.is(t,i)}messages(t,n,r,i){if(!Array.isArray(t))return!1;if(i<2)return!0;if(r){for(let s=0;s<t.length&&s<i;s++)if(!n.isAssignable(t[s],i-1))return!1}else for(let s=0;s<t.length&&s<i;s++)if(!n.is(t[s],i-1))return!1;return!0}scalar(t,n,r){let i=typeof t;switch(n){case O.UINT64:case O.FIXED64:case O.INT64:case O.SFIXED64:case O.SINT64:switch(r){case Dn.BIGINT:return i=="bigint";case Dn.NUMBER:return i=="number"&&!isNaN(t);default:return i=="string"}case O.BOOL:return i=="boolean";case O.STRING:return i=="string";case O.BYTES:return t instanceof Uint8Array;case O.DOUBLE:case O.FLOAT:return i=="number"&&!isNaN(t);default:return i=="number"&&Number.isInteger(t)}}scalars(t,n,r,i){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],n,i))return!1}return!0}mapKeys(t,n,r){let i=Object.keys(t);switch(n){case O.INT32:case O.FIXED32:case O.SFIXED32:case O.SINT32:case O.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case O.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,Dn.STRING)}}}function gn(e,t){switch(t){case Dn.BIGINT:return e.toBigInt();case Dn.NUMBER:return e.toNumber();default:return e.toString()}}class Bk{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};const n=(t=this.info.fields)!==null&&t!==void 0?t:[];for(const r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,n,r){if(!t){let i=ls(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(t,n,r){this.prepare();const i=[];for(const[s,o]of Object.entries(t)){const a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const c=a.localName;let l;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),l=n[a.oneof]={oneofKind:c}}else l=n;if(a.kind=="map"){if(o===null)continue;this.assert(vc(o),a.name,o);const u=l[c];for(const[f,d]of Object.entries(o)){this.assert(d!==null,a.name+" map value",null);let h;switch(a.V.kind){case"message":h=a.V.T().internalJsonRead(d,r);break;case"enum":if(h=this.enum(a.V.T(),d,a.name,r.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(d,a.V.T,a.V.L,a.name);break}this.assert(h!==void 0,a.name+" map value",d);let p=f;a.K==O.BOOL&&(p=p=="true"?!0:p=="false"?!1:p),p=this.scalar(p,a.K,Dn.STRING,a.name).toString(),u[p]=h}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);const u=l[c];for(const f of o){this.assert(f!==null,a.name,null);let d;switch(a.kind){case"message":d=a.T().internalJsonRead(f,r);break;case"enum":if(d=this.enum(a.T(),f,a.name,r.ignoreUnknownFields),d===!1)continue;break;case"scalar":d=this.scalar(f,a.T,a.L,a.name);break}this.assert(d!==void 0,a.name,o),u.push(d)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}l[c]=a.T().internalJsonRead(o,r,l[c]);break;case"enum":let u=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(u===!1)continue;l[c]=u;break;case"scalar":l[c]=this.scalar(o,a.T,a.L,a.name);break}}}enum(t,n,r,i){if(t[0]=="google.protobuf.NullValue"&&me(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return me(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;t[2]&&n.substring(0,t[2].length)===t[2]&&(s=n.substring(t[2].length));let o=t[1][s];return typeof o>"u"&&i?!1:(me(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${n}".`),o)}me(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(t,n,r,i){let s;try{switch(n){case O.DOUBLE:case O.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let o=Number(t);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==O.FLOAT&&ah(o),o;case O.INT32:case O.FIXED32:case O.SFIXED32:case O.SINT32:case O.UINT32:if(t===null)return 0;let a;if(typeof t=="number"?a=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":a=Number(t)),a===void 0)break;return n==O.UINT32?bc(a):Gs(a),a;case O.INT64:case O.SFIXED64:case O.SINT64:if(t===null)return gn(Te.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return gn(Te.from(t),r);case O.FIXED64:case O.UINT64:if(t===null)return gn(pt.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return gn(pt.from(t),r);case O.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case O.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(c){c="invalid UTF8";break}return t;case O.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return wk(t)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),t)}}class zk{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}write(t,n){const r={},i=t;for(const s of this.fields){if(!s.oneof){let l=this.field(s,i[s.localName],n);l!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=l);continue}const o=i[s.oneof];if(o.oneofKind!==s.localName)continue;const a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n;let c=this.field(s,o[s.localName],a);me(c!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=c}return r}field(t,n,r){let i;if(t.kind=="map"){me(typeof n=="object"&&n!==null);const s={};switch(t.V.kind){case"scalar":for(const[c,l]of Object.entries(n)){const u=this.scalar(t.V.T,l,t.name,!1,!0);me(u!==void 0),s[c.toString()]=u}break;case"message":const o=t.V.T();for(const[c,l]of Object.entries(n)){const u=this.message(o,l,t.name,r);me(u!==void 0),s[c.toString()]=u}break;case"enum":const a=t.V.T();for(const[c,l]of Object.entries(n)){me(l===void 0||typeof l=="number");const u=this.enum(a,l,t.name,!1,!0,r.enumAsInteger);me(u!==void 0),s[c.toString()]=u}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(t.repeat){me(Array.isArray(n));const s=[];switch(t.kind){case"scalar":for(let c=0;c<n.length;c++){const l=this.scalar(t.T,n[c],t.name,t.opt,!0);me(l!==void 0),s.push(l)}break;case"enum":const o=t.T();for(let c=0;c<n.length;c++){me(n[c]===void 0||typeof n[c]=="number");const l=this.enum(o,n[c],t.name,t.opt,!0,r.enumAsInteger);me(l!==void 0),s.push(l)}break;case"message":const a=t.T();for(let c=0;c<n.length;c++){const l=this.message(a,n[c],t.name,r);me(l!==void 0),s.push(l)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(t.kind){case"scalar":i=this.scalar(t.T,n,t.name,t.opt,r.emitDefaultValues);break;case"enum":i=this.enum(t.T(),n,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(t.T(),n,t.name,r);break}return i}enum(t,n,r,i,s,o){if(t[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){me(i);return}if(!(n===0&&!s&&!i))return me(typeof n=="number"),me(Number.isInteger(n)),o||!t[1].hasOwnProperty(n)?n:t[2]?t[2]+t[1][n]:t[1][n]}message(t,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:t.internalJsonWrite(n,i)}scalar(t,n,r,i,s){if(n===void 0){me(i);return}const o=s||i;switch(t){case O.INT32:case O.SFIXED32:case O.SINT32:return n===0?o?0:void 0:(Gs(n),n);case O.FIXED32:case O.UINT32:return n===0?o?0:void 0:(bc(n),n);case O.FLOAT:ah(n);case O.DOUBLE:return n===0?o?0:void 0:(me(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case O.STRING:return n===""?o?"":void 0:(me(typeof n=="string"),n);case O.BOOL:return n===!1?o?!1:void 0:(me(typeof n=="boolean"),n);case O.UINT64:case O.FIXED64:me(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=pt.from(n);return a.isZero()&&!o?void 0:a.toString();case O.INT64:case O.SFIXED64:case O.SINT64:me(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let c=Te.from(n);return c.isZero()&&!o?void 0:c.toString();case O.BYTES:return me(n instanceof Uint8Array),n.byteLength?Ck(n):o?"":void 0}}}function Md(e,t=Dn.STRING){switch(e){case O.BOOL:return!1;case O.UINT64:case O.FIXED64:return gn(pt.ZERO,t);case O.INT64:case O.SFIXED64:case O.SINT64:return gn(Te.ZERO,t);case O.DOUBLE:case O.FLOAT:return 0;case O.BYTES:return new Uint8Array(0);case O.STRING:return"";default:return 0}}class Hk{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const n=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(t,n,r,i){this.prepare();const s=i===void 0?t.len:t.pos+i;for(;t.pos<s;){const[o,a]=t.tag(),c=this.fieldNoToField.get(o);if(!c){let d=r.readUnknownField;if(d=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let h=t.skip(a);d!==!1&&(d===!0?yc.onRead:d)(this.info.typeName,n,o,a,h);continue}let l=n,u=c.repeat,f=c.localName;switch(c.oneof&&(l=l[c.oneof],l.oneofKind!==f&&(l=n[c.oneof]={oneofKind:f})),c.kind){case"scalar":case"enum":let d=c.kind=="enum"?O.INT32:c.T,h=c.kind=="scalar"?c.L:void 0;if(u){let v=l[f];if(a==Ve.LengthDelimited&&d!=O.STRING&&d!=O.BYTES){let g=t.uint32()+t.pos;for(;t.pos<g;)v.push(this.scalar(t,d,h))}else v.push(this.scalar(t,d,h))}else l[f]=this.scalar(t,d,h);break;case"message":if(u){let v=l[f],g=c.T().internalBinaryRead(t,t.uint32(),r);v.push(g)}else l[f]=c.T().internalBinaryRead(t,t.uint32(),r,l[f]);break;case"map":let[p,m]=this.mapEntry(c,t,r);l[f][p]=m;break}}}mapEntry(t,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[c,l]=n.tag();switch(c){case 1:t.K==O.BOOL?o=n.bool().toString():o=this.scalar(n,t.K,Dn.STRING);break;case 2:switch(t.V.kind){case"scalar":a=this.scalar(n,t.V.T,t.V.L);break;case"enum":a=n.int32();break;case"message":a=t.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${c} (wire type ${l}) in map entry for ${this.info.typeName}#${t.name}`)}}if(o===void 0){let c=Md(t.K);o=t.K==O.BOOL?c.toString():c}if(a===void 0)switch(t.V.kind){case"scalar":a=Md(t.V.T,t.V.L);break;case"enum":a=0;break;case"message":a=t.V.T().create();break}return[o,a]}scalar(t,n,r){switch(n){case O.INT32:return t.int32();case O.STRING:return t.string();case O.BOOL:return t.bool();case O.DOUBLE:return t.double();case O.FLOAT:return t.float();case O.INT64:return gn(t.int64(),r);case O.UINT64:return gn(t.uint64(),r);case O.FIXED64:return gn(t.fixed64(),r);case O.FIXED32:return t.fixed32();case O.BYTES:return t.bytes();case O.UINT32:return t.uint32();case O.SFIXED32:return t.sfixed32();case O.SFIXED64:return gn(t.sfixed64(),r);case O.SINT32:return t.sint32();case O.SINT64:return gn(t.sint64(),r)}}}class Wk{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((n,r)=>n.no-r.no)}}write(t,n,r){this.prepare();for(const s of this.fields){let o,a,c=s.repeat,l=s.localName;if(s.oneof){const u=t[s.oneof];if(u.oneofKind!==l)continue;o=u[l],a=!0}else o=t[l],a=!1;switch(s.kind){case"scalar":case"enum":let u=s.kind=="enum"?O.INT32:s.T;if(c)if(me(Array.isArray(o)),c==Cc.PACKED)this.packed(n,u,s.no,o);else for(const f of o)this.scalar(n,u,s.no,f,!0);else o===void 0?me(s.opt):this.scalar(n,u,s.no,o,a||s.opt);break;case"message":if(c){me(Array.isArray(o));for(const f of o)this.message(n,r,s.T(),s.no,f)}else this.message(n,r,s.T(),s.no,o);break;case"map":me(typeof o=="object"&&o!==null);for(const[f,d]of Object.entries(o))this.mapEntry(n,r,s,f,d);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?yc.onWrite:i)(this.info.typeName,t,n)}mapEntry(t,n,r,i,s){t.tag(r.no,Ve.LengthDelimited),t.fork();let o=i;switch(r.K){case O.INT32:case O.FIXED32:case O.UINT32:case O.SFIXED32:case O.SINT32:o=Number.parseInt(i);break;case O.BOOL:me(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(t,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,O.INT32,2,s,!0);break;case"message":this.message(t,n,r.V.T(),2,s);break}t.join()}message(t,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(i,Ve.LengthDelimited).fork(),n),t.join())}scalar(t,n,r,i,s){let[o,a,c]=this.scalarInfo(n,i);(!c||s)&&(t.tag(r,o),t[a](i))}packed(t,n,r,i){if(!i.length)return;me(n!==O.BYTES&&n!==O.STRING),t.tag(r,Ve.LengthDelimited),t.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)t[s](i[o]);t.join()}scalarInfo(t,n){let r=Ve.Varint,i,s=n===void 0,o=n===0;switch(t){case O.INT32:i="int32";break;case O.STRING:o=s||!n.length,r=Ve.LengthDelimited,i="string";break;case O.BOOL:o=n===!1,i="bool";break;case O.UINT32:i="uint32";break;case O.DOUBLE:r=Ve.Bit64,i="double";break;case O.FLOAT:r=Ve.Bit32,i="float";break;case O.INT64:o=s||Te.from(n).isZero(),i="int64";break;case O.UINT64:o=s||pt.from(n).isZero(),i="uint64";break;case O.FIXED64:o=s||pt.from(n).isZero(),r=Ve.Bit64,i="fixed64";break;case O.BYTES:o=s||!n.byteLength,r=Ve.LengthDelimited,i="bytes";break;case O.FIXED32:r=Ve.Bit32,i="fixed32";break;case O.SFIXED32:r=Ve.Bit32,i="sfixed32";break;case O.SFIXED64:o=s||Te.from(n).isZero(),r=Ve.Bit64,i="sfixed64";break;case O.SINT32:i="sint32";break;case O.SINT64:o=s||Te.from(n).isZero(),i="sint64";break}return[r,i,s||o]}}function qk(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},nb,{value:e});for(let n of e.fields){let r=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[r]=[];else switch(n.kind){case"scalar":t[r]=Md(n.T,n.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function uu(e,t,n){let r,i=n,s;for(let o of e.fields){let a=o.localName;if(o.oneof){const c=i[o.oneof];if((c==null?void 0:c.oneofKind)==null)continue;if(r=c[a],s=t[o.oneof],s.oneofKind=c.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=t,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let l=0;l<r.length;l++)s[a][l]=r[l];else s[a]=r;break;case"message":let c=o.T();if(o.repeat)for(let l=0;l<r.length;l++)s[a][l]=c.create(r[l]);else s[a]===void 0?s[a]=c.create(r):c.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let l=o.V.T();for(let u of Object.keys(r))s[a][u]=l.create(r[u]);break}break}}}function Kk(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let i=r.localName,s=r.oneof?t[r.oneof][i]:t[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?O.INT32:r.T;if(!(r.repeat?Em(a,s,o):rb(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?km(r.V.T(),la(s),la(o)):Em(r.V.kind=="enum"?O.INT32:r.V.T,la(s),la(o))))return!1;break;case"message":let c=r.T();if(!(r.repeat?km(c,s,o):c.equals(s,o)))return!1;break}}return!0}const la=Object.values;function rb(e,t,n){if(t===n)return!0;if(e!==O.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function Em(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!rb(e,t[r],n[r]))return!1;return!0}function km(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}const Gk=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class U{constructor(t,n,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=n.map(Uk),this.options=r??{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},Gk),{[nb]:{value:this}})),this.refTypeCheck=new Vk(this),this.refJsonReader=new Bk(this),this.refJsonWriter=new zk(this),this.refBinReader=new Hk(this),this.refBinWriter=new Wk(this)}create(t){let n=qk(this);return t!==void 0&&uu(this,n,t),n}clone(t){let n=this.create();return uu(this,n,t),n}equals(t,n){return Kk(this,t,n)}is(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!1)}isAssignable(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!0)}mergePartial(t,n){uu(this,t,n)}fromBinary(t,n){let r=_k(n);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,n){return this.internalJsonRead(t,Mk(n))}fromJsonString(t,n){let r=JSON.parse(t);return this.fromJson(r,n)}toJson(t,n){return this.internalJsonWrite(t,Fk(n))}toJsonString(t,n){var r;let i=this.toJson(t,n);return JSON.stringify(i,null,(r=n==null?void 0:n.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,n){let r=Dk(n);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,n,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let i=r??this.create();return this.refJsonReader.read(t,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${ls(t)}.`)}internalJsonWrite(t,n){return this.refJsonWriter.write(t,n)}internalBinaryWrite(t,n,r){return this.refBinWriter.write(t,n,r),n}internalBinaryRead(t,n,r,i){let s=i??this.create();return this.refBinReader.read(t,s,r,n),s}}function Jk(e,t){var n,r,i;let s=e;return s.service=t,s.localName=(n=s.localName)!==null&&n!==void 0?n:wc(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=(r=s.options)!==null&&r!==void 0?r:{},s.idempotency=(i=s.idempotency)!==null&&i!==void 0?i:void 0,s}class Yk{constructor(t,n,r){this.typeName=t,this.methods=n.map(i=>Jk(i,this)),this.options=r??{}}}class xt extends Error{constructor(t,n="UNKNOWN",r){super(t),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=n,this.meta=r??{}}toString(){const t=[this.name+": "+this.message];this.code&&(t.push(""),t.push("Code: "+this.code)),this.serviceName&&this.methodName&&t.push("Method: "+this.serviceName+"/"+this.methodName);let n=Object.entries(this.meta);if(n.length){t.push(""),t.push("Meta:");for(let[r,i]of n)t.push(`  ${r}: ${i}`)}return t.join(`
`)}}function Qk(e,t){if(!t)return e;let n={};ua(e,n),ua(t,n);for(let r of Object.keys(t)){let i=t[r];switch(r){case"jsonOptions":n.jsonOptions=jk(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=Ek(e.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},ua(e.meta,n.meta),ua(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(i):i.concat();break}}return n}function ua(e,t){if(!e)return;let n=t;for(let[r,i]of Object.entries(e))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}var fn;(function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED"})(fn||(fn={}));class da{constructor(t=!0){this._state=fn.PENDING,this._promise=new Promise((n,r)=>{this._resolve=n,this._reject=r}),t&&this._promise.catch(n=>{})}get state(){return this._state}get promise(){return this._promise}resolve(t){if(this.state!==fn.PENDING)throw new Error(`cannot resolve ${fn[this.state].toLowerCase()}`);this._resolve(t),this._state=fn.RESOLVED}reject(t){if(this.state!==fn.PENDING)throw new Error(`cannot reject ${fn[this.state].toLowerCase()}`);this._reject(t),this._state=fn.REJECTED}resolvePending(t){this._state===fn.PENDING&&this.resolve(t)}rejectPending(t){this._state===fn.PENDING&&this.reject(t)}}var Xk=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})};class Zk{constructor(t,n,r,i,s,o,a){this.method=t,this.requestHeaders=n,this.request=r,this.headers=i,this.response=s,this.status=o,this.trailers=a}then(t,n){return this.promiseFinished().then(r=>t?Promise.resolve(t(r)):r,r=>n?Promise.resolve(n(r)):Promise.reject(r))}promiseFinished(){return Xk(this,void 0,void 0,function*(){let[t,n,r,i]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:t,response:n,status:r,trailers:i}})}}function Bn(e,t,n,r,i){var s;{let o=(a,c,l)=>t.unary(a,c,l);for(const a of((s=r.interceptors)!==null&&s!==void 0?s:[]).filter(c=>c.interceptUnary).reverse()){const c=o;o=(l,u,f)=>a.interceptUnary(c,l,u,f)}return o(n,i,r)}}function ib(e,t){return function(){return e.apply(t,arguments)}}const{toString:eT}=Object.prototype,{getPrototypeOf:ch}=Object,hl=(e=>t=>{const n=eT.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cn=e=>(e=e.toLowerCase(),t=>hl(t)===e),pl=e=>t=>typeof t===e,{isArray:us}=Array,vo=pl("undefined");function tT(e){return e!==null&&!vo(e)&&e.constructor!==null&&!vo(e.constructor)&&qt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const sb=Cn("ArrayBuffer");function nT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sb(e.buffer),t}const rT=pl("string"),qt=pl("function"),ob=pl("number"),ml=e=>e!==null&&typeof e=="object",iT=e=>e===!0||e===!1,Va=e=>{if(hl(e)!=="object")return!1;const t=ch(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sT=Cn("Date"),oT=Cn("File"),aT=Cn("Blob"),cT=Cn("FileList"),lT=e=>ml(e)&&qt(e.pipe),uT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qt(e.append)&&((t=hl(e))==="formdata"||t==="object"&&qt(e.toString)&&e.toString()==="[object FormData]"))},dT=Cn("URLSearchParams"),[fT,hT,pT,mT]=["ReadableStream","Request","Response","Headers"].map(Cn),gT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mo(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),us(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function ab(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cb=e=>!vo(e)&&e!==Kr;function Fd(){const{caseless:e}=cb(this)&&this||{},t={},n=(r,i)=>{const s=e&&ab(t,i)||i;Va(t[s])&&Va(r)?t[s]=Fd(t[s],r):Va(r)?t[s]=Fd({},r):us(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Mo(arguments[r],n);return t}const vT=(e,t,n,{allOwnKeys:r}={})=>(Mo(t,(i,s)=>{n&&qt(i)?e[s]=ib(i,n):e[s]=i},{allOwnKeys:r}),e),yT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ST=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},bT=(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&ch(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wT=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},CT=e=>{if(!e)return null;if(us(e))return e;let t=e.length;if(!ob(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},ET=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ch(Uint8Array)),kT=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},TT=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},RT=Cn("HTMLFormElement"),_T=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Tm=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),IT=Cn("RegExp"),lb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Mo(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},xT=e=>{lb(e,(t,n)=>{if(qt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(qt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},PT=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return us(e)?r(e):r(String(e).split(t)),n},OT=()=>{},NT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,du="abcdefghijklmnopqrstuvwxyz",Rm="0123456789",ub={DIGIT:Rm,ALPHA:du,ALPHA_DIGIT:du+du.toUpperCase()+Rm},AT=(e=16,t=ub.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function DT(e){return!!(e&&qt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const LT=e=>{const t=new Array(10),n=(r,i)=>{if(ml(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=us(r)?[]:{};return Mo(r,(o,a)=>{const c=n(o,i+1);!vo(c)&&(s[a]=c)}),t[i]=void 0,s}}return r};return n(e,0)},MT=Cn("AsyncFunction"),FT=e=>e&&(ml(e)||qt(e))&&qt(e.then)&&qt(e.catch),db=((e,t)=>e?setImmediate:t?((n,r)=>(Kr.addEventListener("message",({source:i,data:s})=>{i===Kr&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Kr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qt(Kr.postMessage)),jT=typeof queueMicrotask<"u"?queueMicrotask.bind(Kr):typeof process<"u"&&process.nextTick||db,I={isArray:us,isArrayBuffer:sb,isBuffer:tT,isFormData:uT,isArrayBufferView:nT,isString:rT,isNumber:ob,isBoolean:iT,isObject:ml,isPlainObject:Va,isReadableStream:fT,isRequest:hT,isResponse:pT,isHeaders:mT,isUndefined:vo,isDate:sT,isFile:oT,isBlob:aT,isRegExp:IT,isFunction:qt,isStream:lT,isURLSearchParams:dT,isTypedArray:ET,isFileList:cT,forEach:Mo,merge:Fd,extend:vT,trim:gT,stripBOM:yT,inherits:ST,toFlatObject:bT,kindOf:hl,kindOfTest:Cn,endsWith:wT,toArray:CT,forEachEntry:kT,matchAll:TT,isHTMLForm:RT,hasOwnProperty:Tm,hasOwnProp:Tm,reduceDescriptors:lb,freezeMethods:xT,toObjectSet:PT,toCamelCase:_T,noop:OT,toFiniteNumber:NT,findKey:ab,global:Kr,isContextDefined:cb,ALPHABET:ub,generateString:AT,isSpecCompliantForm:DT,toJSONObject:LT,isAsyncFn:MT,isThenable:FT,setImmediate:db,asap:jT};function ie(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const fb=ie.prototype,hb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{hb[e]={value:e}});Object.defineProperties(ie,hb);Object.defineProperty(fb,"isAxiosError",{value:!0});ie.from=(e,t,n,r,i,s)=>{const o=Object.create(fb);return I.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ie.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const UT=null;function jd(e){return I.isPlainObject(e)||I.isArray(e)}function pb(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function _m(e,t,n){return e?e.concat(t).map(function(i,s){return i=pb(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function $T(e){return I.isArray(e)&&!e.some(jd)}const VT=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function gl(e,t,n){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!I.isUndefined(v[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(I.isDate(p))return p.toISOString();if(!c&&I.isBlob(p))throw new ie("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(p)||I.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,v){let g=p;if(p&&!v&&typeof p=="object"){if(I.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(I.isArray(p)&&$T(p)||(I.isFileList(p)||I.endsWith(m,"[]"))&&(g=I.toArray(p)))return m=pb(m),g.forEach(function(S,b){!(I.isUndefined(S)||S===null)&&t.append(o===!0?_m([m],b,s):o===null?m:m+"[]",l(S))}),!1}return jd(p)?!0:(t.append(_m(v,m,s),l(p)),!1)}const f=[],d=Object.assign(VT,{defaultVisitor:u,convertValue:l,isVisitable:jd});function h(p,m){if(!I.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),I.forEach(p,function(g,y){(!(I.isUndefined(g)||g===null)&&i.call(t,g,I.isString(y)?y.trim():y,m,d))===!0&&h(g,m?m.concat(y):[y])}),f.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Im(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function lh(e,t){this._pairs=[],e&&gl(e,this,t)}const mb=lh.prototype;mb.append=function(t,n){this._pairs.push([t,n])};mb.toString=function(t){const n=t?function(r){return t.call(this,r,Im)}:Im;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function BT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gb(e,t,n){if(!t)return e;const r=n&&n.encode||BT,i=n&&n.serialize;let s;if(i?s=i(t,n):s=I.isURLSearchParams(t)?t.toString():new lh(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class xm{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(r){r!==null&&t(r)})}}const vb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zT=typeof URLSearchParams<"u"?URLSearchParams:lh,HT=typeof FormData<"u"?FormData:null,WT=typeof Blob<"u"?Blob:null,qT={isBrowser:!0,classes:{URLSearchParams:zT,FormData:HT,Blob:WT},protocols:["http","https","file","blob","url","data"]},uh=typeof window<"u"&&typeof document<"u",Ud=typeof navigator=="object"&&navigator||void 0,KT=uh&&(!Ud||["ReactNative","NativeScript","NS"].indexOf(Ud.product)<0),GT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",JT=uh&&window.location.href||"http://localhost",YT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:uh,hasStandardBrowserEnv:KT,hasStandardBrowserWebWorkerEnv:GT,navigator:Ud,origin:JT},Symbol.toStringTag,{value:"Module"})),Ut={...YT,...qT};function QT(e,t){return gl(e,new Ut.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ut.isNode&&I.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function XT(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ZT(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function yb(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&I.isArray(i)?i.length:o,c?(I.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!I.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&I.isArray(i[o])&&(i[o]=ZT(i[o])),!a)}if(I.isFormData(e)&&I.isFunction(e.entries)){const n={};return I.forEachEntry(e,(r,i)=>{t(XT(r),i,n,0)}),n}return null}function e1(e,t,n){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const Fo={transitional:vb,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=I.isObject(t);if(s&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(yb(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return QT(t,this.formSerializer).toString();if((a=I.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return gl(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),e1(t)):t}],transformResponse:[function(t){const n=this.transitional||Fo.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?ie.from(a,ie.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{Fo.headers[e]={}});const t1=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n1=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&t1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Pm=Symbol("internals");function Rs(e){return e&&String(e).trim().toLowerCase()}function Ba(e){return e===!1||e==null?e:I.isArray(e)?e.map(Ba):String(e)}function r1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const i1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fu(e,t,n,r,i){if(I.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!I.isString(t)){if(I.isString(r))return t.indexOf(r)!==-1;if(I.isRegExp(r))return r.test(t)}}function s1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function o1(e,t){const n=I.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let $t=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,c,l){const u=Rs(c);if(!u)throw new Error("header name must be a non-empty string");const f=I.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Ba(a))}const o=(a,c)=>I.forEach(a,(l,u)=>s(l,u,c));if(I.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(I.isString(t)&&(t=t.trim())&&!i1(t))o(n1(t),n);else if(I.isHeaders(t))for(const[a,c]of t.entries())s(c,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Rs(t),t){const r=I.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return r1(i);if(I.isFunction(n))return n.call(this,i,r);if(I.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Rs(t),t){const r=I.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||fu(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Rs(o),o){const a=I.findKey(r,o);a&&(!n||fu(r,r[a],a,n))&&(delete r[a],i=!0)}}return I.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||fu(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return I.forEach(this,(i,s)=>{const o=I.findKey(r,s);if(o){n[o]=Ba(i),delete n[s];return}const a=t?s1(s):String(s).trim();a!==s&&delete n[s],n[a]=Ba(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return I.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&I.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Pm]=this[Pm]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Rs(o);r[a]||(o1(i,o),r[a]=!0)}return I.isArray(t)?t.forEach(s):s(t),this}};$t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors($t.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});I.freezeMethods($t);function hu(e,t){const n=this||Fo,r=t||n,i=$t.from(r.headers);let s=r.data;return I.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Sb(e){return!!(e&&e.__CANCEL__)}function ds(e,t,n){ie.call(this,e??"canceled",ie.ERR_CANCELED,t,n),this.name="CanceledError"}I.inherits(ds,ie,{__CANCEL__:!0});function bb(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function a1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function c1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),n[i]=c,r[i]=l;let f=s,d=0;for(;f!==i;)d+=n[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const h=u&&l-u;return h?Math.round(d*1e3/h):void 0}}function l1(e,t){let n=0,r=1e3/t,i,s;const o=(l,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-n;f>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const Ec=(e,t,n=3)=>{let r=0;const i=c1(50,250);return l1(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},Om=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Nm=e=>(...t)=>I.asap(()=>e(...t)),u1=Ut.hasStandardBrowserEnv?function(){const t=Ut.navigator&&/(msie|trident)/i.test(Ut.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=I.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),d1=Ut.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];I.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),I.isString(r)&&o.push("path="+r),I.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function h1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wb(e,t){return e&&!f1(t)?h1(e,t):t}const Am=e=>e instanceof $t?{...e}:e;function ni(e,t){t=t||{};const n={};function r(l,u,f){return I.isPlainObject(l)&&I.isPlainObject(u)?I.merge.call({caseless:f},l,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function i(l,u,f){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l,f)}else return r(l,u,f)}function s(l,u){if(!I.isUndefined(u))return r(void 0,u)}function o(l,u){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,f){if(f in t)return r(l,u);if(f in e)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u)=>i(Am(l),Am(u),!0)};return I.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=c[u]||i,d=f(e[u],t[u],u);I.isUndefined(d)&&f!==a||(n[u]=d)}),n}const Cb=e=>{const t=ni({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=$t.from(o),t.url=gb(wb(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(I.isFormData(n)){if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(Ut.hasStandardBrowserEnv&&(r&&I.isFunction(r)&&(r=r(t)),r||r!==!1&&u1(t.url))){const l=i&&s&&d1.read(s);l&&o.set(i,l)}return t},p1=typeof XMLHttpRequest<"u",m1=p1&&function(e){return new Promise(function(n,r){const i=Cb(e);let s=i.data;const o=$t.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,f,d,h,p;function m(){h&&h(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function g(){if(!v)return;const S=$t.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};bb(function(T){n(T),m()},function(T){r(T),m()},E),v=null}"onloadend"in v?v.onloadend=g:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(g)},v.onabort=function(){v&&(r(new ie("Request aborted",ie.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new ie("Network Error",ie.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||vb;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),r(new ie(b,E.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&I.forEach(o.toJSON(),function(b,E){v.setRequestHeader(E,b)}),I.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),l&&([d,p]=Ec(l,!0),v.addEventListener("progress",d)),c&&v.upload&&([f,h]=Ec(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=S=>{v&&(r(!S||S.type?new ds(null,e,v):S),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const y=a1(i.url);if(y&&Ut.protocols.indexOf(y)===-1){r(new ie("Unsupported protocol "+y+":",ie.ERR_BAD_REQUEST,e));return}v.send(s||null)})},g1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof ie?u:new ds(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,s(new ie(`timeout ${t} of ms exceeded`,ie.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),e=null)};e.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>I.asap(a),c}},v1=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},y1=async function*(e,t){for await(const n of S1(e))yield*v1(n,t)},S1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Dm=(e,t,n,r)=>{const i=y1(e,t);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let f=u.byteLength;if(n){let d=s+=f;n(d)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},vl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Eb=vl&&typeof ReadableStream=="function",b1=vl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),kb=(e,...t)=>{try{return!!e(...t)}catch{return!1}},w1=Eb&&kb(()=>{let e=!1;const t=new Request(Ut.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Lm=64*1024,$d=Eb&&kb(()=>I.isReadableStream(new Response("").body)),kc={stream:$d&&(e=>e.body)};vl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!kc[t]&&(kc[t]=I.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ie(`Response type '${t}' is not supported`,ie.ERR_NOT_SUPPORT,r)})})})(new Response);const C1=async e=>{if(e==null)return 0;if(I.isBlob(e))return e.size;if(I.isSpecCompliantForm(e))return(await new Request(Ut.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(I.isArrayBufferView(e)||I.isArrayBuffer(e))return e.byteLength;if(I.isURLSearchParams(e)&&(e=e+""),I.isString(e))return(await b1(e)).byteLength},E1=async(e,t)=>{const n=I.toFiniteNumber(e.getContentLength());return n??C1(t)},k1=vl&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:d}=Cb(e);l=l?(l+"").toLowerCase():"text";let h=g1([i,s&&s.toAbortSignal()],o),p;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let v;try{if(c&&w1&&n!=="get"&&n!=="head"&&(v=await E1(u,r))!==0){let E=new Request(t,{method:"POST",body:r,duplex:"half"}),k;if(I.isFormData(r)&&(k=E.headers.get("content-type"))&&u.setContentType(k),E.body){const[T,x]=Om(v,Ec(Nm(c)));r=Dm(E.body,Lm,T,x)}}I.isString(f)||(f=f?"include":"omit");const g="credentials"in Request.prototype;p=new Request(t,{...d,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:g?f:void 0});let y=await fetch(p);const S=$d&&(l==="stream"||l==="response");if($d&&(a||S&&m)){const E={};["status","statusText","headers"].forEach(j=>{E[j]=y[j]});const k=I.toFiniteNumber(y.headers.get("content-length")),[T,x]=a&&Om(k,Ec(Nm(a),!0))||[];y=new Response(Dm(y.body,Lm,T,()=>{x&&x(),m&&m()}),E)}l=l||"text";let b=await kc[I.findKey(kc,l)||"text"](y,e);return!S&&m&&m(),await new Promise((E,k)=>{bb(E,k,{data:b,headers:$t.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:p})})}catch(g){throw m&&m(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,e,p),{cause:g.cause||g}):ie.from(g,g&&g.code,e,p)}}),Vd={http:UT,xhr:m1,fetch:k1};I.forEach(Vd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Mm=e=>`- ${e}`,T1=e=>I.isFunction(e)||e===null||e===!1,Tb={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!T1(n)&&(r=Vd[(o=String(n)).toLowerCase()],r===void 0))throw new ie(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Mm).join(`
`):" "+Mm(s[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Vd};function pu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ds(null,e)}function Fm(e){return pu(e),e.headers=$t.from(e.headers),e.data=hu.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Tb.getAdapter(e.adapter||Fo.adapter)(e).then(function(r){return pu(e),r.data=hu.call(e,e.transformResponse,r),r.headers=$t.from(r.headers),r},function(r){return Sb(r)||(pu(e),r&&r.response&&(r.response.data=hu.call(e,e.transformResponse,r.response),r.response.headers=$t.from(r.response.headers))),Promise.reject(r)})}const Rb="1.7.7",dh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{dh[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const jm={};dh.transitional=function(t,n,r){function i(s,o){return"[Axios v"+Rb+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new ie(i(o," has been removed"+(n?" in "+n:"")),ie.ERR_DEPRECATED);return n&&!jm[o]&&(jm[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function R1(e,t,n){if(typeof e!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new ie("option "+s+" must be "+c,ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ie("Unknown option "+s,ie.ERR_BAD_OPTION)}}const Bd={assertOptions:R1,validators:dh},cr=Bd.validators;let Yr=class{constructor(t){this.defaults=t,this.interceptors={request:new xm,response:new xm}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ni(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Bd.assertOptions(r,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),i!=null&&(I.isFunction(i)?n.paramsSerializer={serialize:i}:Bd.assertOptions(i,{encode:cr.function,serialize:cr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&I.merge(s.common,s[n.method]);s&&I.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=$t.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let u,f=0,d;if(!c){const p=[Fm.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),d=p.length,u=Promise.resolve(n);f<d;)u=u.then(p[f++],p[f++]);return u}d=a.length;let h=n;for(f=0;f<d;){const p=a[f++],m=a[f++];try{h=p(h)}catch(v){m.call(this,v);break}}try{u=Fm.call(this,h)}catch(p){return Promise.reject(p)}for(f=0,d=l.length;f<d;)u=u.then(l[f++],l[f++]);return u}getUri(t){t=ni(this.defaults,t);const n=wb(t.baseURL,t.url);return gb(n,t.params,t.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(t){Yr.prototype[t]=function(n,r){return this.request(ni(r||{},{method:t,url:n,data:(r||{}).data}))}});I.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(ni(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Yr.prototype[t]=n(),Yr.prototype[t+"Form"]=n(!0)});let _1=class _b{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new ds(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new _b(function(i){t=i}),cancel:t}}};function I1(e){return function(n){return e.apply(null,n)}}function x1(e){return I.isObject(e)&&e.isAxiosError===!0}const zd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zd).forEach(([e,t])=>{zd[t]=e});function Ib(e){const t=new Yr(e),n=ib(Yr.prototype.request,t);return I.extend(n,Yr.prototype,t,{allOwnKeys:!0}),I.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Ib(ni(e,i))},n}const Ne=Ib(Fo);Ne.Axios=Yr;Ne.CanceledError=ds;Ne.CancelToken=_1;Ne.isCancel=Sb;Ne.VERSION=Rb;Ne.toFormData=gl;Ne.AxiosError=ie;Ne.Cancel=Ne.CanceledError;Ne.all=function(t){return Promise.all(t)};Ne.spread=I1;Ne.isAxiosError=x1;Ne.mergeConfig=ni;Ne.AxiosHeaders=$t;Ne.formToJSON=e=>yb(I.isHTMLForm(e)?new FormData(e):e);Ne.getAdapter=Tb.getAdapter;Ne.HttpStatusCode=zd;Ne.default=Ne;const{Axios:_M,AxiosError:IM,CanceledError:xM,isCancel:PM,CancelToken:OM,VERSION:NM,all:AM,Cancel:DM,isAxiosError:LM,spread:MM,toFormData:FM,AxiosHeaders:P1,HttpStatusCode:jM,formToJSON:UM,getAdapter:$M,mergeConfig:VM}=Ne;var Pe;(function(e){e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss"})(Pe||(Pe={}));function O1(e,t,n){if(n)for(let[r,i]of Object.entries(n))if(typeof i=="string")e.append(r,i);else for(let s of i)e.append(r,s);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function N1(e){if(!vc(e)||typeof e.code!="string"||typeof e.msg!="string")return new xt("cannot read twirp error response",Pe[Pe.internal]);let t={};if(vc(e.meta))for(let[n,r]of Object.entries(e.meta))typeof r=="string"&&(t[n]=r);return new xt(e.msg,e.code,t)}function A1(e){let t={};return e.forEach((n,r)=>{r.toLowerCase()!=="content-type"&&r.toLowerCase()!=="content-length"&&(t.hasOwnProperty(r)?t[r].push(n):t[r]=n)}),t}class D1{constructor(t){this.defaultOptions=t}mergeOptions(t){return Qk(this.defaultOptions,t)}unary(t,n,r){var i,s,o;let a=r,c=this.makeUrl(t,a),l=(i=a.fetchInit)!==null&&i!==void 0?i:{},u=a.sendJson?t.I.toJsonString(n,a.jsonOptions):t.I.toBinary(n,a.binaryOptions),f=new da,d=new da,h=new da,p=new da;return globalThis.fetch(c,Object.assign(Object.assign({},l),{method:"POST",headers:O1(new globalThis.Headers,!!a.sendJson,a.meta),body:u,signal:(s=r.abort)!==null&&s!==void 0?s:null})).then(m=>{f.resolve(A1(m.headers));let v;try{v=m.type}catch{}switch(v){case"error":case"opaque":case"opaqueredirect":throw new xt(`fetch response type ${m.type}`,Pe[Pe.unknown])}return m.ok?a.sendJson?m.json().then(g=>t.O.fromJson(g,a.jsonOptions),()=>{throw new xt("unable to read response body as json",Pe[Pe.dataloss])}):m.arrayBuffer().then(g=>t.O.fromBinary(new Uint8Array(g),a.binaryOptions),()=>{throw new xt("unable to read response body",Pe[Pe.dataloss])}):m.json().then(g=>{throw N1(g)},()=>{throw new xt("received HTTP "+m.status+", unable to read response body as json",Pe[Pe.internal])})},m=>{throw m instanceof Error&&m.name==="AbortError"?new xt(m.message,Pe[Pe.cancelled]):new xt(m instanceof Error?m.message:m)}).then(m=>{d.resolve(m),h.resolve({code:"OK",detail:""}),p.resolve({})}).catch(m=>{let v=m instanceof xt?m:new xt(m instanceof Error?m.message:m,Pe[Pe.internal]);v.methodName=t.name,v.serviceName=t.service.typeName,f.rejectPending(v),d.rejectPending(v),h.rejectPending(v),p.rejectPending(v)}),new Zk(t,(o=a.meta)!==null&&o!==void 0?o:{},n,f.promise,d.promise,h.promise,p.promise)}makeUrl(t,n){let r=n.baseUrl;r.endsWith("/")&&(r=r.substring(0,r.length-1));let i=t.name;return n.useProtoMethodName!==!0&&(i=wc(i),i=i.substring(0,1).toUpperCase()+i.substring(1)),`${r}/${t.service.typeName}/${i}`}clientStreaming(t){const n=new xt("Client streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}duplex(t){const n=new xt("Duplex streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}serverStreaming(t){const n=new xt("Server streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}}var Hd={exports:{}};(function(e,t){(function(n,r){var i="1.0.39",s="",o="?",a="function",c="undefined",l="object",u="string",f="major",d="model",h="name",p="type",m="vendor",v="version",g="architecture",y="console",S="mobile",b="tablet",E="smarttv",k="wearable",T="embedded",x=500,j="Amazon",P="Apple",V="ASUS",N="BlackBerry",D="Browser",W="Chrome",$="Edge",L="Firefox",q="Google",R="Huawei",_="LG",F="Microsoft",J="Motorola",oe="Opera",He="Samsung",Y="Sharp",te="Sony",z="Xiaomi",X="Zebra",de="Facebook",Ue="Chromium OS",Ae="Mac OS",at=" Browser",_t=function(se,ae){var G={};for(var ue in se)ae[ue]&&ae[ue].length%2===0?G[ue]=ae[ue].concat(se[ue]):G[ue]=se[ue];return G},Zt=function(se){for(var ae={},G=0;G<se.length;G++)ae[se[G].toUpperCase()]=se[G];return ae},un=function(se,ae){return typeof se===u?$e(ae).indexOf($e(se))!==-1:!1},$e=function(se){return se.toLowerCase()},kn=function(se){return typeof se===u?se.replace(/[^\d\.]/g,s).split(".")[0]:r},Vn=function(se,ae){if(typeof se===u)return se=se.replace(/^\s\s*/,s),typeof ae===c?se:se.substring(0,x)},or=function(se,ae){for(var G=0,ue,It,Vt,fe,K,yt;G<ae.length&&!K;){var gs=ae[G],vs=ae[G+1];for(ue=It=0;ue<gs.length&&!K&&gs[ue];)if(K=gs[ue++].exec(se),K)for(Vt=0;Vt<vs.length;Vt++)yt=K[++It],fe=vs[Vt],typeof fe===l&&fe.length>0?fe.length===2?typeof fe[1]==a?this[fe[0]]=fe[1].call(this,yt):this[fe[0]]=fe[1]:fe.length===3?typeof fe[1]===a&&!(fe[1].exec&&fe[1].test)?this[fe[0]]=yt?fe[1].call(this,yt,fe[2]):r:this[fe[0]]=yt?yt.replace(fe[1],fe[2]):r:fe.length===4&&(this[fe[0]]=yt?fe[3].call(this,yt.replace(fe[1],fe[2])):r):this[fe]=yt||r;G+=2}},ne=function(se,ae){for(var G in ae)if(typeof ae[G]===l&&ae[G].length>0){for(var ue=0;ue<ae[G].length;ue++)if(un(ae[G][ue],se))return G===o?r:G}else if(un(ae[G],se))return G===o?r:G;return ae.hasOwnProperty("*")?ae["*"]:se},Re={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},be={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,v],[/opios[\/ ]+([\w\.]+)/i],[v,[h,oe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[h,oe+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[h,oe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[h,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[h,"Smart Lenovo "+D]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+D],v],[/\bfocus\/([\w\.]+)/i],[v,[h,L+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[h,oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[h,oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[h,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[v,[h,L]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360"+at]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+at],v],[/samsungbrowser\/([\w\.]+)/i],[v,[h,He+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],v],[/metasr[\/ ]?([\d\.]+)/i],[v,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,de],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[h,W+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,W+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[h,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[v,ne,Re]],[/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],v],[/(wolvic)\/([\w\.]+)/i],[h,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[h,L+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,$e]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,s,$e]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,$e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[m,He],[p,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[m,He],[p,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[m,P],[p,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[m,P],[p,b]],[/(macintosh);/i],[d,[m,P]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[m,Y],[p,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[m,R],[p,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[m,R],[p,S]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[m,z],[p,S]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[m,z],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[m,"OPPO"],[p,S]],[/\b(opd2\d{3}a?) bui/i],[d,[m,"OPPO"],[p,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[m,"Vivo"],[p,S]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[m,"Realme"],[p,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[m,J],[p,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[m,J],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[m,_],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[m,_],[p,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[m,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[m,"Nokia"],[p,S]],[/(pixel c)\b/i],[d,[m,q],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[m,q],[p,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[m,te],[p,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[m,te],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[m,"OnePlus"],[p,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[m,j],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[m,j],[p,S]],[/(playbook);[-\w\),; ]+(rim)/i],[d,m,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[m,N],[p,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[m,V],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[m,V],[p,S]],[/(nexus 9)/i],[d,[m,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[d,/_/g," "],[p,S]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[m,"TCL"],[p,b]],[/(itel) ((\w+))/i],[[m,$e],d,[p,ne,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[m,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[m,"Meizu"],[p,S]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[m,"Ulefone"],[p,S]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[m,"Nothing"],[p,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,d,[p,S]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,d,[p,b]],[/(surface duo)/i],[d,[m,F],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[m,"Fairphone"],[p,S]],[/(u304aa)/i],[d,[m,"AT&T"],[p,S]],[/\bsie-(\w*)/i],[d,[m,"Siemens"],[p,S]],[/\b(rct\w+) b/i],[d,[m,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[m,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[m,"Verizon"],[p,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[m,"Barnes & Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[d,[m,"NuVision"],[p,b]],[/\b(k88) b/i],[d,[m,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[d,[m,"ZTE"],[p,S]],[/\b(gen\d{3}) b.+49h/i],[d,[m,"Swiss"],[p,S]],[/\b(zur\d{3}) b/i],[d,[m,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[d,[m,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],d,[p,b]],[/\b(ns-?\w{0,9}) b/i],[d,[m,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[m,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],d,[p,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],d,[p,S]],[/\b(ph-1) /i],[d,[m,"Essential"],[p,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[m,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[d,[m,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[d,[m,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[d,[m,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[m,d,[p,S]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[m,F],[p,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[m,X],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[m,X],[p,S]],[/smart-tv.+(samsung)/i],[m,[p,E]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[m,He],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,_],[p,E]],[/(apple) ?tv/i],[m,[d,P+" TV"],[p,E]],[/crkey/i],[[d,W+"cast"],[m,q],[p,E]],[/droid.+aft(\w+)( bui|\))/i],[d,[m,j],[p,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[m,Y],[p,E]],[/(bravia[\w ]+)( bui|\))/i],[d,[m,te],[p,E]],[/(mitv-\w{5}) bui/i],[d,[m,z],[p,E]],[/Hbbtv.*(technisat) (.*);/i],[m,d,[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,Vn],[d,Vn],[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,d,[p,y]],[/droid.+; (shield) bui/i],[d,[m,"Nvidia"],[p,y]],[/(playstation [345portablevi]+)/i],[d,[m,te],[p,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[m,F],[p,y]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[m,He],[p,k]],[/((pebble))app/i],[m,d,[p,k]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[m,P],[p,k]],[/droid.+; (glass) \d/i],[d,[m,q],[p,k]],[/droid.+; (wt63?0{2,3})\)/i],[d,[m,X],[p,k]],[/(quest( \d| pro)?)/i],[d,[m,de],[p,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,T]],[/(aeobc)\b/i],[d,[m,j],[p,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,S]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[h,$+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[v,ne,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,ne,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,Ae],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,v],[/\(bb(10);/i],[v,[h,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[h,L+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[h,W+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Ue],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,v],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,v]]},xe=function(se,ae){if(typeof se===l&&(ae=se,se=r),!(this instanceof xe))return new xe(se,ae).getResult();var G=typeof n!==c&&n.navigator?n.navigator:r,ue=se||(G&&G.userAgent?G.userAgent:s),It=G&&G.userAgentData?G.userAgentData:r,Vt=ae?_t(be,ae):be,fe=G&&G.userAgent==ue;return this.getBrowser=function(){var K={};return K[h]=r,K[v]=r,or.call(K,ue,Vt.browser),K[f]=kn(K[v]),fe&&G&&G.brave&&typeof G.brave.isBrave==a&&(K[h]="Brave"),K},this.getCPU=function(){var K={};return K[g]=r,or.call(K,ue,Vt.cpu),K},this.getDevice=function(){var K={};return K[m]=r,K[d]=r,K[p]=r,or.call(K,ue,Vt.device),fe&&!K[p]&&It&&It.mobile&&(K[p]=S),fe&&K[d]=="Macintosh"&&G&&typeof G.standalone!==c&&G.maxTouchPoints&&G.maxTouchPoints>2&&(K[d]="iPad",K[p]=b),K},this.getEngine=function(){var K={};return K[h]=r,K[v]=r,or.call(K,ue,Vt.engine),K},this.getOS=function(){var K={};return K[h]=r,K[v]=r,or.call(K,ue,Vt.os),fe&&!K[h]&&It&&It.platform&&It.platform!="Unknown"&&(K[h]=It.platform.replace(/chrome os/i,Ue).replace(/macos/i,Ae)),K},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ue},this.setUA=function(K){return ue=typeof K===u&&K.length>x?Vn(K,x):K,this},this.setUA(ue),this};xe.VERSION=i,xe.BROWSER=Zt([h,v,f]),xe.CPU=Zt([g]),xe.DEVICE=Zt([d,m,p,y,S,E,b,k,T]),xe.ENGINE=xe.OS=Zt([h,v]),e.exports&&(t=e.exports=xe),t.UAParser=xe;var ge=typeof n!==c&&(n.jQuery||n.Zepto);if(ge&&!ge.ua){var vt=new xe;ge.ua=vt.getResult(),ge.ua.get=function(){return vt.getUA()},ge.ua.set=function(se){vt.setUA(se);var ae=vt.getResult();for(var G in ae)ge.ua[G]=ae[G]}}})(typeof window=="object"?window:Mw)})(Hd,Hd.exports);var L1=Hd.exports,Wd=function(e,t){return Wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Wd(e,t)};function jn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Wd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function M1(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(f){o(f)}}function c(u){try{l(r.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function xb(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Zi(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ri(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function es(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Vi(e){return this instanceof Vi?(this.v=e,this):new Vi(e)}function F1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(v,g){s.push([h,m,v,g])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Vi?Promise.resolve(h.value.v).then(u,f):d(s[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function d(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function j1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Zi=="function"?Zi(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Se(e){return typeof e=="function"}function Pb(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mu=Pb(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Tc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var jo=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Zi(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(Se(u))try{u()}catch(m){s=m instanceof mu?m.errors:[m]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Zi(f),h=d.next();!h.done;h=d.next()){var p=h.value;try{Um(p)}catch(m){s=s??[],m instanceof mu?s=es(es([],ri(s)),ri(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(s)throw new mu(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Um(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Tc(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Tc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Ob=jo.EMPTY;function Nb(e){return e instanceof jo||e&&"closed"in e&&Se(e.remove)&&Se(e.add)&&Se(e.unsubscribe)}function Um(e){Se(e)?e():e.unsubscribe()}var Ab={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Db={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,es([e,t],ri(n)))},clearTimeout:function(e){var t=Db.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Lb(e){Db.setTimeout(function(){throw e})}function $m(){}function za(e){e()}var fh=function(e){jn(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Nb(n)&&n.add(r)):r.destination=B1,r}return t.create=function(n,r,i){return new yo(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(jo),U1=Function.prototype.bind;function gu(e,t){return U1.call(e,t)}var $1=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){fa(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){fa(r)}else fa(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){fa(n)}},e}(),yo=function(e){jn(t,e);function t(n,r,i){var s=e.call(this)||this,o;if(Se(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&Ab.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&gu(n.next,a),error:n.error&&gu(n.error,a),complete:n.complete&&gu(n.complete,a)}):o=n}return s.destination=new $1(o),s}return t}(fh);function fa(e){Lb(e)}function V1(e){throw e}var B1={closed:!0,next:$m,error:V1,complete:$m},hh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Uo(e){return e}function z1(e){return e.length===0?Uo:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var kt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,s=W1(t)?t:new yo(t,n,r);return za(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Vm(n),new n(function(i,s){var o=new yo({next:function(a){try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[hh]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return z1(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Vm(t),new t(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function Vm(e){var t;return(t=e??Ab.Promise)!==null&&t!==void 0?t:Promise}function H1(e){return e&&Se(e.next)&&Se(e.error)&&Se(e.complete)}function W1(e){return e&&e instanceof fh||H1(e)&&Nb(e)}function q1(e){return Se(e==null?void 0:e.lift)}function Un(e){return function(t){if(q1(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function nr(e,t,n,r,i){return new K1(e,t,n,r,i)}var K1=function(e){jn(t,e);function t(n,r,i,s,o,a){var c=e.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype._next,c._error=s?function(l){try{s(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(fh),G1=Pb(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),yl=function(e){jn(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Bm(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new G1},t.prototype.next=function(n){var r=this;za(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Zi(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;za(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;za(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?Ob:(this.currentObservers=null,a.push(n),new jo(function(){r.currentObservers=null,Tc(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},t.prototype.asObservable=function(){var n=new kt;return n.source=this,n},t.create=function(n,r){return new Bm(n,r)},t}(kt),Bm=function(e){jn(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:Ob},t}(yl),ce=function(e){jn(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(yl),ph={now:function(){return(ph.delegate||Date).now()},delegate:void 0},qd=function(e){jn(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=ph);var s=e.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return t.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,o=r._infiniteTimeWindow,a=r._timestampProvider,c=r._windowTime;i||(s.push(n),!o&&s.push(a.now()+c)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),c=0;c<a.length&&!n.closed;c+=s?1:2)n.next(a[c]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,o=n._infiniteTimeWindow,a=(o?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var c=i.now(),l=0,u=1;u<s.length&&s[u]<=c;u+=2)l=u;l&&s.splice(0,l+1)}},t}(yl),J1=function(e){jn(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(jo),zm={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,es([e,t],ri(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Y1=function(e){jn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),zm.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&zm.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Tc(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(J1),Hm=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=ph.now,e}(),Q1=function(e){jn(t,e);function t(n,r){r===void 0&&(r=Hm.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Hm),X1=new Q1(Y1),Z1=new kt(function(e){return e.complete()});function eR(e){return e&&Se(e.schedule)}function mh(e){return e[e.length-1]}function tR(e){return Se(mh(e))?e.pop():void 0}function $o(e){return eR(mh(e))?e.pop():void 0}function nR(e,t){return typeof mh(e)=="number"?e.pop():t}var gh=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Mb(e){return Se(e==null?void 0:e.then)}function Fb(e){return Se(e[hh])}function jb(e){return Symbol.asyncIterator&&Se(e==null?void 0:e[Symbol.asyncIterator])}function Ub(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function rR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $b=rR();function Vb(e){return Se(e==null?void 0:e[$b])}function Bb(e){return F1(this,arguments,function(){var n,r,i,s;return xb(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Vi(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,Vi(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Vi(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function zb(e){return Se(e==null?void 0:e.getReader)}function sr(e){if(e instanceof kt)return e;if(e!=null){if(Fb(e))return iR(e);if(gh(e))return sR(e);if(Mb(e))return oR(e);if(jb(e))return Hb(e);if(Vb(e))return aR(e);if(zb(e))return cR(e)}throw Ub(e)}function iR(e){return new kt(function(t){var n=e[hh]();if(Se(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sR(e){return new kt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function oR(e){return new kt(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,Lb)})}function aR(e){return new kt(function(t){var n,r;try{for(var i=Zi(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Hb(e){return new kt(function(t){lR(e,t).catch(function(n){return t.error(n)})})}function cR(e){return Hb(Bb(e))}function lR(e,t){var n,r,i,s;return M1(this,void 0,void 0,function(){var o,a;return xb(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=j1(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Rr(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Wb(e,t){return t===void 0&&(t=0),Un(function(n,r){n.subscribe(nr(r,function(i){return Rr(r,e,function(){return r.next(i)},t)},function(){return Rr(r,e,function(){return r.complete()},t)},function(i){return Rr(r,e,function(){return r.error(i)},t)}))})}function qb(e,t){return t===void 0&&(t=0),Un(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function uR(e,t){return sr(e).pipe(qb(t),Wb(t))}function dR(e,t){return sr(e).pipe(qb(t),Wb(t))}function fR(e,t){return new kt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function hR(e,t){return new kt(function(n){var r;return Rr(n,t,function(){r=e[$b](),Rr(n,t,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return Se(r==null?void 0:r.return)&&r.return()}})}function Kb(e,t){if(!e)throw new Error("Iterable cannot be null");return new kt(function(n){Rr(n,t,function(){var r=e[Symbol.asyncIterator]();Rr(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function pR(e,t){return Kb(Bb(e),t)}function mR(e,t){if(e!=null){if(Fb(e))return uR(e,t);if(gh(e))return fR(e,t);if(Mb(e))return dR(e,t);if(jb(e))return Kb(e,t);if(Vb(e))return hR(e,t);if(zb(e))return pR(e,t)}throw Ub(e)}function di(e,t){return t?mR(e,t):sr(e)}function Gb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$o(e);return di(e,n)}function bt(e,t){return Un(function(n,r){var i=0;n.subscribe(nr(r,function(s){r.next(e.call(t,s,i++))}))})}var gR=Array.isArray;function vR(e,t){return gR(t)?e.apply(void 0,es([],ri(t))):e(t)}function Jb(e){return bt(function(t){return vR(e,t)})}var yR=Array.isArray,SR=Object.getPrototypeOf,bR=Object.prototype,wR=Object.keys;function CR(e){if(e.length===1){var t=e[0];if(yR(t))return{args:t,keys:null};if(ER(t)){var n=wR(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function ER(e){return e&&typeof e=="object"&&SR(e)===bR}function kR(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$o(e),r=tR(e),i=CR(e),s=i.args,o=i.keys;if(s.length===0)return di([],n);var a=new kt(TR(s,n,o?function(c){return kR(o,c)}:Uo));return r?a.pipe(Jb(r)):a}function TR(e,t,n){return n===void 0&&(n=Uo),function(r){Wm(t,function(){for(var i=e.length,s=new Array(i),o=i,a=i,c=function(u){Wm(t,function(){var f=di(e[u],t),d=!1;f.subscribe(nr(r,function(h){s[u]=h,d||(d=!0,a--),a||r.next(n(s.slice()))},function(){--o||r.complete()}))},r)},l=0;l<i;l++)c(l)},r)}}function Wm(e,t,n){e?Rr(n,e,t):t()}function RR(e,t,n,r,i,s,o,a){var c=[],l=0,u=0,f=!1,d=function(){f&&!c.length&&!l&&t.complete()},h=function(m){return l<r?p(m):c.push(m)},p=function(m){l++;var v=!1;sr(n(m,u++)).subscribe(nr(t,function(g){t.next(g)},function(){v=!0},void 0,function(){if(v)try{l--;for(var g=function(){var y=c.shift();o||p(y)};c.length&&l<r;)g();d()}catch(y){t.error(y)}}))};return e.subscribe(nr(t,h,function(){f=!0,d()})),function(){}}function So(e,t,n){return n===void 0&&(n=1/0),Se(t)?So(function(r,i){return bt(function(s,o){return t(r,s,i,o)})(sr(e(r,i)))},n):(typeof t=="number"&&(n=t),Un(function(r,i){return RR(r,i,e,n)}))}function Yb(e){return e===void 0&&(e=1/0),So(Uo,e)}function _R(){return Yb(1)}function qm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _R()(di(e,$o(e)))}var IR=["addListener","removeListener"],xR=["addEventListener","removeEventListener"],PR=["on","off"];function Kd(e,t,n,r){if(Se(n)&&(r=n,n=void 0),r)return Kd(e,t,n).pipe(Jb(r));var i=ri(AR(e)?xR.map(function(a){return function(c){return e[a](t,c,n)}}):OR(e)?IR.map(Km(e,t)):NR(e)?PR.map(Km(e,t)):[],2),s=i[0],o=i[1];if(!s&&gh(e))return So(function(a){return Kd(a,t,n)})(sr(e));if(!s)throw new TypeError("Invalid event target");return new kt(function(a){var c=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a.next(1<l.length?l:l[0])};return s(c),function(){return o(c)}})}function Km(e,t){return function(n){return function(r){return e[n](t,r)}}}function OR(e){return Se(e.addListener)&&Se(e.removeListener)}function NR(e){return Se(e.on)&&Se(e.off)}function AR(e){return Se(e.addEventListener)&&Se(e.removeEventListener)}function DR(e,t,n){return new kt(function(r){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return r.next(o.length===1?o[0]:o)},s=e(i);return Se(t)?function(){return t(i,s)}:void 0})}function vh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$o(e),r=nR(e,1/0),i=e;return i.length?i.length===1?sr(i[0]):Yb(r)(di(i,n)):Z1}function Sl(e,t){return Se(t)?So(e,t,1):So(e,1)}function LR(e,t){return t===void 0&&(t=X1),Un(function(n,r){var i=null,s=null,o=null,a=function(){if(i){i.unsubscribe(),i=null;var l=s;s=null,r.next(l)}};function c(){var l=o+e,u=t.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(nr(r,function(l){s=l,o=t.now(),i||(i=t.schedule(c,e),r.add(i))},function(){a(),r.complete()},void 0,function(){s=i=null}))})}function Ct(e,t){return t===void 0&&(t=Uo),e=e??MR,Un(function(n,r){var i,s=!0;n.subscribe(nr(r,function(o){var a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}function MR(e,t){return e===t}function ha(e,t){return Ct(function(n,r){return n[e]===r[e]})}function FR(){return Un(function(e,t){var n,r=!1;e.subscribe(nr(t,function(i){var s=n;n=i,r&&t.next([s,i]),r=!0}))})}function jR(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new yl}:t,r=e.resetOnError,i=r===void 0?!0:r,s=e.resetOnComplete,o=s===void 0?!0:s,a=e.resetOnRefCountZero,c=a===void 0?!0:a;return function(l){var u,f,d,h=0,p=!1,m=!1,v=function(){f==null||f.unsubscribe(),f=void 0},g=function(){v(),u=d=void 0,p=m=!1},y=function(){var S=u;g(),S==null||S.unsubscribe()};return Un(function(S,b){h++,!m&&!p&&v();var E=d=d??n();b.add(function(){h--,h===0&&!m&&!p&&(f=vu(y,c))}),E.subscribe(b),!u&&h>0&&(u=new yo({next:function(k){return E.next(k)},error:function(k){m=!0,v(),f=vu(g,i,k),E.error(k)},complete:function(){p=!0,v(),f=vu(g,o),E.complete()}}),sr(S).subscribe(u))})(l)}}function vu(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new yo({next:function(){i.unsubscribe(),e()}});return sr(t.apply(void 0,es([],ri(n)))).subscribe(i)}}function Nt(e,t,n){var r,i,s,o,a=!1;return e&&typeof e=="object"?(r=e.bufferSize,o=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,s=e.refCount,a=s===void 0?!1:s,n=e.scheduler):o=e??1/0,jR({connector:function(){return new qd(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function bl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$o(e);return Un(function(r,i){(n?qm(e,r,n):qm(e,r)).subscribe(i)})}function Gd(e,t){return t===void 0&&(t=!1),Un(function(n,r){var i=0;n.subscribe(nr(r,function(s){var o=e(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}var Qb={},Xb={exports:{}},Gm=Xb.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(Gm).forEach(function(e){var t=Gm[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var Zb=Xb.exports;(function(e){var t=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=t(a[1]);else for(var f=0;f<l.length;f+=1)a[f+1]!=null&&(c[l[f]]=t(a[f+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var f=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),f,a.names,a.name),a.push&&c[a.push].push(f)},i=Zb,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(f){var d=f[0],h=f.slice(2);d==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[d]||[]).length;p+=1){var m=i[d][p];if(m.reg.test(h))return r(m,u,h)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=t(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(t),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},e.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,f=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),f=!0),{scid:u,paused:f}})})}})(Qb);var yu=Zb,UR=/%[sdv%]/g,$R=function(e){var t=1,n=arguments,r=n.length;return e.replace(UR,function(i){if(t>=r)return i;var s=n[t];switch(t+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},_s=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var o=t.names[s];t.name?i.push(n[t.name][o]):i.push(n[t.names[s]])}else i.push(n[t.name]);return $R.apply(null,i)},VR=["v","o","s","i","u","e","p","c","b","t","r","z","a"],BR=["i","c","b","a"],zR=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=t.outerOrder||VR,r=t.innerOrder||BR,i=[];return n.forEach(function(s){yu[s].forEach(function(o){o.name in e&&e[o.name]!=null?i.push(_s(s,o,e)):o.push in e&&e[o.push]!=null&&e[o.push].forEach(function(a){i.push(_s(s,o,a))})})}),e.media.forEach(function(s){i.push(_s("m",yu.m[0],s)),r.forEach(function(o){yu[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(_s(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(_s(o,a,c))})})})}),i.join(`\r
`)+`\r
`},fi=Qb,HR=zR,WR=HR,e0=fi.parse;fi.parseParams;fi.parseFmtpConfig;fi.parsePayloads;fi.parseRemoteCandidates;fi.parseImageAttributes;fi.parseSimulcastStreamList;var Si=null;typeof WebSocket<"u"?Si=WebSocket:typeof MozWebSocket<"u"?Si=MozWebSocket:typeof global<"u"?Si=global.WebSocket||global.MozWebSocket:typeof window<"u"?Si=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Si=self.WebSocket||self.MozWebSocket);const qR=Si;var KR=QR,In=[],Jm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pa=0,GR=Jm.length;pa<GR;++pa)In[pa]=Jm[pa];function JR(e){return In[e>>18&63]+In[e>>12&63]+In[e>>6&63]+In[e&63]}function YR(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(JR(r));return i.join("")}function QR(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(YR(e,o,o+s>a?a:o+s));return r===1?(t=e[n-1],i.push(In[t>>2]+In[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(In[t>>10]+In[t>>4&63]+In[t<<2&63]+"=")),i.join("")}var Su={};const bu={AVAILABLE:"available",DISABLED:"disabled",AUTO_ON:"auto-on"},ee={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};class t0 extends Error{}var Rc;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(Rc||(Rc={}));class XR extends U{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>Bi}}])}internalJsonWrite(t,n){let r={};for(let[i,s]of Object.entries(t.fields))r[i]=Bi.toJson(s);return r}internalJsonRead(t,n,r){if(!vc(t))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+ls(t)+".");r||(r=this.create());for(let[i,s]of globalThis.Object.entries(t))r.fields[i]=Bi.fromJson(s);return r}}const _c=new XR;class ZR extends U{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",Rc]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>_c},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>Ym}])}internalJsonWrite(t,n){if(t.kind.oneofKind===void 0)throw new globalThis.Error;switch(t.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return t.kind.boolValue;case"nullValue":return null;case"numberValue":let r=t.kind.numberValue;if(typeof r=="number"&&!Number.isFinite(r))throw new globalThis.Error;return r;case"stringValue":return t.kind.stringValue;case"listValue":let i=this.fields.find(o=>o.no===6);if((i==null?void 0:i.kind)!=="message")throw new globalThis.Error;return i.T().toJson(t.kind.listValue);case"structValue":let s=this.fields.find(o=>o.no===5);if((s==null?void 0:s.kind)!=="message")throw new globalThis.Error;return s.T().toJson(t.kind.structValue)}}internalJsonRead(t,n,r){switch(r||(r=this.create()),typeof t){case"number":r.kind={oneofKind:"numberValue",numberValue:t};break;case"string":r.kind={oneofKind:"stringValue",stringValue:t};break;case"boolean":r.kind={oneofKind:"boolValue",boolValue:t};break;case"object":t===null?r.kind={oneofKind:"nullValue",nullValue:Rc.NULL_VALUE}:globalThis.Array.isArray(t)?r.kind={oneofKind:"listValue",listValue:Ym.fromJson(t)}:r.kind={oneofKind:"structValue",structValue:_c.fromJson(t)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ls(t))}return r}}const Bi=new ZR;class e_ extends U{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>Bi}])}internalJsonWrite(t,n){return t.values.map(r=>Bi.toJson(r))}internalJsonRead(t,n,r){if(!globalThis.Array.isArray(t))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ls(t));r||(r=this.create());let i=t.map(s=>Bi.fromJson(s));return r.values.push(...i),r}}const Ym=new e_;class t_ extends U{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const t=this.create(),n=Date.now();return t.seconds=Te.from(Math.floor(n/1e3)).toString(),t.nanos=n%1e3*1e6,t}toDate(t){return new Date(Te.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){const n=this.create(),r=t.getTime();return n.seconds=Te.from(Math.floor(r/1e3)).toString(),n.nanos=r%1e3*1e6,n}internalJsonWrite(t,n){let r=Te.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let i="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?i="."+s.substring(0,3)+"Z":s.substring(6)==="000"?i="."+s.substring(0,6)+"Z":i="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",i)}internalJsonRead(t,n,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+ls(t)+".");let i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=Te.from(s/1e3).toString(),r.nanos=0,i[7]&&(r.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),r}}const bo=new t_;var ht;(function(e){e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(ht||(ht={}));var wo;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT"})(wo||(wo={}));var _r;(function(e){e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"})(_r||(_r={}));var M;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(M||(M={}));var ts;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL"})(ts||(ts={}));var Or;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"})(Or||(Or={}));var Co;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION"})(Co||(Co={}));var Ic;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE"})(Ic||(Ic={}));var Eo;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED"})(Eo||(Eo={}));var he;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE"})(he||(he={}));var xc;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN"})(xc||(xc={}));var Pc;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL"})(Pc||(Pc={}));class n_ extends U{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>hi},{no:2,name:"started_at",kind:"message",T:()=>bo},{no:3,name:"participant_count",kind:"message",T:()=>yh},{no:4,name:"pins",kind:"message",repeat:1,T:()=>Sh}])}}const n0=new n_;class r_ extends U{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}}const yh=new r_;class i_ extends U{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const Sh=new i_;class s_ extends U{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>bo},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",wo,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>_c},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}}const hi=new s_;class o_ extends U{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",_r,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}}const a_=new o_;class c_ extends U{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}}const bh=new c_;class l_ extends U{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>bh},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",_r,"VIDEO_QUALITY_"]}])}}const r0=new l_;class u_ extends U{constructor(){super("stream.video.sfu.models.Codec",[{no:1,name:"payload_type",kind:"scalar",T:13},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"fmtp_line",kind:"scalar",T:9},{no:4,name:"clock_rate",kind:"scalar",T:13},{no:5,name:"encoding_parameters",kind:"scalar",T:9},{no:6,name:"feedbacks",kind:"scalar",repeat:2,T:9}])}}const wl=new u_;let d_=class extends U{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",ht,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const wh=new d_;class f_ extends U{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>r0},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8}])}}const Cl=new f_;let h_=class extends U{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",ts,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const En=new h_;class p_ extends U{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>s0},{no:2,name:"os",kind:"message",T:()=>o0},{no:3,name:"browser",kind:"message",T:()=>a0},{no:4,name:"device",kind:"message",T:()=>c0}])}}const i0=new p_;class m_ extends U{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",Or,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}}const s0=new m_;class g_ extends U{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}}const o0=new g_;class v_ extends U{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const a0=new v_;class y_ extends U{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const c0=new y_;class S_ extends U{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>_c},{no:6,name:"created_at",kind:"message",T:()=>bo},{no:7,name:"updated_at",kind:"message",T:()=>bo}])}}const b_=new S_;class w_ extends U{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}}const l0=new w_;class C_ extends U{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}}const Jd=new C_;class E_ extends U{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",xc,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}}const u0=new E_;class k_ extends U{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",Pc,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}}const d0=new k_;var Yd=Object.freeze({__proto__:null,AndroidState:u0,get AndroidThermalState(){return xc},AppleState:d0,get AppleThermalState(){return Pc},Browser:a0,Call:b_,get CallEndedReason(){return Eo},CallGrants:l0,CallState:n0,ClientDetails:i0,Codec:wl,get ConnectionQuality(){return wo},Device:c0,Error:En,get ErrorCode(){return ts},get GoAwayReason(){return Ic},ICETrickle:wh,InputDevices:Jd,OS:o0,Participant:hi,ParticipantCount:yh,get PeerType(){return ht},Pin:Sh,Sdk:s0,get SdkType(){return Or},StreamQuality:a_,TrackInfo:Cl,get TrackType(){return M},get TrackUnpublishReason(){return Co},VideoDimension:bh,VideoLayer:r0,get VideoQuality(){return _r},get WebsocketReconnectStrategy(){return he}});class T_ extends U{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const R_=new T_;class __ extends U{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>En}])}}const I_=new __;class x_ extends U{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const P_=new x_;class O_ extends U{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>En}])}}const N_=new O_;class A_ extends U{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>Jd},{no:8,name:"video_devices",kind:"message",T:()=>Jd},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>u0},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>d0}])}}const D_=new A_;class L_ extends U{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>En}])}}const M_=new L_;class F_ extends U{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",ht,"PEER_TYPE_"]}])}}const j_=new F_;class U_ extends U{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>En}])}}const $_=new U_;class V_ extends U{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>q_}])}}const B_=new V_;class z_ extends U{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>En}])}}const H_=new z_;class W_ extends U{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}}const q_=new W_;class K_ extends U{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}}new K_;class G_ extends U{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}}new G_;class J_ extends U{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>Ch}])}}const Y_=new J_;class Q_ extends U{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>En}])}}const X_=new Q_;class Z_ extends U{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>bh}])}}const Ch=new Z_;class eI extends U{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",ht,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}}const tI=new eI;class nI extends U{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>En}])}}const rI=new nI;class iI extends U{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>En}])}}const sI=new iI;class oI extends U{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>Cl}])}}const aI=new oI;class cI extends U{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>En}])}}const lI=new cI,wu=new Yk("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:aI,O:lI},{name:"SendAnswer",options:{},I:tI,O:rI},{name:"IceTrickle",options:{},I:wh,O:sI},{name:"UpdateSubscriptions",options:{},I:Y_,O:X_},{name:"UpdateMuteStates",options:{},I:B_,O:H_},{name:"IceRestart",options:{},I:j_,O:$_},{name:"SendStats",options:{},I:D_,O:M_},{name:"StartNoiseCancellation",options:{},I:R_,O:I_},{name:"StopNoiseCancellation",options:{},I:P_,O:N_}]);class uI extends U{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>WI},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>KI},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>JI},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>rx},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>wh},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>dx},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>UI},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>VI},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>ZI},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>FI},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>RI},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>II},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>PI},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>gI},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>hx},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>mx},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>SI},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>pI},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>vx},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>zI},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>fI}])}}const Qm=new uI;class dI extends U{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}}const fI=new dI;class hI extends U{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>Sh}])}}const pI=new hI;class mI extends U{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>En},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",he,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}}const gI=new mI;class vI extends U{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",ht,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}}new vI;class yI extends U{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",ht,"PEER_TYPE_"]}])}}const SI=new yI;class bI extends U{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>f0},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>kI},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>CI}])}}const Is=new bI;class wI extends U{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}}const CI=new wI;class EI extends U{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}}const kI=new EI;class TI extends U{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>yh}])}}const RI=new TI;class _I extends U{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>hi}])}}const II=new _I;class xI extends U{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",M,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",Co,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>hi}])}}const PI=new xI;class OI extends U{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>i0},{no:5,name:"migration",kind:"message",T:()=>LI},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>AI}])}}const f0=new OI;class NI extends U{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",he,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>Cl},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>Ch},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9}])}}const AI=new NI;class DI extends U{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>Cl},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>Ch}])}}const LI=new DI;class MI extends U{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>n0},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5}])}}const FI=new MI;class jI extends U{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const UI=new jI;class $I extends U{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const VI=new $I;class BI extends U{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const zI=new BI;class HI extends U{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}}const WI=new HI;class qI extends U{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}}const KI=new qI;class GI extends U{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>QI}])}}const JI=new GI;class YI extends U{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",wo,"CONNECTION_QUALITY_"]}])}}const QI=new YI;class XI extends U{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const ZI=new XI;class ex extends U{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}}const tx=new ex;class nx extends U{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>tx}])}}const rx=new nx;class ix extends U{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>wl}])}}const sx=new ix;class ox extends U{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>wl},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}}const ax=new ox;class cx extends U{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>wl},{no:3,name:"layers",kind:"message",repeat:1,T:()=>ax}])}}const lx=new cx;class ux extends U{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>sx},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>lx}])}}const dx=new ux;class fx extends U{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>l0},{no:2,name:"message",kind:"scalar",T:9}])}}const hx=new fx;class px extends U{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",Ic,"GO_AWAY_REASON_"]}])}}const mx=new px;class gx extends U{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",Eo,"CALL_ENDED_REASON_"]}])}}const vx=new gx;var Ze;(function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE"})(Ze||(Ze={}));var Wn;(function(e){e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW"})(Wn||(Wn={}));class yx{constructor(t){this._transport=t,this.typeName=wu.typeName,this.methods=wu.methods,this.options=wu.options}setPublisher(t,n){const r=this.methods[0],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}sendAnswer(t,n){const r=this.methods[1],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}iceTrickle(t,n){const r=this.methods[2],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}updateSubscriptions(t,n){const r=this.methods[3],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}updateMuteStates(t,n){const r=this.methods[4],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}iceRestart(t,n){const r=this.methods[5],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}sendStats(t,n){const r=this.methods[6],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}startNoiseCancellation(t,n){const r=this.methods[7],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}stopNoiseCancellation(t,n){const r=this.methods[8],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}}const Sx={baseUrl:"",sendJson:!0,timeout:5*1e3,jsonOptions:{ignoreUnknownFields:!0}},bx=e=>({interceptUnary(t,n,r,i){return i.meta={...i.meta,...e},t(n,r,i)}}),wx=(e,t)=>({interceptUnary:(n,r,i,s)=>(e(t,`Calling SFU RPC method ${r.name}`,{input:i,options:s}),n(r,i,s))}),Cx=e=>{const t=new D1({...Sx,...e});return new yx(t)},Ln=e=>new Promise(t=>setTimeout(t,e));function Qd(e){return e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)}const bi={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3,WS_CLOSED_ABRUPTLY:1006,WS_POLICY_VIOLATION:1008};function ko(e){const t=Math.min(500+e*2e3,5e3),n=Math.min(Math.max(250,(e-1)*2e3),5e3);return Math.floor(Math.random()*(t-n)+n)}function Js(){return h0()}function xs(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function h0(){const e=Tx(16);return e[6]=e[6]&15|64,e[8]=e[8]&191|128,xs(e.subarray(0,4))+"-"+xs(e.subarray(4,6))+"-"+xs(e.subarray(6,8))+"-"+xs(e.subarray(8,10))+"-"+xs(e.subarray(10,16))}function Ex(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t}const kx=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):Ex;function Tx(e){const t=new Uint8Array(e);return kx(t),t}function Rx(e){const t={};if(!e)return t;try{Object.getOwnPropertyNames(e).forEach(n=>{t[n]=Object.getOwnPropertyDescriptor(e,n)})}catch{return{error:"failed to serialize the error"}}return t}async function _x(e){const t={};return Promise.race([e,t]).then(n=>n===t,()=>!1)}function Ix(e){const t=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return t?typeof t.onLine!="boolean"?!0:t.onLine:(e("warn","isOnline failed to access window.navigator and assume browser is online"),!0)}function Oc(e){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function Eh(e){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}const it=()=>{var e;return typeof navigator>"u"?!1:((e=navigator.product)==null?void 0:e.toLowerCase())==="reactnative"},Xm=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let p0,kh="info";const m0=(e,t,...n)=>{let r;switch(e){case"error":if(it()){t=`ERROR: ${t}`,r=console.info;break}r=console.error;break;case"warn":if(it()){t=`WARN: ${t}`,r=console.info;break}r=console.warn;break;case"info":r=console.info;break;case"trace":r=console.trace;break;default:r=console.log;break}r(t,...n)},xx=(e,t)=>{p0=e,t&&Px(t)},Px=e=>{kh=e},Ox=()=>kh,Ee=e=>{const t=p0||m0,n=(e||[]).filter(Boolean).join(":");return(i,s,...o)=>{Xm[i]>=Xm[kh]&&t(i,`[${n}]: ${s}`,...o)}},zn=async(e,t)=>{var i;let n=0,r;do{n>0&&await Ln(ko(n));try{r=await e()}catch(s){const o=s instanceof xt&&s.code===Pe[Pe.cancelled],a=(t==null?void 0:t.aborted)??!1;if(o||a)throw s;Ee(["sfu-client","rpc"])("debug",`rpc failed (${n})`,s),n++}}while(!r||(i=r.response.error)!=null&&i.shouldRetry);return r},Nx="1.10.2",[Ax,Dx,Lx]=Nx.split(".");let g0={type:Or.PLAIN_JAVASCRIPT,major:Ax,minor:Dx,patch:Lx},Mx,Fx;const jx=e=>{g0=e},Xd=()=>g0,Ux=()=>Mx,$x=()=>Fx,Zm=()=>{if(it())return{sdk:Xd(),os:Ux(),device:$x()};const e=new L1.UAParser(navigator.userAgent),{browser:t,os:n,device:r,cpu:i}=e.getResult();return{sdk:Xd(),browser:{name:t.name||navigator.userAgent,version:t.version||""},os:{name:n.name||"",version:n.version||"",architecture:i.architecture||""},device:{name:[r.vendor,r.model,r.type].filter(Boolean).join(" "),version:""}}},El=()=>typeof navigator>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),Vo=()=>{var e;return typeof navigator>"u"?!1:(e=navigator.userAgent)==null?void 0:e.includes("Firefox")},Vx=()=>{var e;return typeof navigator>"u"?!1:(e=navigator.userAgent)==null?void 0:e.includes("Chrome")};var eg=Object.freeze({__proto__:null,isChrome:Vx,isFirefox:Vo,isSafari:El});const tg=(e,t,n)=>{if(!("getCapabilities"in RTCRtpReceiver))return;const r=RTCRtpReceiver.getCapabilities(e);if(!r)return;const i=[],s=[],o=[],a=`${e}/${t.toLowerCase()}`,c=n&&`${e}/${n.toLowerCase()}`;for(const l of r.codecs){const u=l.mimeType.toLowerCase();if(u===c)continue;if(!(u===a)){o.push(l);continue}if(u!=="video/h264"){i.push(l);continue}const h=l.sdpFmtpLine;if(!h||!h.includes("profile-level-id=42e01f")){s.push(l);continue}h.includes("packetization-mode=0")||!h.includes("packetization-mode")?i.unshift(l):i.push(l)}return[...i,...s,...o]},Bx=async e=>{const t=new RTCPeerConnection;t.addTransceiver("video",{direction:e}),t.addTransceiver("audio",{direction:e});const r=(await t.createOffer()).sdp??"";return t.getTransceivers().forEach(i=>{var s;(s=i.stop)==null||s.call(i)}),t.close(),r},ng=e=>it()?rg(e,"h264"):El()?"h264":Vo()?"vp8":rg(e,"vp8"),rg=(e,t)=>{if(!e||!("getCapabilities"in RTCRtpSender))return t;const n=RTCRtpSender.getCapabilities("video");if(!n||Nc(e)&&(El()||Vo()))return t;const{codecs:r}=n,i=`video/${e}`.toLowerCase();return r.some(s=>s.mimeType.toLowerCase()===i)?e:t},Nc=e=>e?(e=e.toLowerCase(),e==="vp9"||e==="av1"||e==="video/vp9"||e==="video/av1"):!1,zx={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0},ig=e=>Object.prototype.hasOwnProperty.call(zx,e);class Hx{constructor(){this.logger=Ee(["Dispatcher"]),this.subscribers={},this.dispatch=(t,n="0")=>{const r=t.eventPayload.oneofKind;if(!r)return;const i=t.eventPayload[r];this.logger("debug",`Dispatching ${r}, tag=${n}`,i);const s=this.subscribers[r];if(s)for(const o of s)try{o(i)}catch(a){this.logger("warn","Listener failed with error",a)}},this.on=(t,n)=>{var r;return((r=this.subscribers)[t]??(r[t]=[])).push(n),()=>{this.off(t,n)}},this.off=(t,n)=>{this.subscribers[t]=(this.subscribers[t]||[]).filter(r=>r!==n)},this.offAll=t=>{t?this.subscribers[t]=[]:this.subscribers={}}}}class Wx{constructor(){this.subscriberCandidates=new qd,this.publisherCandidates=new qd,this.push=t=>{t.peerType===ht.SUBSCRIBER?this.subscriberCandidates.next(t):t.peerType===ht.PUBLISHER_UNSPECIFIED?this.publisherCandidates.next(t):Ee(["sfu-client"])("warn","ICETrickle, Unknown peer type",t)}}}function v0(e){if(e.usernameFragment)return JSON.stringify(e.toJSON());{const t=e.candidate.split(" "),n=t.findIndex(i=>i==="ufrag")+1,r=t[n];return JSON.stringify({...e,usernameFragment:r})}}const qx={h264:{2160:5e6,1440:35e5,1080:275e4,720:125e4,540:75e4,360:4e5,default:125e4},vp8:{2160:5e6,1440:275e4,1080:2e6,720:125e4,540:6e5,360:35e4,default:125e4},vp9:{2160:3e6,1440:2e6,1080:15e5,720:125e4,540:5e5,360:275e3,default:125e4},av1:{2160:2e6,1440:155e4,1080:1e6,720:6e5,540:35e4,360:2e5,default:6e5}},Kx=(e,t)=>{const n=qx[e];if(!n)throw new Error(`Unknown codec: ${e}`);let r=n[t];if(!r){const s=Object.keys(n).map(Number).reduce((o,a)=>Math.abs(a-t)<Math.abs(o-t)?a:o);r=n[s]}return r??n.default},y0=125e4,Gx={bitrate:y0,width:1280,height:720},Jx={q:3e5,h:75e4,f:y0},Yx=e=>e==null?void 0:e.filter(t=>t.rid==="f").map(t=>({...t,rid:"q"})),Qx=e=>e==="q"?_r.LOW_UNSPECIFIED:e==="h"?_r.MID:_r.HIGH,Xx=(e,t=Gx,n,r)=>{const i=[],s=e.getSettings(),{width:o=0,height:a=0}=s,{scalabilityMode:c,bitrateDownscaleFactor:l=2}=r||{},u=Zx(t,o,a,n,r);let f=1,d=1;const h=Nc(n);for(const p of["f","h","q"]){const m={active:!0,rid:p,width:Math.round(o/f),height:Math.round(a/f),maxBitrate:Math.round(u/d)||Jx[p],maxFramerate:30};h?m.scalabilityMode=c||"L3T2_KEY":m.scaleResolutionDownBy=f,f*=2,d*=l,i.unshift(m)}return eP(s,i)},Zx=(e,t,n,r,i)=>{const{width:s,height:o,bitrate:a}=e,{preferredBitrate:c}=i||{},l=t>n?n:t,u=c||(r?Kx(r,l):a);if(t<s||n<o){const f=t*n,d=s*o,h=f/d;return Math.round(u*h)}return u},eP=(e,t)=>{let n;const r=Math.max(e.width||0,e.height||0);r<=320?n=t.filter(s=>s.rid==="f"):r<=640?n=t.filter(s=>s.rid!=="h"):n=t;const i=["q","h","f"];return n.map((s,o)=>({...s,rid:i[o]}))},tP=(e,t,n=3e6)=>{const{screenShareSettings:r}=t||{},i=e.getSettings();return[{active:!0,rid:"q",width:i.width||0,height:i.height||0,scaleResolutionDownBy:1,maxBitrate:(r==null?void 0:r.maxBitrate)??n,maxFramerate:(r==null?void 0:r.maxFramerate)??30}]},Ac=(e,t)=>{Ee(["helpers"])("warn",t,e)},Th=e=>{switch(e){case M.SCREEN_SHARE:return"screenShareStream";case M.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case M.VIDEO:return"videoStream";case M.AUDIO:return"audioStream";case M.UNSPECIFIED:throw new Error("Track type is unspecified");default:Ac(e,"Unknown track type")}},nP=e=>{switch(e){case"audio":return M.AUDIO;case"video":return M.VIDEO;case"screenshare":return M.SCREEN_SHARE;case"screenshare_audio":return M.SCREEN_SHARE_AUDIO;default:Ac(e,"Unknown mute type")}},rP=e=>{switch(e){case"TRACK_TYPE_AUDIO":return M.AUDIO;case"TRACK_TYPE_VIDEO":return M.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return M.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return M.SCREEN_SHARE_AUDIO;default:return}},Kt=S0(sP),Cu=S0(oP),To=new Map;async function iP(e){var t;await((t=To.get(e))==null?void 0:t.promise)}function S0(e){return function(n,r){const{cb:i,onContinued:s}=e(n,r),o=To.get(n);o==null||o.onContinued();const a=o?o.promise.then(i,i):i();return To.set(n,{promise:a,onContinued:s}),a}}function sP(e,t){let n=!1;return{cb:()=>t().finally(()=>{n||To.delete(e)}),onContinued:()=>n=!0}}function oP(e,t){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally(()=>{n.signal.aborted||To.delete(e)}),onContinued:()=>n.abort()}}const aP=e=>typeof e=="function",on=e=>{let t,n;if(ii([e]).subscribe({next:([r])=>{t=r},error:r=>{n=r}}).unsubscribe(),n)throw n;return t},Nr=(e,t)=>{const n=aP(t)?t(on(e)):t;return e.next(n),n},At=(e,t,n=r=>Ee(["RxUtils"])("warn","An observable emitted an error",r))=>{const r=e.subscribe({next:t,error:n});return()=>{r.unsubscribe()}},b0=(e,t)=>{const n=Symbol();return At(e,r=>{Kt(n,()=>t(r))})};var cP=Object.freeze({__proto__:null,createSafeAsyncSubscription:b0,createSubscription:At,getCurrentValue:on,setCurrentValue:Nr}),H;(function(e){e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline"})(H||(H={}));class lP{constructor(){this.connectedUserSubject=new ce(void 0),this.callsSubject=new ce([]),this.setConnectedUser=t=>Nr(this.connectedUserSubject,t),this.setCalls=t=>Nr(this.callsSubject,t),this.registerCall=t=>{this.calls.find(n=>n.cid===t.cid)||this.setCalls(n=>[...n,t])},this.unregisterCall=t=>this.setCalls(n=>n.filter(r=>r!==t)),this.findCall=(t,n)=>this.calls.find(r=>r.type===t&&r.id===n),this.connectedUserSubject.subscribe(async t=>{if(!t){const n=Ee(["client-state"]);for(const r of this.calls)r.state.callingState!==H.LEFT&&(n("info",`User disconnected, leaving call: ${r.cid}`),await r.leave({reason:"client.disconnectUser() called"}).catch(i=>{n("error",`Error leaving call: ${r.cid}`,i)}))}})}get connectedUser(){return on(this.connectedUserSubject)}get calls(){return on(this.callsSubject)}}class uP{constructor(t){this.getCurrentValue=on,this.connectedUser$=t.connectedUserSubject.asObservable(),this.calls$=t.callsSubject.asObservable()}get connectedUser(){return on(this.connectedUser$)}get calls(){return on(this.calls$)}}const si=(...e)=>(t,n)=>{for(const r of e){const i=r(t,n);if(i!==0)return i}return 0},dP=e=>t=>(n,r)=>e(n,r)?t(n,r):0,Pn=e=>e.publishedTracks.includes(M.VIDEO),vr=e=>e.publishedTracks.includes(M.AUDIO),vn=e=>e.publishedTracks.includes(M.SCREEN_SHARE),kl=e=>e.publishedTracks.includes(M.SCREEN_SHARE_AUDIO),Rh=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,_h=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,Ih=(e,t)=>vn(e)&&!vn(t)?-1:!vn(e)&&vn(t)?1:0,xh=(e,t)=>Pn(e)&&!Pn(t)?-1:!Pn(e)&&Pn(t)?1:0,Ph=(e,t)=>vr(e)&&!vr(t)?-1:!vr(e)&&vr(t)?1:0,w0=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},Oh=e=>(t,n)=>{var r,i,s,o;return((r=t.reaction)==null?void 0:r.type)===e&&((i=n.reaction)==null?void 0:i.type)!==e?-1:((s=t.reaction)==null?void 0:s.type)!==e&&((o=n.reaction)==null?void 0:o.type)===e?1:0},fP=(...e)=>(t,n)=>ma(t,e)&&!ma(n,e)?-1:!ma(t,e)&&ma(n,e)?1:0,ma=(e,t)=>(e.roles||[]).some(n=>t.includes(n)),Nh=dP((e,t)=>{var n,r;return((n=e.viewportVisibilityState)==null?void 0:n.videoTrack)===Ze.INVISIBLE||((r=t.viewportVisibilityState)==null?void 0:r.videoTrack)===Ze.INVISIBLE}),Ro=si(w0,Ih,Nh(si(Rh,_h,Oh("raised-hand"),xh,Ph))),hP=si(w0,Ih,Rh,Nh(si(_h,Oh("raised-hand"),xh,Ph))),sg=si(Nh(si(Rh,_h,Oh("raised-hand"),xh,Ph)),fP("admin","host","speaker")),Eu={broadcasting:!1,hls:{playlist_url:""},rtmps:[]};class C0{constructor(){this.backstageSubject=new ce(!0),this.blockedUserIdsSubject=new ce([]),this.createdAtSubject=new ce(new Date),this.endedAtSubject=new ce(void 0),this.startsAtSubject=new ce(void 0),this.updatedAtSubject=new ce(new Date),this.createdBySubject=new ce(void 0),this.customSubject=new ce({}),this.egressSubject=new ce(void 0),this.ingressSubject=new ce(void 0),this.recordingSubject=new ce(!1),this.sessionSubject=new ce(void 0),this.settingsSubject=new ce(void 0),this.transcribingSubject=new ce(!1),this.endedBySubject=new ce(void 0),this.thumbnailsSubject=new ce(void 0),this.membersSubject=new ce([]),this.ownCapabilitiesSubject=new ce([]),this.callingStateSubject=new ce(H.UNKNOWN),this.startedAtSubject=new ce(void 0),this.participantCountSubject=new ce(0),this.anonymousParticipantCountSubject=new ce(0),this.participantsSubject=new ce([]),this.callStatsReportSubject=new ce(void 0),this.orphanedTracks=[],this.logger=Ee(["CallState"]),this.sortParticipantsBy=Ro,this.setSortParticipantsBy=r=>{this.sortParticipantsBy=r,this.setCurrentValue(this.participantsSubject,i=>i)},this.getCurrentValue=on,this.setCurrentValue=Nr,this.setParticipantCount=r=>this.setCurrentValue(this.participantCountSubject,r),this.setStartedAt=r=>this.setCurrentValue(this.startedAtSubject,r),this.setAnonymousParticipantCount=r=>this.setCurrentValue(this.anonymousParticipantCountSubject,r),this.setParticipants=r=>this.setCurrentValue(this.participantsSubject,r),this.setCallingState=r=>this.setCurrentValue(this.callingStateSubject,r),this.setCallStatsReport=r=>this.setCurrentValue(this.callStatsReportSubject,r),this.setMembers=r=>{this.setCurrentValue(this.membersSubject,r)},this.setOwnCapabilities=r=>this.setCurrentValue(this.ownCapabilitiesSubject,r),this.setEndedAt=r=>this.setCurrentValue(this.endedAtSubject,r),this.findParticipantBySessionId=r=>this.participants.find(i=>i.sessionId===r),this.getParticipantLookupBySessionId=()=>this.participants.reduce((r,i)=>(r[i.sessionId]=i,r),{}),this.updateParticipant=(r,i)=>{const s=this.findParticipantBySessionId(r);if(!s){this.logger("warn",`Participant with sessionId ${r} not found`);return}const o=typeof i=="function"?i(s):i,a={...s,...o};return this.setParticipants(c=>c.map(l=>l.sessionId===r?a:l))},this.updateOrAddParticipant=(r,i)=>this.setParticipants(s=>{let o=!0;const a=s.map(c=>c.sessionId===r?(o=!1,{...c,...i}):c);return o&&a.push(i),a}),this.updateParticipants=r=>Object.keys(r).length===0?this.participants:this.setParticipants(i=>i.map(s=>{const o=r[s.sessionId];return o?{...s,...o}:s})),this.updateParticipantTracks=(r,i)=>this.updateParticipants(Object.entries(i).reduce((s,[o,a])=>{a.dimension&&(a.dimension.height=Math.ceil(a.dimension.height),a.dimension.width=Math.ceil(a.dimension.width));const c=r==="videoTrack"?"videoDimension":r==="screenShareTrack"?"screenShareDimension":void 0;return c&&(s[o]={[c]:a.dimension}),s},{})),this.updateFromEvent=r=>{const i=this.eventHandlers[r.type];i&&i(r)},this.setServerSidePins=r=>{const i=r.reduce((s,o)=>(s[o.sessionId]=Date.now(),s),{});return this.setParticipants(s=>s.map(o=>{const a=i[o.sessionId];return a?{...o,pin:{isLocalPin:!1,pinnedAt:a}}:o.pin&&!o.pin.isLocalPin?{...o,pin:void 0}:o}))},this.registerOrphanedTrack=r=>{this.orphanedTracks.push(r)},this.removeOrphanedTrack=r=>{this.orphanedTracks=this.orphanedTracks.filter(i=>i.id!==r)},this.takeOrphanedTracks=r=>{const i=this.orphanedTracks.filter(s=>s.trackLookupPrefix===r);return i.length>0&&(this.orphanedTracks=this.orphanedTracks.filter(s=>s.trackLookupPrefix!==r)),i},this.updateFromCallResponse=r=>{this.setCurrentValue(this.backstageSubject,r.backstage),this.setCurrentValue(this.blockedUserIdsSubject,r.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(r.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(r.updated_at)),this.setCurrentValue(this.startsAtSubject,r.starts_at?new Date(r.starts_at):void 0),this.setEndedAt(r.ended_at?new Date(r.ended_at):void 0),this.setCurrentValue(this.createdBySubject,r.created_by),this.setCurrentValue(this.customSubject,r.custom),this.setCurrentValue(this.egressSubject,r.egress),this.setCurrentValue(this.ingressSubject,r.ingress),this.setCurrentValue(this.recordingSubject,r.recording);const i=this.setCurrentValue(this.sessionSubject,r.session);this.updateParticipantCountFromSession(i),this.setCurrentValue(this.settingsSubject,r.settings),this.setCurrentValue(this.transcribingSubject,r.transcribing),this.setCurrentValue(this.thumbnailsSubject,r.thumbnails)},this.updateFromSfuCallState=(r,i,s)=>{const{participants:o,participantCount:a,startedAt:c,pins:l}=r,u=(s==null?void 0:s.announcedTracks.map(f=>f.trackType))??[];this.setParticipants(()=>{const f=this.getParticipantLookupBySessionId();return o.map(d=>{const h=f[d.sessionId],p=d.sessionId===i;return Object.assign({},h,d,{isLocalParticipant:p,publishedTracks:p?u:d.publishedTracks,viewportVisibilityState:(h==null?void 0:h.viewportVisibilityState)??{videoTrack:Ze.UNKNOWN,screenShareTrack:Ze.UNKNOWN}})})}),this.setParticipantCount((a==null?void 0:a.total)||0),this.setAnonymousParticipantCount((a==null?void 0:a.anonymous)||0),this.setStartedAt(c?bo.toDate(c):new Date),this.setServerSidePins(l)},this.updateFromMemberRemoved=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.filter(s=>r.members.indexOf(s.user_id)===-1))},this.updateFromMemberAdded=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>[...i,...r.members])},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(r=Eu)=>({...r,broadcasting:!1}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(r=Eu)=>({...r,broadcasting:!1}))},this.updateFromHLSBroadcastStarted=r=>{this.setCurrentValue(this.egressSubject,(i=Eu)=>({...i,broadcasting:!0,hls:{...i.hls,playlist_url:r.hls_playlist_url}}))},this.updateParticipantCountFromSession=r=>{if(!r||this.callingState===H.JOINED)return;const i=Object.values(r.participants_count_by_role).reduce((o,a)=>o+a,0),s=Math.max(i,r.participants.length);this.setParticipantCount(s),this.setAnonymousParticipantCount(r.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>s&&{...s,anonymous_participant_count:r.anonymous_participant_count,participants_count_by_role:r.participants_count_by_role});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantLeft=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;const{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:l}=r.participant;return{...s,participants:o.filter(u=>u.user_session_id!==l),participants_count_by_role:{...a,[c.role]:Math.max(0,(a[c.role]||0)-1)}}});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantJoined=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;const{participants:o,participants_count_by_role:a}=s,{user:c,user_session_id:l}=r.participant;let u=!0;const f=o.map(h=>h.user_session_id===l?(u=!1,r.participant):h);u&&f.push(r.participant);const d=u?1:0;return{...s,participants:f,participants_count_by_role:{...a,[c.role]:(a[c.role]||0)+d}}});this.updateParticipantCountFromSession(i)},this.updateMembers=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.map(s=>{const o=r.members.find(a=>a.user_id===s.user_id);return o||s}))},this.updateParticipantReaction=r=>{const{user:i,custom:s,type:o,emoji_code:a}=r.reaction;this.setParticipants(c=>c.map(l=>l.userId!==i.id?l:{...l,reaction:{type:o,emoji_code:a,custom:s}}))},this.unblockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>i&&i.filter(s=>s!==r.user.id))},this.blockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>[...i||[],r.user.id])},this.updateOwnCapabilities=r=>{var i;r.user.id===((i=this.localParticipant)==null?void 0:i.userId)&&this.setCurrentValue(this.ownCapabilitiesSubject,r.own_capabilities)},this.participants$=this.participantsSubject.asObservable().pipe(bt(r=>r.sort(this.sortParticipantsBy)),Nt({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(bt(r=>r.find(i=>i.isLocalParticipant)),Nt({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(bt(r=>r.filter(i=>!i.isLocalParticipant)),Nt({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(bt(r=>r.filter(i=>!!i.pin)),Nt({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(bt(r=>r.find(i=>i.isDominantSpeaker)),Nt({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(bt(r=>r.some(i=>vn(i))),Ct(),Nt({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable();const t=(r,i)=>{if(r.length!==i.length)return!1;for(const s of r)if(!i.includes(s))return!1;for(const s of i)if(!r.includes(s))return!1;return!0},n=(r,i)=>r.asObservable().pipe(Ct(i));this.anonymousParticipantCount$=n(this.anonymousParticipantCountSubject),this.blockedUserIds$=n(this.blockedUserIdsSubject,t),this.backstage$=n(this.backstageSubject),this.callingState$=n(this.callingStateSubject),this.ownCapabilities$=n(this.ownCapabilitiesSubject,t),this.participantCount$=n(this.participantCountSubject),this.recording$=n(this.recordingSubject),this.transcribing$=n(this.transcribingSubject),this.eventHandlers={"call.closed_caption":void 0,"call.deleted":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.banned":void 0,"user.deactivated":void 0,"user.deleted":void 0,"user.muted":void 0,"user.presence.changed":void 0,"user.reactivated":void 0,"user.unbanned":void 0,"user.updated":void 0,custom:void 0,"call.accepted":r=>this.updateFromCallResponse(r.call),"call.blocked_user":this.blockUser,"call.created":r=>this.updateFromCallResponse(r.call),"call.ended":r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.endedBySubject,r.user)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":this.updateFromHLSBroadcastStarted,"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":r=>this.updateFromCallResponse(r.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":r=>{this.updateFromCallResponse(r.call),this.setMembers(r.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":r=>this.updateFromCallResponse(r.call),"call.ring":r=>this.updateFromCallResponse(r.call),"call.missed":r=>this.updateFromCallResponse(r.call),"call.session_ended":r=>this.updateFromCallResponse(r.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":r=>this.updateFromCallResponse(r.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":r=>this.updateFromCallResponse(r.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}}const pP=e=>{const n=/^a=rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/.exec(e);if(n)return{original:n[0],payload:n[1],codec:n[2]}},mP=e=>{const n=/^a=fmtp:(\d*) (.*)/.exec(e);if(n)return{original:n[0],payload:n[1],config:n[2]}},gP=(e,t)=>{const r=new RegExp(`(m=${t} \\d+ [\\w/]+) ([\\d\\s]+)`).exec(e);if(r)return{original:r[0],mediaWithPorts:r[1],codecOrder:r[2]}},vP=(e,t)=>{let n;const r=[],i=[];let s=!1;if(e.split(/(\r\n|\r|\n)/).forEach(o=>{if(!/^([a-z])=(.*)/.test(o))return;const c=o[0];if(c==="m"){const l=gP(o,t);s=!!l,l&&(n=l)}else if(s&&c==="a"){const l=pP(o),u=mP(o);l?r.push(l):u&&i.push(u)}}),n)return{media:n,rtpMap:r,fmtp:i}},yP=e=>{const t=vP(e,"audio"),n=t==null?void 0:t.rtpMap.find(i=>i.codec.toLowerCase()==="opus"),r=n==null?void 0:n.payload;if(r)return t==null?void 0:t.fmtp.find(i=>i.payload===r)},SP=(e,t)=>{const n=yP(e);if(!n)return e;const r=/usedtx=(\d)/.exec(n.config),i=`usedtx=${t?"1":"0"}`,s=r?n.original.replace(/usedtx=(\d)/,i):`${n.original};${i}`;return e.replace(n.original,s)},bP=(e,t,n=51e4)=>{n=Math.max(Math.min(n,51e4),96e3);const r=e0(e),i=r.media.find(a=>a.type==="audio"&&String(a.mid)===t);if(!i)return e;const s=i.rtp.find(a=>a.codec==="opus");if(!s)return e;const o=i.fmtp.find(a=>a.payload===s.payload);return o?(o.config.match(/stereo=(\d)/)?o.config=o.config.replace(/stereo=(\d)/,"stereo=1"):o.config=`${o.config};stereo=1`,o.config.match(/maxaveragebitrate=(\d*)/)?o.config=o.config.replace(/maxaveragebitrate=(\d*)/,`maxaveragebitrate=${n}`):o.config=`${o.config};maxaveragebitrate=${n}`,WR(r)):e},og=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return"";const r=e.sender.track,s=e0(n).media.find(o=>{var a;return o.type===r.kind&&(((a=o.msid)==null?void 0:a.includes(r.id))??!0)});return typeof(s==null?void 0:s.mid)<"u"?String(s.mid):t===-1?"":String(t)};class wP{constructor({connectionConfig:t,sfuClient:n,dispatcher:r,state:i,isDtxEnabled:s,isRedEnabled:o,onUnrecoverableError:a,logTag:c}){this.transceiverCache=new Map,this.trackLayersCache=new Map,this.publishOptsForTrack=new Map,this.transceiverInitOrder=[],this.isIceRestarting=!1,this.createPeerConnection=l=>{const u=new RTCPeerConnection(l);return u.addEventListener("icecandidate",this.onIceCandidate),u.addEventListener("negotiationneeded",this.onNegotiationNeeded),u.addEventListener("icecandidateerror",this.onIceCandidateError),u.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),u.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),u.addEventListener("signalingstatechange",this.onSignalingStateChange),u},this.close=({stopTracks:l})=>{l&&(this.stopPublishing(),this.transceiverCache.clear(),this.trackLayersCache.clear()),this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unsubscribeOnIceRestart(),this.unsubscribeChangePublishQuality(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("negotiationneeded",this.onNegotiationNeeded),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this.pc.removeEventListener("signalingstatechange",this.onSignalingStateChange)},this.publishStream=async(l,u,f,d={})=>{if(u.readyState==="ended")throw new Error("Can't publish a track that has ended already.");u.enabled||(u.enabled=!0);const h=this.transceiverCache.get(f);if(!h||!h.sender.track){const p=()=>{this.logger("info",`Track ${M[f]} has ended abruptly`),u.removeEventListener("ended",p),this.notifyTrackMuteStateChanged(l,f,!0).catch(m=>this.logger("warn","Couldn't notify track mute state",m))};u.addEventListener("ended",p),this.addTransceiver(f,u,d,l)}else await this.updateTransceiver(h,u);await this.notifyTrackMuteStateChanged(l,f,!1)},this.addTransceiver=(l,u,f,d)=>{const{forceCodec:h,preferredCodec:p}=f,m=h||ng(p),v=this.computeLayers(l,u,f),g=this.pc.addTransceiver(u,{direction:"sendonly",streams:l===M.VIDEO||l===M.SCREEN_SHARE?[d]:void 0,sendEncodings:Nc(m)?Yx(v):v});if(this.logger("debug",`Added ${M[l]} transceiver`),this.transceiverInitOrder.push(l),this.transceiverCache.set(l,g),this.publishOptsForTrack.set(l,f),!("setCodecPreferences"in g))return;const y=this.getCodecPreferences(l,l===M.VIDEO?m:void 0);if(y)try{this.logger("info",`Setting ${M[l]} codec preferences`,y),g.setCodecPreferences(y)}catch(S){this.logger("warn","Couldn't set codec preferences",S)}},this.updateTransceiver=async(l,u)=>{const f=l.sender.track;f&&f!==u&&f.stop(),await l.sender.replaceTrack(u)},this.unpublishStream=async(l,u)=>{var d;const f=this.transceiverCache.get(l);f&&f.sender.track&&(u?f.sender.track.readyState==="live":f.sender.track.enabled)&&(u?f.sender.track.stop():f.sender.track.enabled=!1,(d=this.state.localParticipant)!=null&&d.publishedTracks.includes(l)&&await this.notifyTrackMuteStateChanged(void 0,l,!0))},this.isPublishing=l=>{const u=this.transceiverCache.get(l);if(!u||!u.sender)return!1;const f=u.sender.track;return!!f&&f.readyState==="live"&&f.enabled},this.notifyTrackMuteStateChanged=async(l,u,f)=>{await this.sfuClient.updateMuteState(u,f);const d=Th(u);d&&(f?this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.filter(p=>p!==u),[d]:void 0})):this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.includes(u)?h.publishedTracks:[...h.publishedTracks,u],[d]:l})))},this.stopPublishing=()=>{this.logger("debug","Stopping publishing all tracks"),this.pc.getSenders().forEach(l=>{var u;(u=l.track)==null||u.stop(),this.pc.signalingState!=="closed"&&this.pc.removeTrack(l)})},this.changePublishQuality=async l=>{var v;this.logger("info","Update publish quality, requested layers by SFU:",l);const u=(v=this.transceiverCache.get(M.VIDEO))==null?void 0:v.sender;if(!u){this.logger("warn","Update publish quality, no video sender found.");return}const f=u.getParameters();if(f.encodings.length===0){this.logger("warn","Update publish quality, No suitable video encoding quality found");return}const[d]=f.codecs,h=d&&Nc(d.mimeType);let p=!1;for(const g of f.encodings){const y=h?l[0]:l.find(x=>x.name===g.rid),S=!!(y!=null&&y.active);if(S!==g.active&&(g.active=S,p=!0),!y)continue;const{maxFramerate:b,scaleResolutionDownBy:E,maxBitrate:k,scalabilityMode:T}=y;E>=1&&E!==g.scaleResolutionDownBy&&(g.scaleResolutionDownBy=E,p=!0),k>0&&k!==g.maxBitrate&&(g.maxBitrate=k,p=!0),b>0&&b!==g.maxFramerate&&(g.maxFramerate=b,p=!0),T&&T!==g.scalabilityMode&&(g.scalabilityMode=T,p=!0)}const m=f.encodings.filter(g=>g.active);if(!p){this.logger("info","Update publish quality, no change:",m);return}await u.setParameters(f),this.logger("info","Update publish quality, enabled rids:",m)},this.getStats=l=>this.pc.getStats(l),this.getCodecPreferences=(l,u)=>{if(l===M.VIDEO)return tg("video",u||"vp8");if(l===M.AUDIO){const f=this.isRedEnabled?"red":"opus",d=this.isRedEnabled?void 0:"red";return tg("audio",u??f,d)}},this.onIceCandidate=l=>{const{candidate:u}=l;if(!u){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:v0(u),peerType:ht.PUBLISHER_UNSPECIFIED}).catch(f=>{this.logger("warn","ICETrickle failed",f)})},this.setSfuClient=l=>{this.sfuClient=l},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const l=this.pc.signalingState;if(this.isIceRestarting||l==="have-local-offer"){this.logger("debug","ICE restart is already in progress");return}await this.negotiate({iceRestart:!0})},this.onNegotiationNeeded=()=>{this.negotiate().catch(l=>{var u;this.logger("error","Negotiation failed.",l),(u=this.onUnrecoverableError)==null||u.call(this)})},this.negotiate=async l=>{const u=await this.pc.createOffer(l);u.sdp&&(u.sdp=SP(u.sdp,this.isDtxEnabled),this.isPublishing(M.SCREEN_SHARE_AUDIO)&&(u.sdp=this.enableHighQualityAudio(u.sdp)));const f=this.getAnnouncedTracks(u.sdp);if(f.length===0)throw new Error("Can't negotiate without announcing any tracks");try{this.isIceRestarting=(l==null?void 0:l.iceRestart)??!1,await this.pc.setLocalDescription(u);const{response:d}=await this.sfuClient.setPublisher({sdp:u.sdp||"",tracks:f});if(d.error)throw new Error(d.error.message);await this.pc.setRemoteDescription({type:"answer",sdp:d.sdp})}finally{this.isIceRestarting=!1}this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(async d=>{try{const h=JSON.parse(d.iceCandidate);await this.pc.addIceCandidate(h)}catch(h){this.logger("warn","ICE candidate error",h,d)}})},this.enableHighQualityAudio=l=>{const u=this.transceiverCache.get(M.SCREEN_SHARE_AUDIO);if(!u)return l;const f=this.transceiverInitOrder.indexOf(M.SCREEN_SHARE_AUDIO),d=og(u,f,l);return bP(l,d)},this.getAnnouncedTracks=l=>{var u;return l=l||((u=this.pc.localDescription)==null?void 0:u.sdp),this.pc.getTransceivers().filter(f=>f.direction==="sendonly"&&f.sender.track).map(f=>{let d;this.transceiverCache.forEach((E,k)=>{E===f&&(d=k)});const h=f.sender.track;let p;const m=h.readyState==="live";m?(p=this.computeLayers(d,h)||[],this.trackLayersCache.set(d,p)):(p=this.trackLayersCache.get(d)||[],this.logger("debug",`Track ${M[d]} is ended. Announcing last known optimal layers`,p));const v=p.map(E=>({rid:E.rid||"",bitrate:E.maxBitrate||0,fps:E.maxFramerate||0,quality:Qx(E.rid||""),videoDimension:{width:E.width,height:E.height}})),g=[M.AUDIO,M.SCREEN_SHARE_AUDIO].includes(d),y=h.getSettings(),S=g&&y.channelCount===2,b=this.transceiverInitOrder.indexOf(d);return{trackId:h.id,layers:v,trackType:d,mid:og(f,b,l),stereo:S,dtx:g&&this.isDtxEnabled,red:g&&this.isRedEnabled,muted:!m}})},this.computeLayers=(l,u,f)=>{var g;const{settings:d}=this.state,h=d==null?void 0:d.video.target_resolution,p=(g=d==null?void 0:d.screensharing.target_resolution)==null?void 0:g.bitrate,m=f||this.publishOptsForTrack.get(l),v=ng(m==null?void 0:m.preferredCodec);return l===M.VIDEO?Xx(u,h,v,m):l===M.SCREEN_SHARE?tP(u,m,p):void 0},this.onIceCandidateError=l=>{const u=l instanceof RTCPeerConnectionIceErrorEvent&&`${l.errorCode}: ${l.errorText}`,f=this.pc.iceConnectionState,d=f==="connected"||f==="checking"?"debug":"warn";this.logger(d,"ICE Candidate error",u)},this.onIceConnectionStateChange=()=>{const l=this.pc.iceConnectionState;this.logger("debug","ICE Connection state changed to",l),this.state.callingState!==H.RECONNECTING&&(l==="failed"||l==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(u=>{var f;this.logger("error","ICE restart error",u),(f=this.onUnrecoverableError)==null||f.call(this)}))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingStateChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.logger=Ee(["Publisher",c]),this.pc=this.createPeerConnection(t),this.sfuClient=n,this.state=i,this.isDtxEnabled=s,this.isRedEnabled=o,this.onUnrecoverableError=a,this.unsubscribeOnIceRestart=r.on("iceRestart",l=>{l.peerType===ht.PUBLISHER_UNSPECIFIED&&this.restartIce().catch(u=>{var f;this.logger("warn","ICERestart failed",u),(f=this.onUnrecoverableError)==null||f.call(this)})}),this.unsubscribeChangePublishQuality=r.on("changePublishQuality",({videoSenders:l})=>{Kt("publisher.changePublishQuality",async()=>{for(const u of l){const{layers:f}=u,d=f.filter(h=>h.active);await this.changePublishQuality(d)}}).catch(u=>{this.logger("warn","Failed to change publish quality",u)})})}}class CP{constructor({sfuClient:t,dispatcher:n,state:r,connectionConfig:i,onUnrecoverableError:s,logTag:o}){this.isIceRestarting=!1,this.createPeerConnection=l=>{const u=new RTCPeerConnection(l);return u.addEventListener("icecandidate",this.onIceCandidate),u.addEventListener("track",this.handleOnTrack),u.addEventListener("icecandidateerror",this.onIceCandidateError),u.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),u.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),u},this.close=()=>{this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unregisterOnSubscriberOffer(),this.unregisterOnIceRestart(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("track",this.handleOnTrack),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange)},this.getStats=l=>this.pc.getStats(l),this.setSfuClient=l=>{this.sfuClient=l},this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),this.pc.signalingState==="have-remote-offer"){this.logger("debug","ICE restart is already in progress");return}if(this.pc.connectionState==="new"){this.logger("debug","ICE connection is not yet established, skipping restart.");return}const l=this.isIceRestarting;try{this.isIceRestarting=!0,await this.sfuClient.iceRestart({peerType:ht.SUBSCRIBER})}catch(u){throw this.isIceRestarting=l,u}},this.handleOnTrack=l=>{const[u]=l.streams,[f,d]=u.id.split(":"),h=this.state.participants.find(y=>y.trackLookupPrefix===f);this.logger("debug",`[onTrack]: Got remote ${d} track for userId: ${h==null?void 0:h.userId}`,l.track.id,l.track);const p=`${h==null?void 0:h.userId} ${d}:${f}`;l.track.addEventListener("mute",()=>{this.logger("info",`[onTrack]: Track muted: ${p}`)}),l.track.addEventListener("unmute",()=>{this.logger("info",`[onTrack]: Track unmuted: ${p}`)}),l.track.addEventListener("ended",()=>{this.logger("info",`[onTrack]: Track ended: ${p}`),this.state.removeOrphanedTrack(u.id)});const m=rP(d);if(!m)return this.logger("error",`Unknown track type: ${d}`);if(!h){this.logger("warn",`[onTrack]: Received track for unknown participant: ${f}`,l),this.state.registerOrphanedTrack({id:u.id,trackLookupPrefix:f,track:u,trackType:m});return}const v=Th(m);if(!v){this.logger("error",`Unknown track type: ${d}`);return}const g=h[v];g&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${l.track.kind} tracks for userId: ${h.userId}`),g.getTracks().forEach(y=>{y.stop(),g.removeTrack(y)})),this.state.updateParticipant(h.sessionId,{[v]:u})},this.onIceCandidate=l=>{const{candidate:u}=l;if(!u){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:v0(u),peerType:ht.SUBSCRIBER}).catch(f=>{this.logger("warn","ICETrickle failed",f)})},this.negotiate=async l=>{this.logger("info","Received subscriberOffer",l),await this.pc.setRemoteDescription({type:"offer",sdp:l.sdp}),this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(async f=>{try{const d=JSON.parse(f.iceCandidate);await this.pc.addIceCandidate(d)}catch(d){this.logger("warn","ICE candidate error",[d,f])}});const u=await this.pc.createAnswer();await this.pc.setLocalDescription(u),await this.sfuClient.sendAnswer({peerType:ht.SUBSCRIBER,sdp:u.sdp||""}),this.isIceRestarting=!1},this.onIceConnectionStateChange=()=>{const l=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",l),this.state.callingState!==H.RECONNECTING&&(this.isIceRestarting||(l==="failed"||l==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(u=>{var f;this.logger("error","ICE restart failed",u),(f=this.onUnrecoverableError)==null||f.call(this)})))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE gathering state changed",this.pc.iceGatheringState)},this.onIceCandidateError=l=>{const u=l instanceof RTCPeerConnectionIceErrorEvent&&`${l.errorCode}: ${l.errorText}`,f=this.pc.iceConnectionState,d=f==="connected"||f==="checking"?"debug":"warn";this.logger(d,"ICE Candidate error",u)},this.logger=Ee(["Subscriber",o]),this.sfuClient=t,this.state=r,this.onUnrecoverableError=s,this.pc=this.createPeerConnection(i);const a=Symbol("subscriberOffer");this.unregisterOnSubscriberOffer=n.on("subscriberOffer",l=>{Kt(a,()=>this.negotiate(l)).catch(u=>{this.logger("error","Negotiation failed.",u)})});const c=Symbol("iceRestart");this.unregisterOnIceRestart=n.on("iceRestart",l=>{Kt(c,async()=>{l.peerType===ht.SUBSCRIBER&&await this.restartIce()}).catch(u=>{var f;this.logger("error","ICERestart failed",u),(f=this.onUnrecoverableError)==null||f.call(this)})})}}const EP=e=>{const{endpoint:t,onMessage:n,logTag:r}=e,i=Ee(["SfuClientWS",r]),s=new WebSocket(t);return s.binaryType="arraybuffer",s.addEventListener("error",o=>{i("error","Signaling WS channel error",o)}),s.addEventListener("close",o=>{i("info","Signaling WS channel is closed",o)}),s.addEventListener("open",o=>{i("info","Signaling WS channel is open",o)}),s.addEventListener("message",o=>{try{const a=o.data instanceof ArrayBuffer?Qm.fromBinary(new Uint8Array(o.data)):Qm.fromJsonString(o.data.toString());n(a)}catch(a){i("error","Failed to decode a message. Check whether the Proto models match.",{event:o,error:a})}}),s},Ms=()=>{let e,t;const n=new Promise((a,c)=>{e=a,t=c});let r=!1,i=!1;return{promise:n,resolve:a=>{r=!0,e(a)},reject:a=>{i=!0,t(a)},isResolved:r,isRejected:i}};class Mn{constructor({dispatcher:t,credentials:n,sessionId:r,logTag:i,joinResponseTimeout:s=5e3,onSignalClose:o,streamClient:a}){this.iceTrickleBuffer=new Wx,this.isLeaving=!1,this.pingIntervalInMs=10*1e3,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5*1e3,this.restoreWebSocketConcurrencyTag=Symbol("recoverWebSocket"),this.joinResponseTask=Ms(),this.abortController=new AbortController,this.createWebSocket=()=>{this.signalWs=EP({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:u=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck(),this.dispatcher.dispatch(u,this.logTag)}}),this.signalWs.addEventListener("close",this.handleWebSocketClose),this.signalWs.addEventListener("error",this.restoreWebSocket),this.signalReady=new Promise(u=>{const f=()=>{this.signalWs.removeEventListener("open",f),u(this.signalWs)};this.signalWs.addEventListener("open",f)})},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("error",this.restoreWebSocket),this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.restoreWebSocket=()=>{Kt(this.restoreWebSocketConcurrencyTag,async()=>{var u;await((u=this.networkAvailableTask)==null?void 0:u.promise),this.logger("debug","Restoring SFU WS connection"),this.cleanUpWebSocket(),await Ln(500),this.createWebSocket()}).catch(u=>this.logger("debug","Can't restore WS connection",u))},this.handleWebSocketClose=()=>{var u;this.signalWs.removeEventListener("close",this.handleWebSocketClose),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),(u=this.onSignalClose)==null||u.call(this)},this.close=(u=Mn.NORMAL_CLOSURE,f)=>{this.signalWs.readyState===WebSocket.OPEN&&(this.logger("debug",`Closing SFU WS connection: ${u} - ${f}`),this.signalWs.close(u,`js-client: ${f}`),this.cleanUpWebSocket()),this.dispose()},this.dispose=()=>{var u;this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),(u=this.migrationTask)==null||u.resolve()},this.leaveAndClose=async u=>{await this.joinTask;try{this.isLeaving=!0,await this.notifyLeave(u)}catch(f){this.logger("debug","Error notifying SFU about leaving call",f)}this.close(Mn.NORMAL_CLOSURE,u.substring(0,115))},this.updateSubscriptions=async u=>(await this.joinTask,zn(()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:u}),this.abortController.signal)),this.setPublisher=async u=>(await this.joinTask,zn(()=>this.rpc.setPublisher({...u,sessionId:this.sessionId}),this.abortController.signal)),this.sendAnswer=async u=>(await this.joinTask,zn(()=>this.rpc.sendAnswer({...u,sessionId:this.sessionId}),this.abortController.signal)),this.iceTrickle=async u=>(await this.joinTask,zn(()=>this.rpc.iceTrickle({...u,sessionId:this.sessionId}),this.abortController.signal)),this.iceRestart=async u=>(await this.joinTask,zn(()=>this.rpc.iceRestart({...u,sessionId:this.sessionId}),this.abortController.signal)),this.updateMuteState=async(u,f)=>(await this.joinTask,this.updateMuteStates({muteStates:[{trackType:u,muted:f}]})),this.updateMuteStates=async u=>(await this.joinTask,zn(()=>this.rpc.updateMuteStates({...u,sessionId:this.sessionId}),this.abortController.signal)),this.sendStats=async u=>(await this.joinTask,zn(()=>this.rpc.sendStats({...u,sessionId:this.sessionId}),this.abortController.signal)),this.startNoiseCancellation=async()=>(await this.joinTask,zn(()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,zn(()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.enterMigration=async(u={})=>{var p;this.isLeaving=!0;const{timeout:f=7*1e3}=u;(p=this.migrationTask)==null||p.reject(new Error("Cancelled previous migration"));const d=this.migrationTask=Ms(),h=this.dispatcher.on("participantMigrationComplete",()=>{h(),clearTimeout(this.migrateAwayTimeout),d.resolve()});return this.migrateAwayTimeout=setTimeout(()=>{h(),d.reject(new Error(`Migration (${this.logTag}) failed to complete in ${f}ms`))},f),d.promise},this.join=async u=>{await this.signalReady,(this.joinResponseTask.isResolved||this.joinResponseTask.isRejected)&&(this.joinResponseTask=Ms());const f=this.joinResponseTask;let d;const h=this.dispatcher.on("joinResponse",p=>{this.logger("debug","Received joinResponse",p),clearTimeout(d),h(),this.keepAlive(),f.resolve(p)});return d=setTimeout(()=>{h(),f.reject(new Error('Waiting for "joinResponse" has timed out'))},this.joinResponseTimeout),await this.send(Is.create({requestPayload:{oneofKind:"joinRequest",joinRequest:f0.create({...u,sessionId:this.sessionId,token:this.credentials.token})}})),f.promise},this.ping=async()=>this.send(Is.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async u=>this.send(Is.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:u}}})),this.send=async u=>{await this.signalReady;const f=Is.toJson(u);if(this.signalWs.readyState!==WebSocket.OPEN){this.logger("debug","Signal WS is not open. Skipping message",f);return}this.logger("debug",`Sending message to: ${this.edgeName}`,f),this.signalWs.send(Is.toBinary(u))},this.keepAlive=()=>{clearInterval(this.keepAliveInterval),this.keepAliveInterval=setInterval(()=>{this.ping().catch(u=>{this.logger("error","Error sending healthCheckRequest to SFU",u)})},this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout(()=>{this.lastMessageTimestamp&&new Date().getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(Mn.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)},this.unhealthyTimeoutInMs)},this.dispatcher=t,this.sessionId=r||h0(),this.onSignalClose=o,this.credentials=n;const{server:c,token:l}=n;this.edgeName=c.edge_name,this.joinResponseTimeout=s,this.logTag=i,this.logger=Ee(["SfuClient",i]),this.rpc=Cx({baseUrl:c.url,interceptors:[bx({Authorization:`Bearer ${l}`}),Ox()==="trace"&&wx(this.logger,"trace")].filter(u=>!!u)}),this.unsubscribeIceTrickle=t.on("iceTrickle",u=>{this.iceTrickleBuffer.push(u)}),this.unsubscribeNetworkChanged=a.on("network.changed",u=>{var f;u.online?(f=this.networkAvailableTask)==null||f.resolve():this.networkAvailableTask=Ms()}),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN}get joinTask(){return this.joinResponseTask.promise}}Mn.NORMAL_CLOSURE=1e3;Mn.ERROR_CONNECTION_UNHEALTHY=4001;Mn.DISPOSE_OLD_SOCKET=4002;const kP=e=>({iceServers:e.map(t=>({urls:t.urls,username:t.username,credential:t.password}))}),TP=e=>async function(n){if(n.user.id===e.currentUserId)return;const{state:r}=e;n.call.created_by.id===e.currentUserId&&r.callingState===H.RINGING&&await e.join()},RP=e=>async function(n){if(n.user.id===e.currentUserId)return;const{call:r}=n,{session:i}=r;if(!i){e.logger("warn","No call session provided. Ignoring call.rejected event.",n);return}const s=i.rejected_by,{members:o,callingState:a}=e.state;if(a!==H.RINGING){e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",n);return}e.isCreatedByMe?o.filter(l=>l.user_id!==e.currentUserId).every(l=>s[l.user_id])&&(e.logger("info","everyone rejected, leaving the call"),await e.leave({reason:"ring: everyone rejected"})):s[r.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),await e.leave({reason:"ring: creator rejected"}))},_P=e=>function(){const{callingState:n}=e.state;n!==H.IDLE&&n!==H.LEFT&&e.leave({reason:"call.ended event received"}).catch(r=>{e.logger("error","Failed to leave call after call.ended ",r)})},IP=e=>e.on("callEnded",async t=>{if(e.state.callingState!==H.LEFT)try{e.state.setEndedAt(new Date);const n=Eo[t.reason];await e.leave({reason:`callEnded received: ${n}`})}catch(n){e.logger("error","Failed to leave call after being ended by the SFU",n)}}),xP=e=>function(n){const{currentGrants:r}=n;if(r){const{canPublishAudio:i,canPublishVideo:s,canScreenshare:o}=r,a={[ee.SEND_AUDIO]:i,[ee.SEND_VIDEO]:s,[ee.SCREENSHARE]:o},c=e.ownCapabilities.filter(l=>a[l]!==!1);Object.entries(a).forEach(([l,u])=>{u&&!c.includes(l)&&c.push(l)}),e.setOwnCapabilities(c)}},PP=(e,t)=>e.on("connectionQualityChanged",n=>{const{connectionQualityUpdates:r}=n;r&&t.updateParticipants(r.reduce((i,s)=>{const{sessionId:o,connectionQuality:a}=s;return i[o]={connectionQuality:a},i},{}))}),OP=(e,t)=>e.on("healthCheckResponse",n=>{const{participantCount:r}=n;r&&(t.setParticipantCount(r.total),t.setAnonymousParticipantCount(r.anonymous))}),NP=(e,t)=>e.on("error",n=>{n.error&&n.error.code!==ts.LIVE_ENDED||t.permissionsContext.hasPermission(ee.JOIN_BACKSTAGE)||t.leave({reason:"live ended"}).catch(r=>{t.logger("error","Failed to leave call after live ended",r)})}),AP=e=>e.on("error",t=>{if(!t.error)return;const n=Ee(["SfuClient"]),{error:r,reconnectStrategy:i}=t;n("error","SFU reported error",{code:ts[r.code],reconnectStrategy:he[i],message:r.message,shouldRetry:r.shouldRetry})}),DP=e=>function(n){const{pins:r}=n;e.setServerSidePins(r)},LP=e=>e.on("trackUnpublished",async t=>{const{cause:n,type:r,sessionId:i}=t,{localParticipant:s}=e.state;if(n===Co.MODERATION&&i===(s==null?void 0:s.sessionId)){const o=e.logger;o("info",`Local participant's ${M[r]} track is muted remotely`);try{r===M.VIDEO?await e.camera.disable():r===M.AUDIO?await e.microphone.disable():r===M.SCREEN_SHARE||r===M.SCREEN_SHARE_AUDIO?await e.screenShare.disable():o("warn","Unsupported track type to soft mute",M[r])}catch(a){o("error","Failed to stop publishing",a)}}}),MP=e=>function(n){const{participant:r}=n;if(!r)return;const i=Ah(e,r);e.updateOrAddParticipant(r.sessionId,Object.assign(r,i,{viewportVisibilityState:{videoTrack:Ze.UNKNOWN,screenShareTrack:Ze.UNKNOWN}}))},FP=e=>function(n){const{participant:r}=n;r&&e.setParticipants(i=>i.filter(s=>s.sessionId!==r.sessionId))},jP=e=>function(n){const{participant:r}=n;r&&e.updateParticipant(r.sessionId,r)},UP=e=>function(n){const{type:r,sessionId:i}=n;if(n.participant){const s=Ah(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:[...s.publishedTracks,r].filter(VP)}))},$P=e=>function(n){const{type:r,sessionId:i}=n;if(n.participant){const s=Ah(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:s.publishedTracks.filter(o=>o!==r)}))},VP=(e,t,n)=>n.indexOf(e)===t,Ah=(e,t)=>{const n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;const r={};for(const i of n){const s=Th(i.trackType);s&&(r[s]=i.track)}return r},BP=(e,t)=>e.on("dominantSpeakerChanged",n=>{var i;const{sessionId:r}=n;r!==((i=t.dominantSpeaker)==null?void 0:i.sessionId)&&t.setParticipants(s=>s.map(o=>o.sessionId===r?{...o,isDominantSpeaker:!0}:o.isDominantSpeaker?{...o,isDominantSpeaker:!1}:o))}),zP=(e,t)=>e.on("audioLevelChanged",n=>{const{audioLevels:r}=n;t.updateParticipants(r.reduce((i,s)=>(i[s.sessionId]={audioLevel:s.level,isSpeaking:s.isSpeaking},i),{}))}),HP=(e,t)=>{const n=e.state,r=[e.on("call.ended",_P(e)),IP(e),NP(t,e),AP(t),PP(t,n),OP(t,n),e.on("participantJoined",MP(n)),e.on("participantLeft",FP(n)),e.on("participantUpdated",jP(n)),e.on("trackPublished",UP(n)),e.on("trackUnpublished",$P(n)),zP(t,n),BP(t,n),e.on("callGrantsUpdated",xP(n)),e.on("pinsUpdated",DP(n)),LP(e)];return e.ringing&&r.push(E0(e)),()=>{r.forEach(i=>i())}},E0=e=>{const t={"call.accepted":TP(e),"call.rejected":RP(e)},n=Object.keys(t).map(r=>{const i=r;return e.on(i,t[i])});return()=>{n.forEach(r=>r())}},Dc=e=>{const t=[];return e.forEach(n=>{t.push(n)}),t},WP=e=>{const{sdk:t,...n}=e,r=k0(t),i=T0(t);return{sdkName:r,sdkVersion:i,...n}},k0=e=>e&&e.type===Or.REACT?"stream-react":e&&e.type===Or.REACT_NATIVE?"stream-react-native":"stream-js",T0=e=>e?`${e.major}.${e.minor}.${e.patch}`:"0.0.0-development",qP=({subscriber:e,publisher:t,state:n,datacenter:r,pollingIntervalInMs:i=2e3})=>{const s=Ee(["stats"]),o=async(p,m)=>p==="subscriber"&&e?e.getStats(m):p==="publisher"&&t?t.getStats(m):void 0,a=async(p,m)=>{const v=p==="subscriber"?e:t;if(!v)return[];const g=[];for(let y of m.getTracks()){const S=await v.getStats(y),b=ku(S,{trackKind:y.kind,kind:p});g.push(b)}return g},c=p=>{u.add(p),f()},l=p=>{u.delete(p),f()},u=new Set,f=async()=>{var b,E;const p={},m=new Set(u);if(m.size>0)for(let k of n.participants){if(!m.has(k.sessionId))continue;const T=k.isLocalParticipant?"publisher":"subscriber";try{const x=new MediaStream([...((b=k.videoStream)==null?void 0:b.getVideoTracks())||[],...((E=k.audioStream)==null?void 0:E.getAudioTracks())||[]]);p[k.sessionId]=await a(T,x),x.getTracks().forEach(j=>{x.removeTrack(j)})}catch(x){s("error",`Failed to collect stats for ${T} of ${k.userId}`,x)}}const[v,g]=await Promise.all([e.getStats().then(k=>ku(k,{kind:"subscriber",trackKind:"video"})).then(ag),t?t.getStats().then(k=>ku(k,{kind:"publisher",trackKind:"video"})).then(ag):R0()]),[y,S]=await Promise.all([o("subscriber"),t?o("publisher"):void 0]);n.setCallStatsReport({datacenter:r,publisherStats:g,subscriberStats:v,subscriberRawStats:y,publisherRawStats:S,participants:p,timestamp:Date.now()})};let d;if(i>0){const p=async()=>{await f().catch(m=>{s("debug","Failed to collect stats",m)}),d=setTimeout(p,i)};p()}return{getRawStatsForTrack:o,getStatsForStream:a,startReportingStatsFor:c,stopReportingStatsFor:l,stop:()=>{d&&clearTimeout(d)}}},ku=(e,t)=>{const{trackKind:n,kind:r}=t,i=r==="subscriber"?"inbound-rtp":"outbound-rtp",s=Dc(e),o=s.filter(a=>a.type===i&&a.kind===n).map(a=>{const c=a,l=s.find(d=>d.type==="codec"&&d.id===c.codecId),u=s.find(d=>d.type==="transport"&&d.id===c.transportId);let f;if(u&&u.dtlsState==="connected"){const d=s.find(h=>h.type==="candidate-pair"&&h.id===u.selectedCandidatePairId);f=d==null?void 0:d.currentRoundTripTime}return{bytesSent:c.bytesSent,bytesReceived:c.bytesReceived,codec:l==null?void 0:l.mimeType,currentRoundTripTime:f,frameHeight:c.frameHeight,frameWidth:c.frameWidth,framesPerSecond:c.framesPerSecond,jitter:c.jitter,kind:c.kind,qualityLimitationReason:c.qualityLimitationReason,rid:c.rid,ssrc:c.ssrc}});return{rawStats:e,streams:o,timestamp:Date.now()}},R0=e=>({rawReport:e??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",timestamp:Date.now()}),ag=e=>{const t=R0(e);let n=-1;const r=(c,l)=>c*l,i=new Set,s=e.streams,o=s.reduce((c,l)=>{c.totalBytesSent+=l.bytesSent||0,c.totalBytesReceived+=l.bytesReceived||0,c.averageJitterInMs+=l.jitter||0,c.averageRoundTripTimeInMs+=l.currentRoundTripTime||0;const u=r(l.frameWidth||0,l.frameHeight||0);return u>n&&(c.highestFrameWidth=l.frameWidth||0,c.highestFrameHeight=l.frameHeight||0,c.highestFramesPerSecond=l.framesPerSecond||0,n=u),i.add(l.qualityLimitationReason||""),c},t);s.length>0&&(o.averageJitterInMs=Math.round(o.averageJitterInMs/s.length*1e3),o.averageRoundTripTimeInMs=Math.round(o.averageRoundTripTimeInMs/s.length*1e3),o.codec=s[0].codec||"");const a=[i.has("cpu")&&"cpu",i.has("bandwidth")&&"bandwidth",i.has("other")&&"other"].filter(Boolean).join(", ");return a&&(o.qualityLimitationReasons=a),o};class KP{constructor(t,{options:n,clientDetails:r,subscriber:i,publisher:s,microphone:o,camera:a,state:c}){this.logger=Ee(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(f,d)=>{var p;const{hasBrowserPermission$:h}=f.state;(p=this.unsubscribeDevicePermissionsSubscription)==null||p.call(this),this.unsubscribeDevicePermissionsSubscription=At(ii([h,this.state.ownCapabilities$]),([m,v])=>{var y;(y=this.unsubscribeListDevicesSubscription)==null||y.call(this);const g=d==="mic"?v.includes(ee.SEND_AUDIO):v.includes(ee.SEND_VIDEO);if(!m||!g){this.inputDevices.set(d,{currentDevice:"",availableDevices:[],isPermitted:!1});return}this.unsubscribeListDevicesSubscription=At(ii([f.listDevices(),f.state.selectedDevice$]),([S,b])=>{const E=S.find(k=>k.deviceId===b);this.inputDevices.set(d,{currentDevice:(E==null?void 0:E.label)||b||"",availableDevices:S.map(k=>k.label),isPermitted:!0})})})},this.run=async()=>{var h;const[f,d]=await Promise.all([this.subscriber.getStats().then(Dc).then(JSON.stringify),((h=this.publisher)==null?void 0:h.getStats().then(Dc).then(JSON.stringify))??"[]"]);await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:f,publisherStats:d,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),deviceState:{oneofKind:void 0}})},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.run().catch(f=>{this.logger("warn","Failed to report stats",f)})},this.options.reporting_interval_ms))},this.stop=()=>{var f,d;(f=this.unsubscribeDevicePermissionsSubscription)==null||f.call(this),this.unsubscribeDevicePermissionsSubscription=void 0,(d=this.unsubscribeListDevicesSubscription)==null||d.call(this),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0},this.sfuClient=t,this.options=n,this.subscriber=i,this.publisher=s,this.microphone=o,this.camera=a,this.state=c;const{sdk:l,browser:u}=r;this.sdkName=k0(l),this.sdkVersion=T0(l),this.webRTCVersion=`${(u==null?void 0:u.name)||""}-${(u==null?void 0:u.version)||""}`||"N/A"}}const GP=.35;class JP{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(t,n)=>{const r=()=>{var i;(i=this.observer)==null||i.disconnect(),this.observer=null,this.elementHandlerMap.clear()};return this.observer=new IntersectionObserver(i=>{i.forEach(s=>{const o=this.elementHandlerMap.get(s.target);o==null||o(s)})},{root:t,...n,threshold:(n==null?void 0:n.threshold)??GP}),this.queueSet.size&&(this.queueSet.forEach(([i,s])=>{t.contains(i)&&(this.observer.observe(i),this.elementHandlerMap.set(i,s))}),this.queueSet.clear()),r},this.observe=(t,n)=>{const r=[t,n],i=()=>{var s;this.elementHandlerMap.delete(t),(s=this.observer)==null||s.unobserve(t),this.queueSet.delete(r)};return this.elementHandlerMap.has(t)?i:this.observer?(this.observer.root.contains(t)&&(this.elementHandlerMap.set(t,n),this.observer.observe(t)),i):(this.queueSet.add(r),i)}}}const cg={videoTrack:Ze.UNKNOWN,screenShareTrack:Ze.UNKNOWN},ga=Symbol("globalOverrideKey");class YP{constructor(t,n){this.viewportTracker=new JP,this.logger=Ee(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new ce({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(bt(r=>{const{[ga]:i,...s}=r;return{enabled:(i==null?void 0:i.enabled)!==!1,preferredResolution:i!=null&&i.enabled?i.dimension:void 0,participants:Object.fromEntries(Object.entries(s).map(([o,a])=>[o,{enabled:(a==null?void 0:a.enabled)!==!1,preferredResolution:a!=null&&a.enabled?a.dimension:void 0}])),isParticipantVideoEnabled:o=>{var a,c;return((a=r[o])==null?void 0:a.enabled)??((c=r[ga])==null?void 0:c.enabled)??!0}}}),Nt(1)),this.setVideoTrackSubscriptionOverrides=(r,i)=>i?Nr(this.videoTrackSubscriptionOverridesSubject,s=>({...s,...Object.fromEntries(i.map(o=>[o,r]))})):Nr(this.videoTrackSubscriptionOverridesSubject,r?{[ga]:r}:{}),this.applyTrackSubscriptions=(r=Wn.SLOW)=>{this.pendingSubscriptionsUpdate&&clearTimeout(this.pendingSubscriptionsUpdate);const i=()=>{var s;this.pendingSubscriptionsUpdate=null,(s=this.sfuClient)==null||s.updateSubscriptions(this.trackSubscriptions).catch(o=>{this.logger("debug","Failed to update track subscriptions",o)})};r?this.pendingSubscriptionsUpdate=setTimeout(i,r):i()},this.trackElementVisibility=(r,i,s)=>{const o=this.viewportTracker.observe(r,a=>{this.callState.updateParticipant(i,c=>{const l=c.viewportVisibilityState??cg,u=a.isIntersecting||document.fullscreenElement===r?Ze.VISIBLE:Ze.INVISIBLE;return{...c,viewportVisibilityState:{...l,[s]:u}}})});return()=>{o(),this.callState.updateParticipant(i,a=>{const c=a.viewportVisibilityState??cg;return{...a,viewportVisibilityState:{...c,[s]:Ze.UNKNOWN}}})}},this.setViewport=r=>this.viewportTracker.setViewport(r),this.bindVideoElement=(r,i,s)=>{const o=this.callState.findParticipantBySessionId(i);if(!o)return;const a=(m,v)=>{v&&(v.width===0||v.height===0)&&(this.logger("debug","Ignoring 0x0 dimension",o),v=void 0),this.callState.updateParticipantTracks(s,{[i]:{dimension:v}}),this.applyTrackSubscriptions(m)},c=this.callState.participants$.pipe(bt(m=>m.find(v=>v.sessionId===i)),Gd(m=>!!m),Ct(),Nt({bufferSize:1,refCount:!0}));let l;const u=o.isLocalParticipant?null:c.pipe(bt(m=>{var v;return(v=m.viewportVisibilityState)==null?void 0:v[s]}),Ct()).subscribe(m=>{if(!l){l=m??Ze.UNKNOWN;return}if(l=m??Ze.UNKNOWN,m===Ze.INVISIBLE)return a(Wn.MEDIUM,void 0);a(Wn.MEDIUM,{width:r.clientWidth,height:r.clientHeight})});let f;const d=o.isLocalParticipant?null:new ResizeObserver(()=>{const m=`${r.clientWidth},${r.clientHeight}`;if(!f){f=m;return}f===m||l===Ze.INVISIBLE||(a(Wn.SLOW,{width:r.clientWidth,height:r.clientHeight}),f=m)});d==null||d.observe(r);const h=o.isLocalParticipant?null:c.pipe(ha("publishedTracks"),bt(m=>s==="videoTrack"?Pn(m):vn(m)),Ct()).subscribe(m=>{m?a(Wn.FAST,{width:r.clientWidth,height:r.clientHeight}):a(Wn.FAST,void 0)});r.autoplay=!0,r.playsInline=!0,r.muted=!0;const p=c.pipe(ha(s==="videoTrack"?"videoStream":"screenShareStream")).subscribe(m=>{const v=s==="videoTrack"?m.videoStream:m.screenShareStream;r.srcObject!==v&&(r.srcObject=v??null,(El()||Vo())&&setTimeout(()=>{r.srcObject=v??null,r.play().catch(g=>{this.logger("warn","Failed to play stream",g)})},25))});return()=>{a(Wn.FAST,void 0),u==null||u.unsubscribe(),h==null||h.unsubscribe(),p.unsubscribe(),d==null||d.disconnect()}},this.bindAudioElement=(r,i,s)=>{const o=this.callState.findParticipantBySessionId(i);if(!o||o.isLocalParticipant)return;const a=this.callState.participants$.pipe(bt(f=>f.find(d=>d.sessionId===i)),Gd(f=>!!f),Ct(),Nt({bufferSize:1,refCount:!0})),c=a.pipe(ha(s==="screenShareAudioTrack"?"screenShareAudioStream":"audioStream")).subscribe(f=>{const d=s==="screenShareAudioTrack"?f.screenShareAudioStream:f.audioStream;r.srcObject!==d&&setTimeout(()=>{if(r.srcObject=d??null,r.srcObject){r.play().catch(p=>{this.logger("warn","Failed to play stream",p)});const{selectedDevice:h}=this.speaker.state;h&&"setSinkId"in r&&r.setSinkId(h)}})}),l="setSinkId"in r?this.speaker.state.selectedDevice$.subscribe(f=>{f&&r.setSinkId(f)}):null,u=ii([this.speaker.state.volume$,a.pipe(ha("audioVolume"))]).subscribe(([f,d])=>{r.volume=d.audioVolume??f});return r.autoplay=!0,()=>{l==null||l.unsubscribe(),u.unsubscribe(),c.unsubscribe()}},this.callState=t,this.speaker=n}setSfuClient(t){this.sfuClient=t}get trackSubscriptions(){const t=[];for(const n of this.callState.remoteParticipants){if(n.videoDimension&&Pn(n)){const r=this.videoTrackSubscriptionOverrides[n.sessionId]??this.videoTrackSubscriptionOverrides[ga];(r==null?void 0:r.enabled)!==!1&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:M.VIDEO,dimension:(r==null?void 0:r.dimension)??n.videoDimension})}n.screenShareDimension&&vn(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:M.SCREEN_SHARE,dimension:n.screenShareDimension}),kl(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:M.SCREEN_SHARE_AUDIO})}return t}get videoTrackSubscriptionOverrides(){return on(this.videoTrackSubscriptionOverrides$)}}class QP{constructor(){this.permissions=[],this.setPermissions=t=>{this.permissions=t||[]},this.setCallSettings=t=>{this.settings=t},this.hasPermission=t=>this.permissions.includes(t),this.canRequest=(t,n=this.settings)=>{if(!n)return!1;const{audio:r,video:i,screensharing:s}=n;switch(t){case ee.SEND_AUDIO:return r.access_request_enabled;case ee.SEND_VIDEO:return i.access_request_enabled;case ee.SCREENSHARE:return s.access_request_enabled;default:return!1}}}}class Fs{constructor(t,n={sortParticipantsBy:Ro}){this.name=t,this.options=n}}class XP{constructor(t){this.register=n=>{this.callTypes[n.name]=n},this.unregister=n=>{delete this.callTypes[n]},this.get=n=>(this.callTypes[n]||this.register(new Fs(n)),this.callTypes[n]),this.callTypes=t.reduce((n,r)=>(n[r.name]=r,n),{})}}const _0=new XP([new Fs("default",{sortParticipantsBy:Ro}),new Fs("development",{sortParticipantsBy:Ro}),new Fs("livestream",{sortParticipantsBy:sg}),new Fs("audio_room",{sortParticipantsBy:sg})]);class I0{constructor(t){this.permission=t,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=Ee(["permissions"]);const n=this.disposeController.signal;this.ready=(async()=>{const r=i=>{this.setState("prompt")};if(!ZP())return r();try{const i=await navigator.permissions.query({name:t.queryName});n.aborted||(this.setState(i.state),i.addEventListener("change",()=>this.setState(i.state),{signal:n}))}catch{r()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt({forcePrompt:t=!1,throwOnNotAllowed:n=!1}={}){await Kt(`permission-prompt-${this.permission.queryName}`,async()=>{if(await this.getState()!=="prompt"||this.wasPrompted&&!t){const r=this.state==="granted";if(!r&&n)throw new DOMException("Permission was not granted previously, and prompting again is not allowed","NotAllowedError");return r}try{this.wasPrompted=!0;const r=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return sO(r),this.setState("granted"),!0}catch(r){if(r instanceof DOMException&&r.name==="NotAllowedError"){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),n)throw r;return!1}throw this.logger("error","Failed to getUserMedia",{error:r,permission:this.permission}),r}})}listen(t){return this.listeners.add(t),this.state&&t(this.state),()=>this.listeners.delete(t)}asObservable(){return DR(t=>this.listen(t),(t,n)=>n()).pipe(bt(t=>t!=="denied"))}setState(t){this.state!==t&&(this.state=t,this.listeners.forEach(n=>n(t)))}}function ZP(){var e;return!it()&&typeof navigator<"u"&&!!((e=navigator.permissions)!=null&&e.query)}const lg=Symbol("uninitialized");function fs(e){let t=lg;return()=>(t===lg&&(t=e()),t)}const Dh=(e,t)=>di((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some(i=>i.kind===t&&i.label==="")&&(await e.prompt({throwOnNotAllowed:!0}),n=await navigator.mediaDevices.enumerateDevices()),n.filter(i=>i.kind===t&&i.label!==""&&i.deviceId!=="default")})()),eO=()=>typeof document>"u"?!1:"setSinkId"in document.createElement("audio"),x0={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},P0={video:{width:1280,height:720}},ns=fs(()=>new I0({constraints:x0,queryName:"microphone"})),Lc=fs(()=>new I0({constraints:P0,queryName:"camera"})),Tl=fs(()=>navigator.mediaDevices.addEventListener?Kd(navigator.mediaDevices,"devicechange").pipe(bt(()=>{}),LR(500)):di([])),tO=fs(()=>vh(Tl(),ns().asObservable()).pipe(bl(void 0),Sl(()=>Dh(ns(),"audioinput")),Nt(1))),nO=fs(()=>vh(Tl(),Lc().asObservable()).pipe(bl(void 0),Sl(()=>Dh(Lc(),"videoinput")),Nt(1))),rO=fs(()=>vh(Tl(),ns().asObservable()).pipe(bl(void 0),Sl(()=>Dh(ns(),"audiooutput")),Nt(1))),O0=async e=>{const t=await navigator.mediaDevices.getUserMedia(e);return Vo()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t},N0=async e=>{const t={audio:{...x0.audio,...e}};try{return await ns().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await O0(t)}catch(n){if(n instanceof OverconstrainedError&&(e!=null&&e.deviceId)){const{deviceId:r,...i}=e;return Ee(["devices"])("warn","Failed to get audio stream, will try again with relaxed contraints",{error:n,constraints:t,relaxedContraints:i}),N0(i)}throw Ee(["devices"])("error","Failed to get audio stream",{error:n,constraints:t}),n}},A0=async e=>{const t={video:{...P0.video,...e}};try{return await Lc().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await O0(t)}catch(n){if(n instanceof OverconstrainedError&&(e!=null&&e.deviceId)){const{deviceId:r,...i}=e;return Ee(["devices"])("warn","Failed to get video stream, will try again with relaxed contraints",{error:n,constraints:t,relaxedContraints:i}),A0(i)}throw Ee(["devices"])("error","Failed to get video stream",{error:n,constraints:t}),n}},iO=async e=>{try{return await navigator.mediaDevices.getDisplayMedia({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include",...e})}catch(t){throw Ee(["devices"])("error","Failed to get screen share stream",t),t}},Mc=typeof navigator<"u"&&typeof navigator.mediaDevices<"u"?Tl().pipe(bl(void 0),Sl(()=>navigator.mediaDevices.enumerateDevices()),Nt(1)):void 0,sO=e=>{e.active&&(e.getTracks().forEach(t=>{t.stop()}),typeof e.release=="function"&&e.release())};class Lh{constructor(t,n,r){this.call=t,this.state=n,this.trackType=r,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach(i=>i())},this.logger=Ee([`${M[r].toLowerCase()} manager`]),Mc&&!it()&&(this.trackType===M.AUDIO||this.trackType===M.VIDEO)&&this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return this.state.status==="enabled"}async enable(){this.state.prevStatus=this.state.optimisticStatus,this.state.optimisticStatus!=="enabled"&&(this.state.setPendingStatus("enabled"),await Cu(this.statusChangeConcurrencyTag,async t=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}}))}async disable(t=!1){this.state.prevStatus=this.state.optimisticStatus,!(!t&&this.state.optimisticStatus==="disabled")&&(this.state.setPendingStatus("disabled"),await Cu(this.statusChangeConcurrencyTag,async n=>{try{const r=t||this.state.disableMode==="stop-tracks";await this.muteStream(r),this.state.setStatus("disabled")}finally{n.aborted||this.state.setPendingStatus(this.state.status)}}))}async statusChangeSettled(){await iP(this.statusChangeConcurrencyTag)}async resume(){this.state.prevStatus==="enabled"&&this.state.status!=="enabled"&&await this.enable()}async toggle(){return this.state.optimisticStatus==="enabled"?await this.disable():await this.enable()}registerFilter(t){const n={start:t,stop:void 0};return{registered:Kt(this.filterRegistrationConcurrencyTag,async()=>{this.filters.push(n),await this.applySettingsToStream()}),unregister:()=>Kt(this.filterRegistrationConcurrencyTag,async()=>{var i;(i=n.stop)==null||i.call(n),this.filters=this.filters.filter(s=>s!==n),await this.applySettingsToStream()})}}setDefaultConstraints(t){this.state.setDefaultConstraints(t)}async select(t){if(it())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const n=this.state.selectedDevice;if(t!==n)try{this.state.setDevice(t),await this.applySettingsToStream()}catch(r){throw this.state.setDevice(n),r}}async applySettingsToStream(){await Cu(this.statusChangeConcurrencyTag,async()=>{this.enabled&&(await this.muteStream(),await this.unmuteStream())})}getTracks(){var t;return((t=this.state.mediaStream)==null?void 0:t.getTracks())??[]}async muteStream(t=!0){if(!this.state.mediaStream)return;this.logger("debug",`${t?"Stopping":"Disabling"} stream`),this.call.state.callingState===H.JOINED&&await this.stopPublishStream(t),this.muteLocalStream(t),this.getTracks().every(r=>r.readyState==="ended")&&(this.state.mediaStream&&typeof this.state.mediaStream.release=="function"&&this.state.mediaStream.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach(r=>{var i;return(i=r.stop)==null?void 0:i.call(r)}))}muteTracks(){this.getTracks().forEach(t=>{t.enabled&&(t.enabled=!1)})}unmuteTracks(){this.getTracks().forEach(t=>{t.enabled||(t.enabled=!0)})}stopTracks(){this.getTracks().forEach(t=>{t.readyState==="live"&&t.stop()})}muteLocalStream(t){this.state.mediaStream&&(t?this.stopTracks():this.muteTracks())}async unmuteStream(){this.logger("debug","Starting stream");let t,n;if(this.state.mediaStream&&this.getTracks().every(r=>r.readyState==="live"))t=this.state.mediaStream,this.unmuteTracks();else{const i={...this.state.defaultConstraints,deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0},s=o=>async a=>{if(!o)return a;const c=await o;return a.getTracks().forEach(l=>{const u=l.stop;l.stop=function(){u.call(l),c.getTracks().forEach(d=>{d.kind===l.kind&&d.stop()})}}),c.getTracks().forEach(l=>{const u=()=>{a.getTracks().forEach(f=>{l.kind===f.kind&&(f.stop(),f.dispatchEvent(new Event("ended")))})};l.addEventListener("ended",u),this.subscriptions.push(()=>{l.removeEventListener("ended",u)})}),a};n=this.getStream(i),t=await this.filters.reduce((o,a)=>o.then(c=>{const{stop:l,output:u}=a.start(c);return a.stop=l,u}).then(s(o),c=>(this.logger("warn","Filter failed to start and will be ignored",c),o)),n)}if(this.call.state.callingState===H.JOINED&&await this.publishStream(t),this.state.mediaStream!==t){this.state.setMediaStream(t,await n);const r=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout(()=>{this.isTrackStoppedDueToTrackEnd=!1},2e3),await this.disable())};this.getTracks().forEach(i=>{i.addEventListener("ended",r),this.subscriptions.push(()=>i.removeEventListener("ended",r))})}}get mediaDeviceKind(){return this.trackType===M.AUDIO?"audioinput":this.trackType===M.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(At(ii([Mc.pipe(FR()),this.state.selectedDevice$]),async([[t,n],r])=>{try{if(!r)return;await this.statusChangeSettled();let i=!1,s=!1;const o=this.findDeviceInList(n,r),a=this.findDeviceInList(t,r);!o&&a?i=!0:o&&a&&o.deviceId===a.deviceId&&o.groupId!==a.groupId&&(s=!0),i&&(await this.disable(),await this.select(void 0)),s&&(this.isTrackStoppedDueToTrackEnd&&this.state.status==="disabled"?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(i){this.logger("warn","Unexpected error while handling disconnected or replaced device",i)}}))}findDeviceInList(t,n){return t.find(r=>r.deviceId===n&&r.kind===this.mediaDeviceKind)}}class Mh{constructor(t="stop-tracks",n){this.disableMode=t,this.statusSubject=new ce(void 0),this.optimisticStatusSubject=new ce(void 0),this.mediaStreamSubject=new ce(void 0),this.selectedDeviceSubject=new ce(void 0),this.defaultConstraintsSubject=new ce(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ct()),this.status$=this.statusSubject.asObservable().pipe(Ct()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(Ct()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.getCurrentValue=on,this.setCurrentValue=Nr,this.hasBrowserPermission$=n?n.asObservable().pipe(Nt(1)):Gb(!0)}get status(){return this.getCurrentValue(this.status$)}get optimisticStatus(){return this.getCurrentValue(this.optimisticStatus$)}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get mediaStream(){return this.getCurrentValue(this.mediaStream$)}setStatus(t){this.setCurrentValue(this.statusSubject,t)}setPendingStatus(t){this.setCurrentValue(this.optimisticStatusSubject,t)}setMediaStream(t,n){this.setCurrentValue(this.mediaStreamSubject,t),n&&this.setDevice(this.getDeviceIdFromStream(n))}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}get defaultConstraints(){return this.getCurrentValue(this.defaultConstraints$)}setDefaultConstraints(t){this.setCurrentValue(this.defaultConstraintsSubject,t)}}class oO extends Mh{constructor(){super("stop-tracks",Lc()),this.directionSubject=new ce(void 0),this.direction$=this.directionSubject.asObservable().pipe(Ct())}get direction(){return this.getCurrentValue(this.direction$)}setDirection(t){this.setCurrentValue(this.directionSubject,t)}setMediaStream(t,n){var r;if(super.setMediaStream(t,n),t){const i=it()?this.direction:((r=t.getVideoTracks()[0])==null?void 0:r.getSettings().facingMode)==="environment"?"back":"front";this.setDirection(i)}}getDeviceIdFromStream(t){const[n]=t.getVideoTracks();return n==null?void 0:n.getSettings().deviceId}}const ug=()=>/Mobi/i.test(navigator.userAgent);class aO extends Lh{constructor(t){super(t,new oO,M.VIDEO),this.targetResolution={width:1280,height:720}}async selectDirection(t){ug()?(this.state.setDirection(t),this.state.setDevice(void 0),await this.applySettingsToStream()):this.logger("warn","Camera direction ignored for desktop devices")}async flip(){const t=this.state.direction==="front"?"back":"front";await this.selectDirection(t)}async selectTargetResolution(t){if(this.targetResolution.height=t.height,this.targetResolution.width=t.width,this.state.optimisticStatus==="enabled")try{await this.statusChangeSettled()}catch(n){this.logger("warn","could not apply target resolution",n)}if(this.enabled&&this.state.mediaStream){const[n]=this.state.mediaStream.getVideoTracks();if(!n)return;const{width:r,height:i}=n.getSettings();(r!==this.targetResolution.width||i!==this.targetResolution.height)&&(await this.applySettingsToStream(),this.logger("debug",`${r}x${i} target resolution applied to media stream`))}}setPreferredCodec(t){this.call.updatePublishOptions({preferredCodec:t})}getDevices(){return nO()}getStream(t){return t.width=this.targetResolution.width,t.height=this.targetResolution.height,!t.deviceId&&this.state.direction&&ug()&&(t.facingMode=this.state.direction==="front"?"user":"environment"),A0(t)}publishStream(t){return this.call.publishVideoStream(t)}stopPublishStream(t){return this.call.stopPublish(M.VIDEO,t)}}class cO extends Mh{constructor(t){super(t,ns()),this.speakingWhileMutedSubject=new ce(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(Ct())}get speakingWhileMuted(){return this.getCurrentValue(this.speakingWhileMuted$)}setSpeakingWhileMuted(t){this.setCurrentValue(this.speakingWhileMutedSubject,t)}getDeviceIdFromStream(t){const[n]=t.getAudioTracks();return n==null?void 0:n.getSettings().deviceId}}const lO=500,uO=150,dO=128,fO=(e,t,n={})=>{const{detectionFrequencyInMs:r=lO,audioLevelThreshold:i=uO,fftSize:s=dO,destroyStreamOnStop:o=!0}=n,a=new AudioContext,c=a.createAnalyser();c.fftSize=s;const l=a.createMediaStreamSource(e);l.connect(c);const u=setInterval(()=>{var m;const f=new Uint8Array(c.frequencyBinCount);c.getByteFrequencyData(f);const d=f.some(v=>v>=i),h=f.reduce((v,g)=>v+g,0)/f.length,p=h>i?100:Math.round(h/i*100);(m=e.getAudioTracks()[0])!=null&&m.enabled?t({isSoundDetected:d,audioLevel:p}):t({isSoundDetected:!1,audioLevel:0})},r);return async function(){clearInterval(u),l.disconnect(),c.disconnect(),a.state!=="closed"&&await a.close(),o&&e.getTracks().forEach(d=>{d.stop(),e.removeTrack(d)})}},hO=.2;class pO{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(){try{this.cleanupAudioStream();const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",async s=>{await this.pc2.addIceCandidate(s.candidate)}),this.pc2.addEventListener("icecandidate",async s=>{await this.pc1.addIceCandidate(s.candidate)}),t.getTracks().forEach(s=>this.pc1.addTrack(s,t));const n=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(n),await this.pc1.setLocalDescription(n);const r=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(r),await this.pc2.setLocalDescription(r),t.getAudioTracks().forEach(s=>s.enabled=!1)}catch(t){console.error("Error connecting and negotiating between PeerConnections:",t)}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream(),this.intervalId&&clearInterval(this.intervalId)}onSpeakingDetectedStateChange(t){return this.intervalId=setInterval(async()=>{const n=await this.pc1.getStats(),i=Dc(n).find(s=>s.type==="media-source"&&s.kind==="audio");if(i){const{audioLevel:s}=i;s&&(s>=hO?t({isSoundDetected:!0,audioLevel:s}):t({isSoundDetected:!1,audioLevel:0}))}},1e3),()=>{clearInterval(this.intervalId)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach(t=>t.stop()),typeof this.audioStream.release=="function"&&this.audioStream.release())}}class mO extends Lh{constructor(t,n=it()?"disable-tracks":"stop-tracks"){super(t,new cO(n),M.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(At(ii([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),async([r,i,s,o])=>{try{if(r===H.LEFT&&await this.stopSpeakingWhileMutedDetection(),r!==H.JOINED||!this.speakingWhileMutedNotificationEnabled)return;i.includes(ee.SEND_AUDIO)?o==="disabled"?await this.startSpeakingWhileMutedDetection(s):await this.stopSpeakingWhileMutedDetection():await this.stopSpeakingWhileMutedDetection()}catch(a){this.logger("warn","Could not enable speaking while muted",a)}})),this.subscriptions.push(At(this.call.state.callingState$,r=>{var s,o;if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;((o=(s=this.call.state.settings)==null?void 0:s.audio.noise_cancellation)==null?void 0:o.mode)===bu.AUTO_ON&&r===H.JOINED?this.noiseCancellationRegistration.then(()=>{var a;return(a=this.noiseCancellation)==null?void 0:a.enable()}).catch(a=>(this.logger("warn","Failed to enable noise cancellation",a),this.call.notifyNoiseCancellationStopped())):r===H.LEFT&&this.noiseCancellationRegistration.then(()=>{var a;return(a=this.noiseCancellation)==null?void 0:a.disable()}).catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}))}async enableNoiseCancellation(t){if(it())throw new Error("Noise cancellation is not supported in React Native");const{ownCapabilities:n,settings:r}=this.call.state;if(!n.includes(ee.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");const s=r==null?void 0:r.audio.noise_cancellation;if(!s||s.mode===bu.DISABLED)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=t,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",a=>{a?this.call.notifyNoiseCancellationStarting().catch(c=>{this.logger("warn","notifyNoiseCancellationStart failed",c)}):this.call.notifyNoiseCancellationStopped().catch(c=>{this.logger("warn","notifyNoiseCancellationStop failed",c)})});const o=this.registerFilter(t.toFilter());this.noiseCancellationRegistration=o.registered,this.unregisterNoiseCancellation=o.unregister,await this.noiseCancellationRegistration,s.mode===bu.AUTO_ON&&this.call.state.callingState===H.JOINED&&t.enable()}catch(o){this.logger("warn","Failed to enable noise cancellation",o),await this.disableNoiseCancellation().catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}}async disableNoiseCancellation(){var t;if(it())throw new Error("Noise cancellation is not supported in React Native");await(((t=this.unregisterNoiseCancellation)==null?void 0:t.call(this))??Promise.resolve()).then(()=>{var n;return(n=this.noiseCancellation)==null?void 0:n.disable()}).then(()=>{var n;return(n=this.noiseCancellationChangeUnsubscribe)==null?void 0:n.call(this)}).catch(n=>{this.logger("warn","Failed to unregister noise cancellation",n)}),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,this.state.status==="disabled"&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}getDevices(){return tO()}getStream(t){return N0(t)}publishStream(t){return this.call.publishAudioStream(t)}stopPublishStream(t){return this.call.stopPublish(M.AUDIO,t)}async startSpeakingWhileMutedDetection(t){await Kt(this.soundDetectorConcurrencyTag,async()=>{var n;if(await this.stopSpeakingWhileMutedDetection(),it()){this.rnSpeechDetector=new pO,await this.rnSpeechDetector.start();const r=(n=this.rnSpeechDetector)==null?void 0:n.onSpeakingDetectedStateChange(i=>{this.state.setSpeakingWhileMuted(i.isSoundDetected)});this.soundDetectorCleanup=()=>{var i;r(),(i=this.rnSpeechDetector)==null||i.stop(),this.rnSpeechDetector=void 0}}else{const r=await this.getStream({deviceId:t});this.soundDetectorCleanup=fO(r,i=>{this.state.setSpeakingWhileMuted(i.isSoundDetected)})}})}async stopSpeakingWhileMutedDetection(){await Kt(this.soundDetectorConcurrencyTag,async()=>{if(!this.soundDetectorCleanup)return;const t=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await t()})}}class gO extends Mh{constructor(){super(...arguments),this.audioEnabledSubject=new ce(!0),this.settingsSubject=new ce(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(Ct()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=t=>{const[n]=t.getTracks();return n==null?void 0:n.getSettings().deviceId}}get audioEnabled(){return this.getCurrentValue(this.audioEnabled$)}setAudioEnabled(t){this.setCurrentValue(this.audioEnabledSubject,t)}get settings(){return this.getCurrentValue(this.settings$)}setSettings(t){this.setCurrentValue(this.settingsSubject,t)}}class vO extends Lh{constructor(t){super(t,new gO,M.SCREEN_SHARE),this.subscriptions.push(At(t.state.settings$,n=>{const r=n==null?void 0:n.screensharing.target_resolution;r&&this.setDefaultConstraints({video:{width:r.width,height:r.height}})}))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){var t;this.state.setAudioEnabled(!1),(t=this.call.publisher)!=null&&t.isPublishing(M.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(M.SCREEN_SHARE_AUDIO,!0)}getSettings(){return this.state.settings}setSettings(t){this.state.setSettings(t)}getDevices(){return Gb([])}getStream(t){return this.state.audioEnabled||(t.audio=!1),iO(t)}publishStream(t){return this.call.publishScreenShareStream(t)}async stopPublishStream(t){await this.call.stopPublish(M.SCREEN_SHARE,t),await this.call.stopPublish(M.SCREEN_SHARE_AUDIO,t)}async select(t){throw new Error("This method is not supported in for Screen Share")}}class yO{constructor(){this.selectedDeviceSubject=new ce(""),this.volumeSubject=new ce(1),this.isDeviceSelectionSupported=eO(),this.getCurrentValue=on,this.setCurrentValue=Nr,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Ct()),this.volume$=this.volumeSubject.asObservable().pipe(Ct())}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get volume(){return this.getCurrentValue(this.volume$)}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}setVolume(t){this.setCurrentValue(this.volumeSubject,t)}}class SO{constructor(t){this.state=new yO,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach(n=>n.unsubscribe())},this.call=t,Mc&&!it()&&this.subscriptions.push(ii([Mc,this.state.selectedDevice$]).subscribe(([n,r])=>{if(!r)return;n.find(s=>s.deviceId===r&&s.kind==="audiooutput")||this.select("")}))}listDevices(){if(it())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return rO()}select(t){if(it())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(t)}setVolume(t){if(it())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(t)}setParticipantVolume(t,n){if(it())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(n&&(n<0||n>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(t,{audioVolume:n})}}class Ps{constructor({type:t,id:n,streamClient:r,members:i,ownCapabilities:s,sortParticipantsBy:o,clientStore:a,ringing:c=!1,watching:l=!1}){this.state=new C0,this.permissionsContext=new QP,this.dispatcher=new Hx,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=he.UNSPECIFIED,this.fastReconnectDeadlineSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.handleOwnCapabilitiesUpdated=async d=>{if(this.permissionsContext.setPermissions(d),!this.publisher)return;const h={[ee.SEND_AUDIO]:M.AUDIO,[ee.SEND_VIDEO]:M.VIDEO,[ee.SCREENSHARE]:M.SCREEN_SHARE};for(const[p,m]of Object.entries(h))if(!this.permissionsContext.hasPermission(p))try{switch(m){case M.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case M.VIDEO:this.camera.enabled&&await this.camera.disable();break;case M.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable();break}}catch(g){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",g)}},this.on=(d,h)=>{if(ig(d))return this.dispatcher.on(d,h);const p=this.streamClient.on(d,m=>{const v=m;v.call_cid&&v.call_cid===this.cid&&h(v)});return this.streamClientEventHandlers.set(h,p),()=>{this.off(d,h)}},this.off=(d,h)=>{if(ig(d))return this.dispatcher.off(d,h);const p=this.streamClientEventHandlers.get(h);p&&p()},this.leave=async({reject:d=!1,reason:h="user is leaving the call"}={})=>{await Kt(this.joinLeaveConcurrencyTag,async()=>{var v,g,y,S,b;const p=this.state.callingState;if(p===H.LEFT)throw new Error("Cannot leave call that has already been left.");if(p===H.JOINING&&await new Promise(k=>{this.state.callingState$.pipe(Gd(T=>T!==H.JOINED,!0)).subscribe(()=>k())}),d&&this.ringing){const E=this.state.remoteParticipants.length>0;this.isCreatedByMe&&!E&&p===H.RINGING?await this.reject():p===H.RINGING&&await this.reject()}(v=this.statsReporter)==null||v.stop(),this.statsReporter=void 0,(g=this.sfuStatsReporter)==null||g.stop(),this.sfuStatsReporter=void 0,(y=this.subscriber)==null||y.close(),this.subscriber=void 0,(S=this.publisher)==null||S.close({stopTracks:!0}),this.publisher=void 0,await((b=this.sfuClient)==null?void 0:b.leaveAndClose(h)),this.sfuClient=void 0,this.dynascaleManager.setSfuClient(void 0),this.state.setCallingState(H.LEFT),this.leaveCallHooks.forEach(E=>E()),this.initialized=!1,this.hasJoinedOnce=!1,this.clientStore.unregisterCall(this),this.camera.dispose(),this.microphone.dispose(),this.screenShare.dispose(),this.speaker.dispose();const m=[];this.camera.stopOnLeave&&m.push(this.camera.disable(!0)),this.microphone.stopOnLeave&&m.push(this.microphone.disable(!0)),this.screenShare.stopOnLeave&&m.push(this.screenShare.disable(!0)),await Promise.all(m)})},this.get=async d=>{await this.setup();const h=await this.streamClient.get(this.streamClientBasePath,d);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(d!=null&&d.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(!1),h},this.getOrCreate=async d=>{await this.setup();const h=await this.streamClient.post(this.streamClientBasePath,d);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(d!=null&&d.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(!1),h},this.create=async d=>this.getOrCreate(d),this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post(`${this.streamClientBasePath}/accept`),this.reject=async d=>this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:d}),this.join=async d=>{var T,x,j;await this.setup();const h=this.state.callingState;if([H.JOINED,H.JOINING].includes(h))throw new Error("Illegal State: call.join() shall be called only once");this.joinCallData=d,this.logger("debug","Starting join flow"),this.state.setCallingState(H.JOINING);const p=this.reconnectStrategy===he.MIGRATE,m=this.reconnectStrategy===he.REJOIN,v=this.reconnectStrategy===he.FAST;let g=(T=this.sfuStatsReporter)==null?void 0:T.options;if(!this.credentials||!g||m||p)try{const P=await this.doJoinRequest(d);this.credentials=P.credentials,g=P.stats_options}catch(P){throw this.state.setCallingState(h),P}const y=this.sfuClient,S=y==null?void 0:y.sessionId,b=!!(y!=null&&y.isHealthy),E=m||p||!b?new Mn({logTag:String(this.sfuClientTag++),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,sessionId:m?void 0:S,onSignalClose:()=>this.handleSfuSignalClose(E)}):y;this.sfuClient=E,this.dynascaleManager.setSfuClient(E);const k=Zm();if(y!==E){const P=await Bx("recvonly"),V=this.reconnectStrategy!==he.UNSPECIFIED?this.getReconnectDetails(d==null?void 0:d.migrating_from,S):void 0,{callState:N,fastReconnectDeadlineSeconds:D}=await E.join({subscriberSdp:P,clientDetails:k,fastReconnect:v,reconnectDetails:V});this.fastReconnectDeadlineSeconds=D,N&&this.state.updateFromSfuCallState(N,E.sessionId,V)}if(p||this.state.setCallingState(H.JOINED),this.hasJoinedOnce=!0,v)await this.restoreICE(E,{includeSubscriber:!1});else{const P=kP(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:E,connectionConfig:P,clientDetails:k,statsOptions:g,closePreviousInstances:!p})}if(m){const P=he[this.reconnectStrategy];await(y==null?void 0:y.leaveAndClose(`Closing previous WS after reconnect with strategy: ${P}`))}else b||y==null||y.close(Mn.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");this.deviceSettingsAppliedOnce||(await this.applyDeviceConfig(!0),this.deviceSettingsAppliedOnce=!0),(x=this.joinCallData)==null||delete x.ring,(j=this.joinCallData)==null||delete j.notify,this.logger("info",`Joined call ${this.cid}`)},this.getReconnectDetails=(d,h)=>{var g;const p=this.reconnectStrategy,m=p===he.REJOIN,v=((g=this.publisher)==null?void 0:g.getAnnouncedTracks())||[];return{strategy:p,announcedTracks:v,subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:d||"",previousSessionId:m&&h||""}},this.restoreICE=async(d,h={})=>{const{includeSubscriber:p=!0,includePublisher:m=!0}=h;this.subscriber&&(this.subscriber.setSfuClient(d),p&&await this.subscriber.restartIce()),this.publisher&&(this.publisher.setSfuClient(d),m&&await this.publisher.restartIce())},this.initPublisherAndSubscriber=d=>{var S,b,E,k;const{sfuClient:h,connectionConfig:p,clientDetails:m,statsOptions:v,closePreviousInstances:g}=d;if(g&&this.subscriber&&this.subscriber.close(),this.subscriber=new CP({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:p,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(he.REJOIN).catch(T=>{this.logger("warn","[Reconnect] Error reconnecting after a subscriber error",T)})}}),!(((S=this.streamClient.user)==null?void 0:S.type)==="anonymous")){g&&this.publisher&&this.publisher.close({stopTracks:!1});const T=(b=this.state.settings)==null?void 0:b.audio,x=!!(T!=null&&T.opus_dtx_enabled),j=!!(T!=null&&T.redundant_coding_enabled);this.publisher=new wP({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:p,isDtxEnabled:x,isRedEnabled:j,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(he.REJOIN).catch(P=>{this.logger("warn","[Reconnect] Error reconnecting after a publisher error",P)})}})}(E=this.statsReporter)==null||E.stop(),this.statsReporter=qP({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:h.edgeName}),(k=this.sfuStatsReporter)==null||k.stop(),(v==null?void 0:v.reporting_interval_ms)>0&&(this.sfuStatsReporter=new KP(h,{clientDetails:m,options:v,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state}),this.sfuStatsReporter.start())},this.doJoinRequest=async d=>{const h=await this.streamClient.getLocationHint(),p={...d,location:h},m=await this.streamClient.post(`${this.streamClientBasePath}/join`,p);return this.state.updateFromCallResponse(m.call),this.state.setMembers(m.members),this.state.setOwnCapabilities(m.own_capabilities),d!=null&&d.ring&&!this.ringing&&this.ringingSubject.next(!0),this.ringing&&!this.isCreatedByMe&&await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),m},this.handleSfuSignalClose=d=>{this.logger("debug","[Reconnect] SFU signal connection closed"),!d.isLeaving&&this.reconnect(he.REJOIN).catch(h=>{this.logger("warn","[Reconnect] Error reconnecting",h)})},this.reconnect=async d=>Kt(this.reconnectConcurrencyTag,async()=>{var h;this.logger("info",`[Reconnect] Reconnecting with strategy ${he[d]}`),this.reconnectStrategy=d;do{this.reconnectStrategy!==he.FAST&&this.reconnectAttempts++;const p=he[this.reconnectStrategy];try{switch(await((h=this.networkAvailableTask)==null?void 0:h.promise),this.reconnectStrategy){case he.UNSPECIFIED:case he.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${p}`);break;case he.FAST:await this.reconnectFast();break;case he.REJOIN:await this.reconnectRejoin();break;case he.MIGRATE:await this.reconnectMigrate();break;default:Ac(this.reconnectStrategy,"Unknown reconnection strategy");break}break}catch(m){if(m instanceof t0&&m.unrecoverable){this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",m),this.state.setCallingState(H.RECONNECTING_FAILED);return}this.logger("warn",`[Reconnect] ${p} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,m),await Ln(500),this.reconnectStrategy=he.REJOIN}}while(this.state.callingState!==H.JOINED&&this.state.callingState!==H.RECONNECTING_FAILED&&this.state.callingState!==H.LEFT)}),this.reconnectFast=async()=>(this.reconnectStrategy=he.FAST,this.state.setCallingState(H.RECONNECTING),this.join(this.joinCallData)),this.reconnectRejoin=async()=>{this.reconnectStrategy=he.REJOIN,this.state.setCallingState(H.RECONNECTING),await this.join(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks()},this.reconnectMigrate=async()=>{var v;const d=this.sfuClient;if(!d)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=he.MIGRATE,this.state.setCallingState(H.MIGRATING);const h=this.subscriber,p=this.publisher;h==null||h.detachEventHandlers(),p==null||p.detachEventHandlers();const m=d.enterMigration();try{const g=d.edgeName;await this.join({...this.joinCallData,migrating_from:g})}finally{(v=this.joinCallData)==null||delete v.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await m,this.state.setCallingState(H.JOINED)}finally{h==null||h.close(),p==null||p.close({stopTracks:!1}),d.close()}},this.registerReconnectHandlers=()=>{const d=this.on("goAway",()=>{this.reconnect(he.MIGRATE).catch(m=>{this.logger("warn","[Reconnect] Error reconnecting",m)})}),h=this.on("error",m=>{const{reconnectStrategy:v}=m;v!==he.UNSPECIFIED&&(v===he.DISCONNECT?this.leave({reason:"SFU instructed to disconnect"}).catch(g=>{this.logger("warn","Can't leave call after disconnect request",g)}):this.reconnect(v).catch(g=>{this.logger("warn","[Reconnect] Error reconnecting",g)}))}),p=this.streamClient.on("network.changed",m=>{var v,g,y,S;if(m.online)this.logger("debug","[Reconnect] Going online"),(g=this.sfuClient)==null||g.close(Mn.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),(y=this.networkAvailableTask)==null||y.resolve(),this.networkAvailableTask=void 0,(S=this.sfuStatsReporter)==null||S.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const b=Ms();b.promise.then(()=>{let E=he.FAST;this.lastOfflineTimestamp&&(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(E=he.REJOIN),this.reconnect(E).catch(k=>{this.logger("warn","[Reconnect] Error reconnecting after going online",k)})}),this.networkAvailableTask=b,(v=this.sfuStatsReporter)==null||v.stop(),this.state.setCallingState(H.OFFLINE)}});this.leaveCallHooks.add(d),this.leaveCallHooks.add(h),this.leaveCallHooks.add(p)},this.restorePublishedTracks=async()=>{for(const d of this.trackPublishOrder)switch(d){case M.AUDIO:const h=this.microphone.state.mediaStream;h&&await this.publishAudioStream(h);break;case M.VIDEO:const p=this.camera.state.mediaStream;p&&await this.publishVideoStream(p);break;case M.SCREEN_SHARE:const m=this.screenShare.state.mediaStream;m&&await this.publishScreenShareStream(m);break;case M.SCREEN_SHARE_AUDIO:case M.UNSPECIFIED:break;default:Ac(d,"Unknown track type");break}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:d}=this.state;d.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async d=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SEND_VIDEO))throw new Error("No permission to publish video");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=d.getVideoTracks();if(!h)throw new Error("There is no video track in the stream");this.trackPublishOrder.includes(M.VIDEO)||this.trackPublishOrder.push(M.VIDEO),await this.publisher.publishStream(d,h,M.VIDEO,this.publishOptions)},this.publishAudioStream=async d=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SEND_AUDIO))throw new Error("No permission to publish audio");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=d.getAudioTracks();if(!h)throw new Error("There is no audio track in the stream");this.trackPublishOrder.includes(M.AUDIO)||this.trackPublishOrder.push(M.AUDIO),await this.publisher.publishStream(d,h,M.AUDIO)},this.publishScreenShareStream=async d=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SCREENSHARE))throw new Error("No permission to publish screen share");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=d.getVideoTracks();if(!h)throw new Error("There is no screen share track in the stream");this.trackPublishOrder.includes(M.SCREEN_SHARE)||this.trackPublishOrder.push(M.SCREEN_SHARE);const p={screenShareSettings:this.screenShare.getSettings()};await this.publisher.publishStream(d,h,M.SCREEN_SHARE,p);const[m]=d.getAudioTracks();m&&(this.trackPublishOrder.includes(M.SCREEN_SHARE_AUDIO)||this.trackPublishOrder.push(M.SCREEN_SHARE_AUDIO),await this.publisher.publishStream(d,m,M.SCREEN_SHARE_AUDIO,p))},this.stopPublish=async(d,h=!0)=>{var p;this.logger("info",`stopPublish ${M[d]}, stop tracks: ${h}`),await((p=this.publisher)==null?void 0:p.unpublishStream(d,h))},this.notifyNoiseCancellationStarting=async()=>{var d;return(d=this.sfuClient)==null?void 0:d.startNoiseCancellation().catch(h=>{this.logger("warn","Failed to notify start of noise cancellation",h)})},this.notifyNoiseCancellationStopped=async()=>{var d;return(d=this.sfuClient)==null?void 0:d.stopNoiseCancellation().catch(h=>{this.logger("warn","Failed to notify stop of noise cancellation",h)})},this.startReportingStatsFor=d=>{var h;return(h=this.statsReporter)==null?void 0:h.startReportingStatsFor(d)},this.stopReportingStatsFor=d=>{var h;return(h=this.statsReporter)==null?void 0:h.stopReportingStatsFor(d)},this.resetReaction=d=>{this.state.updateParticipant(d,{reaction:void 0})},this.setSortParticipantsBy=d=>this.state.setSortParticipantsBy(d),this.sendReaction=async d=>this.streamClient.post(`${this.streamClientBasePath}/reaction`,d),this.blockUser=async d=>this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:d}),this.unblockUser=async d=>this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:d}),this.muteSelf=d=>{const h=this.currentUserId;if(h)return this.muteUser(h,d)},this.muteOthers=d=>{const h=nP(d);if(!h)return;const p=[];for(const m of this.state.remoteParticipants)m.publishedTracks.includes(h)&&p.push(m.userId);if(p.length>0)return this.muteUser(p,d)},this.muteUser=(d,h)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(d)?d:[d],[h]:!0}),this.muteAllUsers=d=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[d]:!0}),this.startRecording=async d=>this.streamClient.post(`${this.streamClientBasePath}/start_recording`,d||{}),this.stopRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{}),this.startTranscription=async d=>this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,d),this.stopTranscription=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`),this.requestPermissions=async d=>{const{permissions:h}=d;if(!h.every(m=>this.permissionsContext.canRequest(m)))throw new Error(`You are not allowed to request permissions: ${h.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,d)},this.grantPermissions=async(d,h)=>this.updateUserPermissions({user_id:d,grant_permissions:h}),this.revokePermissions=async(d,h)=>this.updateUserPermissions({user_id:d,revoke_permissions:h}),this.updateUserPermissions=async d=>this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,d),this.goLive=async(d={},h)=>this.streamClient.post(`${this.streamClientBasePath}/go_live`,d,h),this.stopLive=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_live`,{}),this.startHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{}),this.stopHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{}),this.update=async d=>{const h=await this.streamClient.patch(`${this.streamClientBasePath}`,d),{call:p,members:m,own_capabilities:v}=h;return this.state.updateFromCallResponse(p),this.state.setMembers(m),this.state.setOwnCapabilities(v),h},this.endCall=async()=>this.streamClient.post(`${this.streamClientBasePath}/mark_ended`),this.pin=d=>{this.state.updateParticipant(d,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=d=>{this.state.updateParticipant(d,{pin:void 0})},this.pinForEveryone=async d=>this.streamClient.post(`${this.streamClientBasePath}/pin`,d),this.unpinForEveryone=async d=>this.streamClient.post(`${this.streamClientBasePath}/unpin`,d),this.queryMembers=d=>this.streamClient.post("/call/members",{...d||{},id:this.id,type:this.type}),this.updateCallMembers=async d=>this.streamClient.post(`${this.streamClientBasePath}/members`,d),this.scheduleAutoDrop=()=>{clearTimeout(this.dropTimeout),this.leaveCallHooks.add(At(this.state.settings$,d=>{if(!d||this.state.callingState!==H.RINGING)return;const h=d.ring.auto_cancel_timeout_ms;h<=0||(clearTimeout(this.dropTimeout),this.dropTimeout=setTimeout(()=>{this.leave({reason:"ring: timeout"}).catch(p=>{this.logger("error","Failed to drop call",p)})},h))}))},this.queryRecordings=async d=>{let h=this.streamClientBasePath;return d&&(h=`${h}/${d}`),this.streamClient.get(`${h}/recordings`)},this.queryTranscriptions=async()=>this.streamClient.get(`${this.streamClientBasePath}/transcriptions`),this.getCallStats=async d=>{const h=`${this.streamClientBasePath}/stats/${d}`;return this.streamClient.get(h)},this.submitFeedback=async(d,{reason:h,custom:p}={})=>{var E,k;if(d<1||d>5)throw new Error("Rating must be between 1 and 5");const m=(E=this.state.session)==null?void 0:E.id;if(!m)throw new Error("Feedback can be submitted only in the context of a call session");const{sdkName:v,sdkVersion:g,...y}=WP(Zm()),S=((k=this.sfuClient)==null?void 0:k.sessionId)??"N/A",b=`${this.streamClientBasePath}/feedback/${m}`;return this.streamClient.post(b,{rating:d,reason:h,user_session_id:S,sdk:v,sdk_version:g,custom:{...p,"x-stream-platform-data":y}})},this.sendCustomEvent=async d=>this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:d}),this.applyDeviceConfig=async d=>{await this.initCamera({setStatus:d}).catch(h=>{this.logger("warn","Camera init failed",h)}),await this.initMic({setStatus:d}).catch(h=>{this.logger("warn","Mic init failed",h)})},this.initCamera=async d=>{var p,m,v,g,y;if(await this.camera.statusChangeSettled(),(p=this.state.localParticipant)!=null&&p.videoStream||!this.permissionsContext.hasPermission("send-video"))return;if(!this.camera.state.direction&&!this.camera.state.selectedDevice){let S="front";const b=(m=this.state.settings)==null?void 0:m.video.camera_facing;b&&(S=b==="front"?"front":"back"),this.camera.state.setDirection(S)}const h=(v=this.state.settings)==null?void 0:v.video.target_resolution;h&&await this.camera.selectTargetResolution(h),d.setStatus&&(this.camera.enabled&&this.camera.state.mediaStream&&!((g=this.publisher)!=null&&g.isPublishing(M.VIDEO))&&await this.publishVideoStream(this.camera.state.mediaStream),this.camera.state.status===void 0&&((y=this.state.settings)!=null&&y.video.camera_default_on)&&await this.camera.enable())},this.initMic=async d=>{var h,p,m;await this.microphone.statusChangeSettled(),!((h=this.state.localParticipant)!=null&&h.audioStream||!this.permissionsContext.hasPermission("send-audio"))&&d.setStatus&&(this.microphone.enabled&&this.microphone.state.mediaStream&&!((p=this.publisher)!=null&&p.isPublishing(M.AUDIO))&&await this.publishAudioStream(this.microphone.state.mediaStream),this.microphone.state.status===void 0&&((m=this.state.settings)!=null&&m.audio.mic_default_on)&&await this.microphone.enable())},this.trackElementVisibility=(d,h,p)=>this.dynascaleManager.trackElementVisibility(d,h,p),this.setViewport=d=>this.dynascaleManager.setViewport(d),this.bindVideoElement=(d,h,p)=>{const m=this.dynascaleManager.bindVideoElement(d,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindAudioElement=(d,h,p="audioTrack")=>{const m=this.dynascaleManager.bindAudioElement(d,h,p);if(m)return this.leaveCallHooks.add(m),()=>{this.leaveCallHooks.delete(m),m()}},this.bindCallThumbnailElement=(d,h={})=>{const p=()=>{d.src=h.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},m=At(this.state.thumbnails$,v=>{if(!v)return;d.addEventListener("error",p);const g=new URL(v.image_url);g.searchParams.set("w",String(d.clientWidth)),g.searchParams.set("h",String(d.clientHeight)),d.src=g.toString()});return()=>{m(),d.removeEventListener("error",p)}},this.setPreferredIncomingVideoResolution=(d,h)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(d?{enabled:!0,dimension:d}:void 0,h),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=d=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(d?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.type=t,this.id=n,this.cid=`${t}:${n}`,this.ringingSubject=new ce(c),this.watching=l,this.streamClient=r,this.clientStore=a,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=Ee(["Call"]);const u=_0.get(t),f=o||u.options.sortParticipantsBy;f&&this.state.setSortParticipantsBy(f),this.state.setMembers(i||[]),this.state.setOwnCapabilities(s||[]),this.state.setCallingState(c?H.RINGING:H.IDLE),this.camera=new aO(this),this.microphone=new mO(this),this.speaker=new SO(this),this.screenShare=new vO(this),this.dynascaleManager=new YP(this.state,this.speaker)}async setup(){await Kt(this.joinLeaveConcurrencyTag,async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",t=>{this.state.updateFromEvent(t)})),this.leaveCallHooks.add(HP(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===H.LEFT&&this.state.setCallingState(H.IDLE),this.initialized=!0)})}registerEffects(){this.leaveCallHooks.add(At(this.state.settings$,t=>{t&&this.permissionsContext.setCallSettings(t)})),this.leaveCallHooks.add(b0(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(At(this.state.blockedUserIds$,async t=>{if(!t||t.length===0)return;const n=this.currentUserId;n&&t.includes(n)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({reason:"user blocked"}).catch(r=>{this.logger("error","Error leaving call after being blocked",r)}))})),this.leaveCallHooks.add(At(this.state.callingState$,t=>{this.ringing&&(t===H.JOINED||t===H.JOINING||t===H.LEFT)&&(clearTimeout(this.dropTimeout),this.dropTimeout=void 0)})),this.leaveCallHooks.add(At(this.ringingSubject,t=>{var l,u;if(!t)return;const n=this.state.session,r=(l=this.clientStore.connectedUser)==null?void 0:l.id,i=n==null?void 0:n.ended_at,s=(u=this.state.createdBy)==null?void 0:u.id,o=n==null?void 0:n.rejected_by,a=n==null?void 0:n.accepted_by;let c=!1;i?c=!0:s&&o?o[s]&&(c=!0):r&&o?o[r]&&(c=!0):r&&a&&a[r]&&(c=!0),c?this.state.callingState!==H.IDLE&&this.state.setCallingState(H.IDLE):(this.state.callingState===H.IDLE&&this.state.setCallingState(H.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(E0(this)))}))}get ringing(){return on(this.ringingSubject)}get currentUserId(){var t;return(t=this.clientStore.connectedUser)==null?void 0:t.id}get isCreatedByMe(){var t;return((t=this.state.createdBy)==null?void 0:t.id)===this.currentUserId}updatePublishOptions(t){this.publishOptions={...this.publishOptions,...t}}}var bO=null;class wO{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Js()}}const js=async(e,t)=>{for(let r=0;r<3;r++){try{await Ne.post(`https://chat-insights.getstream.io/insights/${e}`,t)}catch{await Ln((r+1)*3e3);continue}break}};function CO(e,t){return{...t,...D0(e)}}function D0(e){var n;const{client:t}=e;return{ready_state:(n=e.ws)==null?void 0:n.readyState,url:e._buildUrl(),api_key:t.key,start_ts:t.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:t.getAuthType(),token:t.tokenManager.token,user_id:t.userID,user_details:t._user,device:"browser",client_id:e.connectionID,ws_details:e.ws,ws_consecutive_failures:t.insightMetrics.wsConsecutiveFailures,ws_total_failures:t.insightMetrics.wsTotalFailures,request_id:e.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:t.insightMetrics.instanceClientId}}function EO(e){return D0(e)}const kO=e=>e.code!==void 0,TO=e=>e.error!==void 0;class RO{constructor(t){this._log=(n,r={},i="info")=>{this.client.logger(i,"connection:"+n,{...r})},this.setClient=n=>{this.client=n},this._buildUrl=()=>{const n=new URLSearchParams;return n.set("api_key",this.client.key),n.set("stream-auth-type",this.client.getAuthType()),n.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${n.toString()}`},this.onlineStatusChanged=n=>{n.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):n.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=n=>{var o;if(this.wsID!==n)return;const r=this.client.user;if(!r){this.client.logger("error","User not set, can't connect to WS");return}const i=this.client._getToken();if(!i){this.client.logger("error","Token not set, can't connect authenticate");return}const s={token:i,user_details:{id:r.id,name:r.name,image:r.image,custom:r.custom}};this.authenticationSent=!0,(o=this.ws)==null||o.send(JSON.stringify(s)),this._log("onopen() - onopen callback",{wsID:n})},this.onmessage=(n,r)=>{var s,o;if(this.wsID!==n)return;this._log("onmessage() - onmessage callback",{event:r,wsID:n});const i=typeof r.data=="string"?JSON.parse(r.data):null;if(!this.isResolved&&i&&i.type==="connection.error"&&(this.isResolved=!0,i.error)){(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(i,!1));return}if(this.lastEvent=new Date,i&&(i.type==="health.check"||i.type==="connection.ok")&&this.scheduleNextPing(),i&&i.type==="connection.ok"&&((o=this.resolvePromise)==null||o.call(this,i),this._setHealth(!0)),i&&i.type==="connection.error"&&i.error){const{code:a}=i.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,a===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic()&&(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}i&&(i.received_at=new Date,this.client.dispatchEvent(i)),this.scheduleConnectionCheck()},this.onclose=(n,r)=>{var i,s;if(this.wsID===n)if(this._log("onclose() - onclose callback - "+r.code,{event:r,wsID:n}),r.code===bi.WS_CLOSED_SUCCESS){const o=new Error(`WS connection reject with error ${r.reason}`);o.reason=r.reason,o.code=r.code,o.wasClean=r.wasClean,o.target=r.target,(i=this.rejectPromise)==null||i.call(this,o),this._log(`onclose() - WS connection reject with error ${r.reason}`,{event:r})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(r)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),this._reconnect()},this.onerror=(n,r)=>{var i;this.wsID===n&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(i=this.rejectPromise)==null||i.call(this,this._errorFromWSEvent(r)),this._log("onerror() - WS connection resulted into error",{event:r}),this._reconnect())},this._setHealth=(n,r=!1)=>{if(n!==this.isHealthy){if(this.isHealthy=n,this.isHealthy||r){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(n,r=!0)=>{let i,s,o;kO(n)&&(i=n.code,s="unknown",o=n.reason),TO(n)&&(i=n.error.code,s=n.error.StatusCode,o=n.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${i}`,{event:n},"warn");const a=new Error(`WS failed with code ${i} and reason - ${o}`);return a.code=i,a.StatusCode=s,a.isWSFailure=r,a},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((n,r)=>{this.resolvePromise=n,this.rejectPromise=r})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var r;const n=[{type:"health.check",client_id:this.client.clientID}];try{(r=this.ws)==null||r.send(JSON.stringify(n))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const n=new Date;this.lastEvent&&n.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.authenticationSent=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,Oc(this.onlineStatusChanged)}async connect(t=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const n=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${n}`)}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!n.isWSFailure)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}))}return await this._waitForHealthy(t)}async _waitForHealthy(t=15e3){return Promise.race([(async()=>{for(let r=0;r<=t;r+=50)try{return await this.connectionOpen}catch(i){if(r===t)throw new Error(JSON.stringify({code:i.code,StatusCode:i.StatusCode,message:i.message,isWSFailure:i.isWSFailure}));await Ln(50)}})(),(async()=>{throw await Ln(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),Eh(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let n;const{ws:r}=this;return r&&r.close&&r.readyState===r.OPEN?(n=new Promise(i=>{const s=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),i()};r.onclose=s,setTimeout(s,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(bi.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),n=Promise.resolve()),delete this.ws,n}async _connect(){var n,r,i,s;if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=Js(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let t=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken());let o=!0;this.client.connectionIdPromise&&await _x(this.client.connectionIdPromise)&&(o=!1),o&&this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const a=this._buildUrl();this._log(`_connect() - Connecting to ${a}`,{wsURL:a,requestID:this.requestID}),this.ws=new qR(a),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const c=await this.connectionOpen;if(this.isConnecting=!1,c)return this.connectionID=c.connection_id,(r=(n=this.client).resolveConnectionId)==null||r.call(n,this.connectionID),this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(js("ws_success_after_failure",EO(this)),this.client.insightMetrics.wsConsecutiveFailures=0),c}catch(o){if(await this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",o),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const a=CO(this,Rx(o));js==null||js("ws_fatal",a)}throw(s=(i=this.client).rejectConnectionId)==null||s.call(i,o),o}}async _reconnect(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let n=t.interval;if(n||(n=ko(this.consecutiveFailures)),await Ln(n),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(r){if(this.isHealthy=!1,this.consecutiveFailures+=1,r.code===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});r.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var t,n;this.wsID+=1;try{(t=this==null?void 0:this.ws)==null||t.removeAllListeners(),(n=this==null?void 0:this.ws)==null||n.close()}catch{}}}function Zd(e){return typeof e=="string"}function dg(e,t){return!!t&&Zd(e)}function _O(e,t){const n=[];if(Zd(e)&&dg(e,t)){for(let r=0,i=e.length;r<i;r++)if(e.charAt(r)){const s=e.charAt(r),o=t(s,r,e);n[r]=o}}else if(!Zd(e)&&!dg(e,t)){for(let r=0,i=e.length;r<i;r++)if(r in e){const s=e[r],o=t(s,r,e);n[r]=o}}return n}const IO=e=>KR(new Uint8Array(_O(e,t=>t.charCodeAt(0)))),xO=e=>{const t={},n=String.fromCharCode,r=e.length;let i,s=0,o,a,c=0,l,u="";const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0;i<64;i++)t[f.charAt(i)]=i;for(a=0;a<r;a++)for(o=t[e.charAt(a)],s=(s<<6)+o,c+=6;c>=8;)((l=s>>>(c-=8)&255)||a<r-2)&&(u+=n(l));return u};function PO(e){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",IO(JSON.stringify({user_id:e})),"devtoken"].join(".")}function OO(e){const t=e.split(".");if(t.length!==3)return"";const n=t[1],r=xO(n);return JSON.parse(r).user_id}class NO{constructor(t){this.setTokenOrProvider=async(n,r,i)=>{this.validateToken(n,r,i),this.user=r,Qd(n)&&(this.tokenProvider=n,this.type="provider"),typeof n=="string"&&(this.token=n,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.user=void 0,this.loadTokenPromise=null},this.validateToken=(n,r,i)=>{if(!(r&&i&&!n)){if(!this.secret&&!n)throw new Error("UserWithId token can not be empty");if(n&&typeof n!="string"&&!Qd(n))throw new Error("user token should either be a string or a function");if(typeof n=="string"){if(i&&n==="")return;const s=OO(n);if(n!=null&&(s==null||s===""||!i&&s!==r.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(n,r)=>{if(this.type==="static")return n(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(i){return r(new Error(`Call to tokenProvider failed with message: ${i}`))}n(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,t&&(this.secret=t),this.type="static"}}const AO={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function DO(e){return e.code!==void 0}function fg(e){if(!e.code)return!1;const t=AO[`${e.code}`];return t?t.retryable:!1}function LO(e){return e.code===46}function MO(e){if(typeof e.isWSFailure=="boolean")return e.isWSFailure;try{return JSON.parse(e.message).isWSFailure}catch{return!1}}function FO(e){return!e.status||e.status<200||300<=e.status}var qe;(function(e){e.Closed="CLOSED",e.Connected="CONNECTED",e.Connecting="CONNECTING",e.Disconnected="DISCONNECTED",e.Init="INIT"})(qe||(qe={}));class jO{constructor(t){this._onlineStatusChanged=n=>{var r;if(this._log(`_onlineStatusChanged() - ${n.type}`),n.type==="offline"){this._setState(qe.Closed),(r=this.cancelToken)==null||r.cancel("disconnect() is called"),this.cancelToken=void 0;return}n.type==="online"&&this.state===qe.Closed&&this.connect(!0)},this._req=async(n,r,i)=>{var s;!this.cancelToken&&!n.close&&(this.cancelToken=Ne.CancelToken.source());try{const o=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...r,cancelToken:(s=this.cancelToken)==null?void 0:s.token},params:n,publicEndpoint:!0});return this.consecutiveFailures=0,o}catch(o){if(this.consecutiveFailures+=1,i&&fg(o))return this._log("_req() - Retryable error, retrying request"),await Ln(ko(this.consecutiveFailures)),this._req(n,r,i);throw o}},this._poll=async()=>{var n;for(;this.state===qe.Connected;)try{const r=await this._req({},{timeout:3e4},!0);if((n=r.events)!=null&&n.length)for(let i=0;i<r.events.length;i++)this.client.dispatchEvent(r.events[i])}catch(r){if(Ne.isCancel(r)){this._log("_poll() - axios canceled request");return}if(LO(r)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState(qe.Disconnected),this.connect(!0);return}if(DO(r)&&!fg(r)){this._setState(qe.Closed);return}await Ln(ko(this.consecutiveFailures))}},this.connect=async(n=!1)=>{var r,i,s,o;if(this.state===qe.Connecting){this._log("connect() - connecting already in progress",{reconnect:n},"warn");return}if(this.state===qe.Connected){this._log("connect() - already connected and polling",{reconnect:n},"warn");return}this._setState(qe.Connecting),this.connectionID=void 0;try{const{event:a}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},n);return this._setState(qe.Connected),this.connectionID=a.connection_id,(i=(r=this.client).resolveConnectionId)==null||i.call(r),this.client.dispatchEvent(a),this._poll(),a}catch(a){throw this._setState(qe.Closed),(o=(s=this.client).rejectConnectionId)==null||o.call(s),a}},this.isHealthy=()=>!!this.connectionID&&this.state===qe.Connected,this.disconnect=async(n=2e3)=>{var i;Eh(this._onlineStatusChanged),this._setState(qe.Disconnected),(i=this.cancelToken)==null||i.cancel("disconnect() is called"),this.cancelToken=void 0;const r=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:r},{timeout:n},!1),this._log("disconnect() - Closed connectionID")}catch(s){this._log("disconnect() - Failed",{err:s},"error")}},this.client=t,this.state=qe.Init,this.consecutiveFailures=0,Oc(this._onlineStatusChanged)}_log(t,n={},r="info"){this.client.logger(r,"WSConnectionFallback:"+t,{...n})}_setState(t){this._log(`_setState() - ${t}`),this.state===qe.Connecting&&t===qe.Connected&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t===qe.Closed||t===qe.Disconnected)&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}}const hg=async(e="https://hint.stream-io-video.com/",t=2e3,n=3)=>{const r=Ee(["location-hint"]);let i=0,s="ERR";do{const o=new AbortController,a=setTimeout(()=>o.abort(),t);try{const l=(await fetch(e,{method:"HEAD",signal:o.signal})).headers.get("x-amz-cf-pop")||"ERR";r("debug",`Location header: ${l}`),s=l.substring(0,3)}catch(c){r("warn",`Failed to get location hint from ${e}`,c),s="ERR"}finally{clearTimeout(a)}}while(s==="ERR"&&++i<n);return s};class pg{constructor(t,n){var i;this.listeners={},this.devToken=s=>PO(s),this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=s=>{this.baseURL=s,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(s,o)=>{const a=await this.locationHint;return!a||a==="ERR"?(this.locationHint=hg(s??this.options.locationHintUrl,o??this.options.locationHintTimeout),this.locationHint):a},this._getConnectionID=()=>{var s,o;return((s=this.wsConnection)==null?void 0:s.connectionID)||((o=this.wsFallback)==null?void 0:o.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(s,o)=>{if(!s.id)throw new Error('The "id" field on the user is missing');if(this.userID===s.id&&this.setUserPromise)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=s.id,this.anonymous=!1;const a=this._setToken(s,o,this.anonymous);this._setUser(s);const c=this.openConnection();this.setUserPromise=Promise.all([a,c]).then(l=>l[1]);try{return Oc(this.updateNetworkConnectionStatus),await this.setUserPromise}catch(l){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),l}},this._setToken=(s,o,a)=>this.tokenManager.setTokenOrProvider(o,s,a),this._setUser=s=>{this.user=s,this.userID=s.id,this._user={...s}},this.closeConnection=async s=>{var o,a;return await Promise.all([(o=this.wsConnection)==null?void 0:o.disconnect(s),(a=this.wsFallback)==null?void 0:a.disconnect(s)]),Promise.resolve()},this.openConnection=async()=>{var s,o,a;if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");return(s=this.wsConnection)!=null&&s.isConnecting&&this.wsPromise?(this.logger("info","client:openConnection() - connection already in progress"),this.wsPromise):((o=this.wsConnection)!=null&&o.isHealthy||(a=this.wsFallback)!=null&&a.isHealthy())&&this._hasConnectionID()?(this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists"),Promise.resolve()):(this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${Js()}`,this.wsPromise=this.connect(),this.wsPromise)},this.disconnectUser=async s=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(s),Eh(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromise=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async s=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:{...s}},{publicEndpoint:!0});const o=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise=void 0),this.connectUser(o.user,o.access_token)},this.connectAnonymousUser=async(s,o)=>{var a;Oc(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,await this._setToken(s,o,this.anonymous),this._setUser(s),(a=this.resolveConnectionId)==null||a.call(this)},this.on=(s,o)=>{var a;return this.listeners[s]||(this.listeners[s]=[]),this.logger("debug",`Adding listener for ${s} event`),(a=this.listeners[s])==null||a.push(o),()=>{this.off(s,o)}},this.off=(s,o)=>{var a;this.listeners[s]||(this.listeners[s]=[]),this.logger("debug",`Removing listener for ${s} event`),this.listeners[s]=(a=this.listeners[s])==null?void 0:a.filter(c=>c!==o)},this._setupConnectionIdPromise=async()=>{this.connectionIdPromise=new Promise((s,o)=>{this.resolveConnectionId=s,this.rejectConnectionId=o})},this._logApiRequest=(s,o,a,c)=>{this.logger("trace",`client: ${s} - Request - ${o}`,{payload:a,config:c})},this._logApiResponse=(s,o,a)=>{this.logger("trace",`client:${s} - Response - url: ${o} > status ${a.status}`,{response:a})},this._logApiError=(s,o,a)=>{this.logger("error",`client:${s} - Error - url: ${o}`,{url:o,error:a})},this.doAxiosRequest=async(s,o,a,c={})=>{var u,f;if(!c.publicEndpoint){await Promise.all([this.tokenManager.tokenReady(),this.guestUserCreatePromise]);try{await this.connectionIdPromise}catch{await((u=this.wsConnection)==null?void 0:u._waitForHealthy()),await this.connectionIdPromise}}const l=this._enrichAxiosOptions(c);try{let d;switch(this._logApiRequest(s,o,a,l),s){case"get":d=await this.axiosInstance.get(o,l);break;case"delete":d=await this.axiosInstance.delete(o,l);break;case"post":d=await this.axiosInstance.post(o,a,l);break;case"put":d=await this.axiosInstance.put(o,a,l);break;case"patch":d=await this.axiosInstance.patch(o,a,l);break;case"options":d=await this.axiosInstance.options(o,l);break;default:throw new Error("Invalid request type")}return this._logApiResponse(s,o,d),this.consecutiveFailures=0,this.handleResponse(d)}catch(d){if(d.client_request_id=(f=l.headers)==null?void 0:f["x-client-request-id"],this.consecutiveFailures+=1,d.response)return this._logApiError(s,o,d.response),d.response.data.code===bi.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await Ln(ko(this.consecutiveFailures)),await this.tokenManager.loadToken(),await this.doAxiosRequest(s,o,a,c)):this.handleResponse(d.response);throw this._logApiError(s,o,d),d}},this.get=(s,o)=>this.doAxiosRequest("get",s,null,{params:o}),this.put=(s,o,a)=>this.doAxiosRequest("put",s,o,{params:a}),this.post=(s,o,a)=>this.doAxiosRequest("post",s,o,{params:a}),this.patch=(s,o,a)=>this.doAxiosRequest("patch",s,o,{params:a}),this.delete=(s,o)=>this.doAxiosRequest("delete",s,null,{params:o}),this.errorFromResponse=s=>{const{data:o,status:a}=s,c=new t0;return c.message=`Stream error code ${o.code}: ${o.message}`,c.code=o.code,c.unrecoverable=o.unrecoverable,c.response=s,c.status=a,c},this.handleResponse=s=>{const o=s.data;if(FO(s))throw this.errorFromResponse(s);return o},this.dispatchEvent=s=>{if(this.logger("debug",`Dispatching event: ${s.type}`,s),!!this.listeners){for(const o of this.listeners.all||[])o(s);for(const o of this.listeners[s.type]||[])o(s)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new RO(this);try{return this.wsFallback?await this.wsFallback.connect():(this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout))}catch(s){if(this.options.enableWSFallback&&MO(s)&&Ix(this.logger))return this.logger("warn","client:connect() - WS failed, fallback to longpoll"),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new jO(this),await this.wsFallback.connect();throw s}},this._sayHi=()=>{const s=Js(),o={headers:P1.from({"x-client-request-id":s})};this.doAxiosRequest("get",this.baseURL+"/hi",null,o).catch(a=>{this.options.enableInsights&&js("http_hi_failed",{api_key:this.key,err:a,client_request_id:s})})},this.getUserAgent=()=>this.userAgent||`stream-video-javascript-client-${this.node?"node":"browser"}-1.10.2`,this.setUserAgent=s=>{this.userAgent=s},this._isUsingServerAuth=()=>!!this.secret,this._enrichAxiosOptions=(s={params:{},headers:{},config:{}})=>{var c;const o=s.publicEndpoint&&!this.user?void 0:this._getToken(),a=o?{Authorization:o}:void 0;return(c=s.headers)!=null&&c["x-client-request-id"]||(s.headers={...s.headers,"x-client-request-id":Js()}),{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...s.params},headers:{...a,"stream-auth-type":s.publicEndpoint&&!this.user?"anonymous":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...s.headers},...s.config,...this.options.axiosRequestConfig}},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this._buildWSPayload=s=>JSON.stringify({user_id:this.userID,user_details:this._user,client_request_id:s}),this.updateNetworkConnectionStatus=s=>{s.type==="offline"?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):s.type==="online"&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=t,this.secret=n==null?void 0:n.secret;const r=n||{browser:typeof window<"u"};this.browser=r.browser||typeof window<"u",this.node=!this.browser,this.browser&&(this.locationHint=hg(n==null?void 0:n.locationHintUrl,n==null?void 0:n.locationHintTimeout,n==null?void 0:n.locationHintMaxAttempts)),this.options={timeout:5e3,withCredentials:!1,warmUp:!1,...r},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new bO.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),typeof process<"u"&&"env"in process&&Su.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030/video"),typeof process<"u"&&"env"in process&&Su.STREAM_LOCAL_TEST_HOST&&this.setBaseURL(`http://${Su.STREAM_LOCAL_TEST_HOST}/video`),this.axiosInstance=Ne.create({...this.options,baseURL:this.baseURL}),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.anonymous=!1,this.persistUserOnConnectionFailure=(i=this.options)==null?void 0:i.persistUserOnConnectionFailure,this.tokenManager=new NO(this.secret),this.consecutiveFailures=0,this.insightMetrics=new wO,this.defaultWSTimeoutWithFallback=6e3,this.defaultWSTimeout=15e3,this.logger=Qd(r.logger)?r.logger:()=>null}}class pr{constructor(t,n){var o,a;this.logLevel="warn",this.eventHandlersToUnregister=[],this.connectUser=async(c,l)=>{var d;if(c.type==="anonymous")return c.id="!anon",this.connectAnonymousUser(c,l);let u=()=>this.streamClient.connectUser(c,l);c.type==="guest"&&(u=async()=>this.streamClient.connectGuestUser(c)),this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>u()):u(),(d=this.connectionPromise)==null||d.finally(()=>this.connectionPromise=void 0);const f=await this.connectionPromise;return f!=null&&f.me&&this.writeableStateStore.setConnectedUser(f.me),this.eventHandlersToUnregister.push(this.on("connection.changed",h=>{if(h.online){const p=this.writeableStateStore.calls.filter(m=>m.watching).map(m=>m.cid);this.logger("info",`Rewatching calls after connection changed ${p.join(", ")}`),p.length>0&&this.queryCalls({watch:!0,filter_conditions:{cid:{$in:p}},sort:[{field:"cid",direction:1}]}).catch(m=>{this.logger("error","Failed to re-watch calls",m)})}})),this.eventHandlersToUnregister.push(this.on("call.created",h=>{const{call:p,members:m}=h;if(c.id===p.created_by.id){this.logger("warn","Received `call.created` sent by the current user");return}this.logger("info",`New call created and registered: ${p.cid}`);const v=new Ps({streamClient:this.streamClient,type:p.type,id:p.id,members:m,clientStore:this.writeableStateStore});v.state.updateFromCallResponse(p),this.writeableStateStore.registerCall(v)})),this.eventHandlersToUnregister.push(this.on("call.ring",async h=>{const{call:p,members:m}=h;if(c.id===p.created_by.id){this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");return}const v=this.writeableStateStore.findCall(p.type,p.id);await(v==null?void 0:v.leave({reason:"cleaning-up in call.ring"}));const g=new Ps({streamClient:this.streamClient,type:p.type,id:p.id,members:m,clientStore:this.writeableStateStore,ringing:!0});g.state.updateFromCallResponse(p),await g.get(),this.writeableStateStore.registerCall(g)})),f},this.disconnectUser=async c=>{var d;if(!this.streamClient.user&&!this.connectionPromise)return;const l=(d=this.streamClient.user)==null?void 0:d.id,u=this.streamClient.key,f=()=>this.streamClient.disconnectUser(c);this.disconnectionPromise=this.connectionPromise?this.connectionPromise.then(()=>f()):f(),this.disconnectionPromise.finally(()=>this.disconnectionPromise=void 0),await this.disconnectionPromise,l&&pr._instanceMap.delete(u+l),this.eventHandlersToUnregister.forEach(h=>h()),this.eventHandlersToUnregister=[],this.writeableStateStore.setConnectedUser(void 0)},this.on=(c,l)=>this.streamClient.on(c,l),this.off=(c,l)=>this.streamClient.off(c,l),this.call=(c,l)=>new Ps({streamClient:this.streamClient,id:l,type:c,clientStore:this.writeableStateStore}),this.createGuestUser=async c=>this.streamClient.doAxiosRequest("post","/guest",c,{publicEndpoint:!0}),this.queryCalls=async(c={})=>{const l=await this.streamClient.post("/calls",c),u=[];for(const f of l.calls){const d=new Ps({streamClient:this.streamClient,id:f.call.id,type:f.call.type,members:f.members,ownCapabilities:f.own_capabilities,watching:c.watch,clientStore:this.writeableStateStore});d.state.updateFromCallResponse(f.call),await d.applyDeviceConfig(!1),c.watch&&this.writeableStateStore.registerCall(d),u.push(d)}return{...l,calls:u}},this.queryCallStats=async(c={})=>this.streamClient.post("/call/stats",c),this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(c,l,u,f,d)=>await this.streamClient.post("/devices",{id:c,push_provider:l,voip_token:d,...f!=null?{user_id:f}:{},...u!=null?{push_provider_name:u}:{}}),this.addVoipDevice=async(c,l,u,f)=>await this.addDevice(c,l,u,f,!0),this.getDevices=async c=>await this.streamClient.get("/devices",c?{user_id:c}:{}),this.removeDevice=async(c,l)=>await this.streamClient.delete("/devices",{id:c,...l?{user_id:l}:{}}),this.onRingingCall=async c=>{let l=this.state.calls.find(u=>u.cid===c&&u.ringing);if(!l){const[u,f]=c.split(":");l=new Ps({streamClient:this.streamClient,type:u,id:f,clientStore:this.writeableStateStore,ringing:!0}),await l.get()}return l},this.connectAnonymousUser=async(c,l)=>{const u=()=>this.streamClient.connectAnonymousUser(c,l);return this.connectionPromise=this.disconnectionPromise?this.disconnectionPromise.then(()=>u()):u(),this.connectionPromise.finally(()=>this.connectionPromise=void 0),this.connectionPromise};let r=m0,i="warn";typeof t=="string"?(i=(n==null?void 0:n.logLevel)||i,r=(n==null?void 0:n.logger)||r):(i=((o=t.options)==null?void 0:o.logLevel)||i,r=((a=t.options)==null?void 0:a.logger)||r),xx(r,i),this.logger=Ee(["client"]);const s=Ee(["coordinator"]);if(typeof t=="string")this.streamClient=new pg(t,{persistUserOnConnectionFailure:!0,...n,logLevel:i,logger:s});else{this.streamClient=new pg(t.apiKey,{persistUserOnConnectionFailure:!0,...t.options,logLevel:i,logger:s});const c=Xd();if(c){const l=Or[c.type].toLowerCase(),u=`${c.major}.${c.minor}.${c.patch}`,f=this.streamClient.getUserAgent();this.streamClient.setUserAgent(`${f}-video-${l}-sdk-${u}`)}}if(this.writeableStateStore=new lP,this.readOnlyStateStore=new uP(this.writeableStateStore),typeof t!="string"){const c=t.user,l=t.token||t.tokenProvider;if(c){let u=c.id;c.type==="anonymous"&&(u="!anon"),u&&(pr._instanceMap.has(t.apiKey+u)&&this.logger("warn",`A StreamVideoClient already exists for ${c.type==="anonymous"?"an anonymous user":u}; Prefer using getOrCreateInstance method`),c.id=u,pr._instanceMap.set(t.apiKey+u,this)),this.connectUser(c,l).catch(f=>{this.logger("error","Failed to connect",f)})}}}static getOrCreateInstance(t){const n=t.user;if(!n.id)if(t.user.type==="anonymous")n.id="!anon";else throw new Error("User ID is required for a non-anonymous user");if(!t.token&&!t.tokenProvider&&t.user.type!=="anonymous"&&t.user.type!=="guest")throw new Error("TokenProvider or token is required for a user that is not a guest or anonymous");let r=pr._instanceMap.get(t.apiKey+n.id);return r||(r=new pr({...t,user:n})),r}get state(){return this.readOnlyStateStore}}pr._instanceMap=new Map;const re=e=>typeof e=="string",Os=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},mg=e=>e==null?"":""+e,UO=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},$O=/###/g,gg=e=>e&&e.indexOf("###")>-1?e.replace($O,"."):e,vg=e=>!e||re(e),Ys=(e,t,n)=>{const r=re(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(vg(e))return{};const s=gg(r[i]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++i}return vg(e)?{}:{obj:e,k:gg(r[i])}},yg=(e,t,n)=>{const{obj:r,k:i}=Ys(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let s=t[t.length-1],o=t.slice(0,t.length-1),a=Ys(e,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Ys(e,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},VO=(e,t,n,r)=>{const{obj:i,k:s}=Ys(e,t,Object);i[s]=i[s]||[],i[s].push(n)},Fc=(e,t)=>{const{obj:n,k:r}=Ys(e,t);if(n)return n[r]},BO=(e,t,n)=>{const r=Fc(e,n);return r!==void 0?r:Fc(t,n)},L0=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?re(e[r])||e[r]instanceof String||re(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):L0(e[r],t[r],n):e[r]=t[r]);return e},gi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var zO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const HO=e=>re(e)?e.replace(/[&<>"'\/]/g,t=>zO[t]):e;class WO{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const qO=[" ",",","?","!",";"],KO=new WO(20),GO=(e,t,n)=>{t=t||"",n=n||"";const r=qO.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=KO.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(e);if(!s){const o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(s=!0)}return s},ef=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let c=s;c<r.length;++c)if(c!==s&&(a+=n),a+=r[c],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;s+=c-s+1;break}i=o}return i},jc=e=>e&&e.replace("_","-"),JO={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Uc{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||JO,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(re(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Uc(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Uc(this.logger,t)}}var On=new Uc;class Rl{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,c]=o;for(let l=0;l<c;l++)a.apply(a,[t,...r])})}}class Sg extends Rl{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):re(r)&&s?a.push(...r.split(s)):a.push(r)));const c=Fc(this.data,a);return!c&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!re(r)?c:ef(this.data&&this.data[t]&&this.data[t][n],r,s)}addResource(t,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),yg(this.data,a,i),s.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(re(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let c=Fc(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?L0(c,r,s):c={...c,...r},yg(this.data,a,c),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var M0={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,n,r,i))}),t}};const bg={};class $c extends Rl{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),UO(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=On.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!GO(t,r,i);if(o&&!a){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:s};const l=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(l[0])>-1)&&(s=l.shift()),t=l.join(i)}return re(s)&&(s=[s]),{key:t,namespaces:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],n),c=a[a.length-1],l=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&l.toLowerCase()==="cimode"){if(u){const b=n.nsSeparator||this.options.nsSeparator;return i?{res:`${c}${b}${o}`,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${b}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:l,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(t,n);let d=f&&f.res;const h=f&&f.usedKey||o,p=f&&f.exactUsedKey||o,m=Object.prototype.toString.apply(d),v=["[object Number]","[object Function]","[object RegExp]"],g=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!re(d)&&typeof d!="boolean"&&typeof d!="number";if(y&&d&&S&&v.indexOf(m)<0&&!(re(g)&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(f.res=b,f.usedParams=this.getUsedParamsDetails(n),f):b}if(s){const b=Array.isArray(d),E=b?[]:{},k=b?p:h;for(const T in d)if(Object.prototype.hasOwnProperty.call(d,T)){const x=`${k}${s}${T}`;E[T]=this.translate(x,{...n,joinArrays:!1,ns:a}),E[T]===x&&(E[T]=d[T])}d=E}}else if(y&&re(g)&&Array.isArray(d))d=d.join(g),d&&(d=this.extendTranslation(d,t,n,r));else{let b=!1,E=!1;const k=n.count!==void 0&&!re(n.count),T=$c.hasDefaultValue(n),x=k?this.pluralResolver.getSuffix(l,n.count,n):"",j=n.ordinal&&k?this.pluralResolver.getSuffix(l,n.count,{ordinal:!1}):"",P=k&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),V=P&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${x}`]||n[`defaultValue${j}`]||n.defaultValue;!this.isValidLookup(d)&&T&&(b=!0,d=V),this.isValidLookup(d)||(E=!0,d=o);const D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:d,W=T&&V!==d&&this.options.updateMissing;if(E||b||W){if(this.logger.log(W?"updateKey":"missingKey",l,c,o,W?V:d),s){const R=this.resolve(o,{...n,keySeparator:!1});R&&R.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let R=0;R<L.length;R++)$.push(L[R]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(n.lng||this.language):$.push(n.lng||this.language);const q=(R,_,F)=>{const J=T&&F!==d?F:D;this.options.missingKeyHandler?this.options.missingKeyHandler(R,c,_,J,W,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(R,c,_,J,W,n),this.emit("missingKey",R,c,_,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?$.forEach(R=>{const _=this.pluralResolver.getSuffixes(R,n);P&&n[`defaultValue${this.options.pluralSeparator}zero`]&&_.indexOf(`${this.options.pluralSeparator}zero`)<0&&_.push(`${this.options.pluralSeparator}zero`),_.forEach(F=>{q([R],o+F,n[`defaultValue${F}`]||V)})}):q($,o,V))}d=this.extendTranslation(d,t,n,f,r),E&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${c}:${o}`),(E||b)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,b?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(f.res=d,f.usedParams=this.getUsedParamsDetails(n),f):d}extendTranslation(t,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const l=re(t)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(l){const d=t.match(this.interpolator.nestingRegexp);u=d&&d.length}let f=r.replace&&!re(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||i.usedLng,r),l){const d=t.match(this.interpolator.nestingRegexp),h=d&&d.length;u<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return s&&s[0]===h[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):o.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,c=re(a)?[a]:a;return t!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(t=M0.handle(c,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return re(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(c,n),u=l.key;i=u;let f=l.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const d=n.count!==void 0&&!re(n.count),h=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(re(n.context)||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(v=>{this.isValidLookup(r)||(a=v,!bg[`${m[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(bg[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(g=>{if(this.isValidLookup(r))return;o=g;const y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,g,v,n);else{let b;d&&(b=this.pluralResolver.getSuffix(g,n.count,n));const E=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(y.push(u+b),n.ordinal&&b.indexOf(k)===0&&y.push(u+b.replace(k,this.options.pluralSeparator)),h&&y.push(u+E)),p){const T=`${u}${this.options.contextSeparator}${n.context}`;y.push(T),d&&(y.push(T+b),n.ordinal&&b.indexOf(k)===0&&y.push(T+b.replace(k,this.options.pluralSeparator)),h&&y.push(T+E))}}let S;for(;S=y.pop();)this.isValidLookup(r)||(s=S,r=this.getResource(g,v,S,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!re(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const Tu=e=>e.charAt(0).toUpperCase()+e.slice(1);class wg{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=On.create("languageUtils")}getScriptPartFromCode(t){if(t=jc(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=jc(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(re(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Tu(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Tu(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Tu(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),re(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return re(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):re(t)&&s(this.formatLanguageCode(t)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let YO=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],QO={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const XO=["v1","v2","v3"],ZO=["v4"],Cg={zero:0,one:1,two:2,few:3,many:4,other:5},eN=()=>{const e={};return YO.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:QO[t.fc]}})}),e};class tN{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=On.create("pluralResolver"),(!this.options.compatibilityJSON||ZO.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=eN(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=jc(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];const o=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[s]=o,o}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>Cg[i]-Cg[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!XO.includes(this.options.compatibilityJSON)}}const Eg=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=BO(e,t,n);return!s&&i&&re(n)&&(s=ef(e,n,r),s===void 0&&(s=ef(t,n,r))),s},Ru=e=>e.replace(/\$/g,"$$$$");class nN{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=On.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:l,unescapeSuffix:u,unescapePrefix:f,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:g,alwaysFormat:y}=t.interpolation;this.escape=n!==void 0?n:HO,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?gi(s):o||"{{",this.suffix=a?gi(a):c||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?gi(d):h||gi("$t("),this.nestingSuffix=p?gi(p):m||gi(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=g||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let s,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=h=>{if(h.indexOf(this.formatSeparator)<0){const g=Eg(n,c,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,r,{...i,...n,interpolationkey:h}):g}const p=h.split(this.formatSeparator),m=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format(Eg(n,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...i,...n,interpolationkey:m})};this.resetRegExp();const u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Ru(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Ru(this.escape(h)):Ru(h)}].forEach(h=>{for(a=0;s=h.regex.exec(t);){const p=s[1].trim();if(o=l(p),o===void 0)if(typeof u=="function"){const v=u(t,s,i);o=re(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))o="";else if(f){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),o="";else!re(o)&&!this.useRawValueToEscape&&(o=mg(o));const m=h.safeValue(o);if(t=t.replace(s[0],m),f?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const a=(c,l)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const f=c.split(new RegExp(`${u}[ ]*{`));let d=`{${f[1]}`;c=f[0],d=this.interpolate(d,o);const h=d.match(/'/g),p=d.match(/"/g);(h&&h.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),l&&(o={...l,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${u}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(t);){let c=[];o={...r},o=o.replace&&!re(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=u.shift(),c=u,l=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&!re(s))return s;re(s)||(s=mg(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),s=""),l&&(s=c.reduce((u,f)=>this.format(u,f,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}}const rN=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),l=c.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();n[u]||(n[u]=l),l==="false"&&(n[u]=!1),l==="true"&&(n[u]=!0),isNaN(l)||(n[u]=parseInt(l,10))}})}return{formatName:t,formatOptions:n}},vi=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=t[o];return a||(a=e(jc(r),i),t[o]=a),a(n)}};class iN{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=On.create("formatter"),this.options=t,this.formats={number:vi((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:vi((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:vi((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:vi((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:vi((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=vi(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,c)=>{const{formatName:l,formatOptions:u}=rN(c);if(this.formats[l]){let f=a;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||r;f=this.formats[l](a,h,{...u,...i,...d})}catch(d){this.logger.warn(d)}return f}else this.logger.warn(`there was no format function for ${l}`);return a},t)}}const sN=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class oN extends Rl{constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=On.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const s={},o={},a={},c={};return t.forEach(l=>{let u=!0;n.forEach(f=>{const d=`${l}|${f}`;!r.reload&&this.store.hasResourceBundle(l,f)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,u=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),c[f]===void 0&&(c[f]=!0)))}),u||(a[l]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(t,n,r){const i=t.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(c=>{VO(c.loaded,[s],o),sN(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(l=>{a[l]||(a[l]={});const u=c.loaded[l];u.length&&u.forEach(f=>{a[l][f]===void 0&&(a[l][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(l,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(l&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,s*2,o)},s);return}o(l,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const l=c(t,n);l&&typeof l.then=="function"?l.then(u=>a(null,u)).catch(a):a(null,l)}catch(l){a(l)}return}return c(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();re(t)&&(t=this.languageUtils.toResolveHierarchy(t)),re(n)&&(n=[n]);const s=this.queueLoad(t,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(t,o,a)})}saveMissing(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let u;l.length===5?u=l(t,n,r,i,c):u=l(t,n,r,i),u&&typeof u.then=="function"?u.then(f=>a(null,f)).catch(a):a(null,u)}catch(u){a(u)}else l(t,n,r,i,a,c)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const kg=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),re(e[1])&&(t.defaultValue=e[1]),re(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Tg=e=>(re(e.ns)&&(e.ns=[e.ns]),re(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),re(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),va=()=>{},aN=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class _o extends Rl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Tg(t),this.services={},this.logger=On,this.modules={external:[]},aN(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(re(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=kg();this.options={...i,...this.options,...Tg(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?On.init(s(this.modules.logger),this.options):On.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=iN);const f=new wg(this.options);this.store=new Sg(this.options.resources,this.options);const d=this.services;d.logger=On,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new tN(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(u),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new nN(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new oN(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];t.emit(h,...m)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new $c(this.services,this.options),this.translator.on("*",function(h){for(var p=arguments.length,m=new Array(p>1?p-1:0),v=1;v<p;v++)m[v-1]=arguments[v];t.emit(h,...m)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=va),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const c=Os(),l=()=>{const u=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(d),r(f,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),c}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:va;const i=re(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(l=>{l!=="cimode"&&s.indexOf(l)<0&&s.push(l)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=Os();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=va),this.services.backendConnector.reload(t,n,s=>{i.resolve(),r(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&M0.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=Os();this.emit("languageChanging",t);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,l)=>{l?(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},a=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const l=re(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);l&&(this.language||s(l),this.translator.language||this.translator.changeLanguage(l),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(l)),this.loadResources(l,u=>{o(u,l)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,n,r){var i=this;const s=function(o,a){let c;if(typeof a!="object"){for(var l=arguments.length,u=new Array(l>2?l-2:0),f=2;f<l;f++)u[f-2]=arguments[f];c=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else c={...a};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const d=i.options.keySeparator||".";let h;return c.keyPrefix&&Array.isArray(o)?h=o.map(p=>`${c.keyPrefix}${d}${p}`):h=c.keyPrefix?`${c.keyPrefix}${d}${o}`:o,i.t(h,c)};return re(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const l=this.services.backendConnector.state[`${a}|${c}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}loadNamespaces(t,n){const r=Os();return this.options.ns?(re(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Os();re(t)&&(t=[t]);const i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new wg(kg());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new _o(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:va;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},s=new _o(i);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new Sg(this.store.data,i),s.services.resourceStore=s.store),s.translator=new $c(s.services,i),s.translator.on("*",function(a){for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const gt=_o.createInstance();gt.createInstance=_o.createInstance;gt.createInstance;gt.dir;gt.init;gt.loadResources;gt.reloadResources;gt.use;gt.changeLanguage;gt.getFixedT;gt.t;gt.exists;gt.setDefaultNamespace;gt.hasLoadedNamespace;gt.loadNamespaces;gt.loadLanguages;const F0=C.createContext(void 0),cN=e=>{const{call:t,children:n}=e;return w.jsx(F0.Provider,{value:t,children:n})},Qe=()=>C.useContext(F0),lN=(e,t)=>Object.entries(e).reduce((n,[r,i])=>(n[r]={[t]:i},n),{}),uN="en",tf="stream-video",_u={debug:!1,currentLanguage:uN,fallbackLanguage:!1},dN=lN({},tf),Fh=e=>e;class fN{constructor(t={}){this.t=Fh,this.init=async()=>{try{this.t=await this.i18nInstance.init()}catch(o){console.error(`Failed to initialize translations: ${JSON.stringify(o)}`)}return this},this.changeLanguage=async(o,a)=>{if(!this._checkIsInitialized())return;const c=typeof window<"u"&&window.navigator?window.navigator.language:void 0;await this.i18nInstance.changeLanguage(o||c),a==null||a(this.currentLanguage)},this.registerTranslationsForLanguage=({lng:o,translations:a})=>{this._checkIsInitialized()&&this.i18nInstance.addResourceBundle(o,tf,a,!0,!0)},this._checkIsInitialized=()=>(this.i18nInstance.isInitialized||console.warn("I18n instance is not initialized. Call yourStreamI18nInstance.init()."),this.i18nInstance.isInitialized);const{debug:n=_u.debug,currentLanguage:r=_u.currentLanguage,fallbackLanguage:i=_u.fallbackLanguage,translationsOverrides:s}=t;this.i18nInstance=gt.createInstance({debug:n,defaultNS:tf,fallbackLng:i,interpolation:{escapeValue:!1},keySeparator:!1,lng:r,nsSeparator:!1,parseMissingKeyHandler:o=>o,resources:dN}),s&&this.i18nInstance.on("initialized",()=>{Object.entries(s).forEach(([o,a])=>{this.registerTranslationsForLanguage({lng:o,translations:a})})})}get currentLanguage(){return this._checkIsInitialized(),this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const j0=C.createContext({t:Fh}),hN=({children:e,...t})=>{const{i18n:n,t:r}=pN(t);return w.jsx(j0.Provider,{value:{t:r,i18n:n},children:e})},pN=({i18nInstance:e,language:t,fallbackLanguage:n,translationsOverrides:r})=>{const[i]=C.useState(()=>e||new fN({currentLanguage:t,fallbackLanguage:n,translationsOverrides:r})),[s,o]=C.useState(()=>Fh);return C.useEffect(()=>{const{isInitialized:a}=i;if(!a){i.init().then(c=>o(()=>c.i18nInstance.t));return}t&&(i==null?void 0:i.currentLanguage)!==t&&i.changeLanguage(t).catch(c=>{console.log("Error while changing language",c)})},[i,e,t,r]),{i18n:i,t:s}},tt=()=>C.useContext(j0),mN=C.createContext(void 0),gN=({children:e,client:t,i18nInstance:n,language:r,translationsOverrides:i})=>w.jsx(mN.Provider,{value:t,children:w.jsx(hN,{i18nInstance:n,language:r,translationsOverrides:i,children:e})}),Z=(e,t)=>{const[n,r]=C.useState(()=>{try{return cP.getCurrentValue(e)}catch(i){if(typeof t>"u")throw i;return t}});return C.useEffect(()=>{const i=e.subscribe({next:r,error:s=>{console.log("An error occurred while reading an observable",s),t&&r(t)}});return()=>{i.unsubscribe()}},[t,e]),n},vN=()=>{var e;return typeof navigator>"u"?!1:((e=navigator.product)==null?void 0:e.toLowerCase())==="reactnative"},jh=Object.freeze([]),ve=()=>{const e=Qe();return e?e.state:(console.warn('You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.'),new C0)},U0=()=>{const{recording$:e}=ve();return Z(e)},yN=()=>{const{egress$:e}=ve(),t=Z(e);return t?t.broadcasting:!1},SN=()=>{const{backstage$:e}=ve();return!Z(e)},bN=()=>{const{blockedUserIds$:e}=ve();return Z(e)},wN=()=>{const{createdAt$:e}=ve();return Z(e)},CN=()=>{const{endedAt$:e}=ve();return Z(e)},EN=()=>{const{startsAt$:e}=ve();return Z(e)},kN=()=>{const{updatedAt$:e}=ve();return Z(e)},TN=()=>{const{createdBy$:e}=ve();return Z(e)},RN=()=>{const{custom$:e}=ve();return Z(e)},_N=()=>{const{egress$:e}=ve();return Z(e)},IN=()=>{const{ingress$:e}=ve();return Z(e)},xN=()=>{const{session$:e}=ve();return Z(e)},PN=()=>{const{settings$:e}=ve();return Z(e)},ON=()=>{const{transcribing$:e}=ve();return Z(e)},NN=()=>{const{endedBy$:e}=ve();return Z(e)},AN=()=>{const{hasOngoingScreenShare$:e}=ve();return Z(e)},DN=()=>{const{callStatsReport$:e}=ve();return Z(e)},LN=()=>{const{dominantSpeaker$:e}=ve();return Z(e)},MN=()=>{const{members$:e}=ve();return Z(e)},FN=()=>{const{callingState$:e}=ve();return Z(e)},jN=()=>{const{startedAt$:e}=ve();return Z(e)},UN=({sortBy:e}={})=>{const{participants$:t}=ve(),n=Z(t);return C.useMemo(()=>e?[...n].sort(e):n,[n,e])},$N=()=>{const{localParticipant$:e}=ve();return Z(e)},VN=()=>{const{remoteParticipants$:e}=ve();return Z(e)},BN=()=>{const{participantCount$:e}=ve();return Z(e)},zN=()=>{const{anonymousParticipantCount$:e}=ve();return Z(e)},HN=()=>{const{thumbnails$:e}=ve();return Z(e)},$0=()=>{const{ownCapabilities$:e}=ve();return Z(e)},WN=(...e)=>{const t=$0();return e.every(n=>t==null?void 0:t.includes(n))},qN=()=>{const e=Qe(),{camera:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),{state:r}=t,i=Z(r.status$),s=Z(r.optimisticStatus$),o=Z(r.direction$),a=Z(r.mediaStream$),c=Z(r.selectedDevice$),l=Z(n,jh),u=Z(r.hasBrowserPermission$);return{camera:t,status:i,optimisticStatus:s,isEnabled:i==="enabled",direction:o,mediaStream:a,devices:l,hasBrowserPermission:u,selectedDevice:c,isMute:i!=="enabled",optimisticIsMute:s!=="enabled"}},KN=()=>{const e=Qe(),{microphone:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),{state:r}=t,i=Z(r.status$),s=Z(r.optimisticStatus$),o=Z(r.mediaStream$),a=Z(r.selectedDevice$),c=Z(n,jh),l=Z(r.hasBrowserPermission$),u=Z(r.speakingWhileMuted$);return{microphone:t,status:i,optimisticStatus:s,isEnabled:i==="enabled",mediaStream:o,devices:c,selectedDevice:a,hasBrowserPermission:l,isSpeakingWhileMuted:u,isMute:i!=="enabled",optimisticIsMute:s!=="enabled"}},GN=()=>{if(vN())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const e=Qe(),{speaker:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),r=Z(n,jh),i=Z(t.state.selectedDevice$);return{speaker:t,devices:r,selectedDevice:i,isDeviceSelectionSupported:t.state.isDeviceSelectionSupported}},JN=()=>{const e=Qe(),{screenShare:t}=e,n=Z(t.state.status$),r=Z(t.state.optimisticStatus$),i=Z(t.state.mediaStream$),s=n!=="enabled",o=r??n;return{screenShare:t,mediaStream:i,status:n,optimisticStatus:o,isMute:s,optimisticIsMute:o!=="enabled"}},YN=()=>{const e=Qe();return Z(e.dynascaleManager.incomingVideoSettings$)};var QN=Object.freeze({__proto__:null,useAnonymousParticipantCount:zN,useCallBlockedUserIds:bN,useCallCallingState:FN,useCallCreatedAt:wN,useCallCreatedBy:TN,useCallCustomData:RN,useCallEgress:_N,useCallEndedAt:CN,useCallEndedBy:NN,useCallIngress:IN,useCallMembers:MN,useCallSession:xN,useCallSettings:PN,useCallStartedAt:jN,useCallStartsAt:EN,useCallState:ve,useCallStatsReport:DN,useCallThumbnail:HN,useCallUpdatedAt:kN,useCameraState:qN,useDominantSpeaker:LN,useHasOngoingScreenShare:AN,useHasPermissions:WN,useIncomingVideoSettings:YN,useIsCallHLSBroadcastingInProgress:yN,useIsCallLive:SN,useIsCallRecordingInProgress:U0,useIsCallTranscribingInProgress:ON,useLocalParticipant:$N,useMicrophoneState:KN,useOwnCapabilities:$0,useParticipantCount:BN,useParticipants:UN,useRemoteParticipants:VN,useScreenShareState:JN,useSpeakerState:GN});const XN=()=>{const e=Qe(),t=U0(),[n,r]=C.useState(!1);return C.useEffect(()=>{r(s=>s&&!1)},[t]),{toggleCallRecording:C.useCallback(async()=>{try{r(!0),t?await(e==null?void 0:e.stopRecording()):await(e==null?void 0:e.startRecording())}catch(s){console.error("Failed start recording",s)}},[e,t]),isAwaitingResponse:n,isCallRecordingInProgress:t}},ln=()=>QN,Dt=({canRequestOnly:e,hasPermissionsOnly:t,requiredGrants:n,requireAll:r=!0,children:i})=>{const s=Qe(),{useCallSettings:o,useOwnCapabilities:a}=ln(),c=a(),l=o(),u=n[r?"every":"some"](d=>c==null?void 0:c.includes(d));if(t)return u?w.jsx(w.Fragment,{children:i}):null;const f=n.some(d=>s==null?void 0:s.permissionsContext.canRequest(d,l));return e?f?w.jsx(w.Fragment,{children:i}):null:u||f?w.jsx(w.Fragment,{children:i}):null};function _l(){return typeof window<"u"}function Ur(e){return V0(e)?(e.nodeName||"").toLowerCase():"#document"}function Gt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $n(e){var t;return(t=(V0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function V0(e){return _l()?e instanceof Node||e instanceof Gt(e).Node:!1}function je(e){return _l()?e instanceof Element||e instanceof Gt(e).Element:!1}function Ge(e){return _l()?e instanceof HTMLElement||e instanceof Gt(e).HTMLElement:!1}function nf(e){return!_l()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gt(e).ShadowRoot}function Bo(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Yt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function ZN(e){return["table","td","th"].includes(Ur(e))}function Il(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Uh(e){const t=xl(),n=je(e)?Yt(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function eA(e){let t=rr(e);for(;Ge(t)&&!Ar(t);){if(Uh(t))return t;if(Il(t))return null;t=rr(t)}return null}function xl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ar(e){return["html","body","#document"].includes(Ur(e))}function Yt(e){return Gt(e).getComputedStyle(e)}function Pl(e){return je(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rr(e){if(Ur(e)==="html")return e;const t=e.assignedSlot||e.parentNode||nf(e)&&e.host||$n(e);return nf(t)?t.host:t}function B0(e){const t=rr(e);return Ar(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ge(t)&&Bo(t)?t:B0(t)}function Ir(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=B0(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Gt(i);if(s){const a=rf(o);return t.concat(o,o.visualViewport||[],Bo(i)?i:[],a&&n?Ir(a):[])}return t.concat(i,Ir(i,[],n))}function rf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Kn(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Pt(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&nf(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function $h(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function z0(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function H0(e){return e.mozInputSource===0&&e.isTrusted?!0:sf()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function W0(e){return nA()?!1:!sf()&&e.width===0&&e.height===0||sf()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function q0(){return/apple/i.test(navigator.vendor)}function sf(){const e=/android/i;return e.test($h())||e.test(z0())}function tA(){return $h().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function nA(){return z0().includes("jsdom/")}function Rg(e,t){return["mouse","pen"].includes(e)}function rA(e){return"nativeEvent"in e}function iA(e){return e.matches("html,body")}function en(e){return(e==null?void 0:e.ownerDocument)||document}function Iu(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function zr(e){return"composedPath"in e?e.composedPath()[0]:e.target}const sA="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function K0(e){return Ge(e)&&e.matches(sA)}function rt(e){e.preventDefault(),e.stopPropagation()}function of(e){return e?e.getAttribute("role")==="combobox"&&K0(e):!1}const Dr=Math.min,zt=Math.max,Vc=Math.round,Ai=Math.floor,Fn=e=>({x:e,y:e}),oA={left:"right",right:"left",bottom:"top",top:"bottom"},aA={start:"end",end:"start"};function af(e,t,n){return zt(e,Dr(t,n))}function hs(e,t){return typeof e=="function"?e(t):e}function Lr(e){return e.split("-")[0]}function ps(e){return e.split("-")[1]}function G0(e){return e==="x"?"y":"x"}function Vh(e){return e==="y"?"height":"width"}function oi(e){return["top","bottom"].includes(Lr(e))?"y":"x"}function Bh(e){return G0(oi(e))}function cA(e,t,n){n===void 0&&(n=!1);const r=ps(e),i=Bh(e),s=Vh(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Bc(o)),[o,Bc(o)]}function lA(e){const t=Bc(e);return[cf(e),t,cf(t)]}function cf(e){return e.replace(/start|end/g,t=>aA[t])}function uA(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function dA(e,t,n,r){const i=ps(e);let s=uA(Lr(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(cf)))),s}function Bc(e){return e.replace(/left|right|bottom|top/g,t=>oA[t])}function fA(e){return{top:0,right:0,bottom:0,left:0,...e}}function J0(e){return typeof e!="number"?fA(e):{top:e,right:e,bottom:e,left:e}}function zc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var hA=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Hc=hA.join(","),Y0=typeof Element>"u",rs=Y0?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Wc=!Y0&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},qc=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=i===""||i==="true",o=s||n&&t&&e(t.parentNode);return o},pA=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},mA=function(t,n,r){if(qc(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Hc));return n&&rs.call(t,Hc)&&i.unshift(t),i=i.filter(r),i},gA=function e(t,n,r){for(var i=[],s=Array.from(t);s.length;){var o=s.shift();if(!qc(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),c=a.length?a:o.children,l=e(c,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:o,candidates:l})}else{var u=rs.call(o,Hc);u&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),d=!qc(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&d){var h=e(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:o,candidates:h})}else s.unshift.apply(s,o.children)}}return i},Q0=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},X0=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||pA(t))&&!Q0(t)?0:t.tabIndex},vA=function(t,n){var r=X0(t);return r<0&&n&&!Q0(t)?0:r},yA=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},Z0=function(t){return t.tagName==="INPUT"},SA=function(t){return Z0(t)&&t.type==="hidden"},bA=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},wA=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},CA=function(t){if(!t.name)return!0;var n=t.form||Wc(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=wA(i,t.form);return!s||s===t},EA=function(t){return Z0(t)&&t.type==="radio"},kA=function(t){return EA(t)&&!CA(t)},TA=function(t){var n,r=t&&Wc(t),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var o,a,c;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!s&&i;){var l,u,f;r=Wc(i),i=(l=r)===null||l===void 0?void 0:l.host,s=!!((u=i)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},_g=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},RA=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=rs.call(t,"details>summary:first-of-type"),o=s?t.parentElement:t;if(rs.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var c=t.parentElement,l=Wc(t);if(c&&!c.shadowRoot&&i(c)===!0)return _g(t);t.assignedSlot?t=t.assignedSlot:!c&&l!==t.ownerDocument?t=l.host:t=c}t=a}if(TA(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return _g(t);return!1},_A=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return rs.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},IA=function(t,n){return!(n.disabled||qc(n)||SA(n)||RA(n,t)||bA(n)||_A(n))},lf=function(t,n){return!(kA(n)||X0(n)<0||!IA(t,n))},xA=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},PA=function e(t){var n=[],r=[];return t.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,c=vA(a,o),l=o?e(i.candidates):a;c===0?o?n.push.apply(n,l):n.push(a):r.push({documentOrder:s,tabIndex:c,item:i,isScope:o,content:l})}),r.sort(yA).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},Ol=function(t,n){n=n||{};var r;return n.getShadowRoot?r=gA([t],n.includeContainer,{filter:lf.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:xA}):r=mA(t,n.includeContainer,lf.bind(null,n)),PA(r)},OA=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return rs.call(t,Hc)===!1?!1:lf(n,t)};function Ig(e,t,n){let{reference:r,floating:i}=e;const s=oi(t),o=Bh(t),a=Vh(o),c=Lr(t),l=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(ps(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const NA=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=Ig(l,r,c),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:v,fn:g}=a[m],{x:y,y:S,data:b,reset:E}=await g({x:u,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});u=y??u,f=S??f,h={...h,[v]:{...h[v],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:u,y:f}=Ig(l,d,c)),m=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}};async function zh(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=hs(t,e),p=J0(h),v=a[d?f==="floating"?"reference":"floating":f],g=zc(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},E=zc(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:S,strategy:c}):y);return{top:(g.top-E.top+p.top)/b.y,bottom:(E.bottom-g.bottom+p.bottom)/b.y,left:(g.left-E.left+p.left)/b.x,right:(E.right-g.right+p.right)/b.x}}const AA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=hs(e,t)||{};if(l==null)return{};const f=J0(u),d={x:n,y:r},h=Bh(i),p=Vh(h),m=await o.getDimensions(l),v=h==="y",g=v?"top":"left",y=v?"bottom":"right",S=v?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=k?k[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(k)))&&(T=a.floating[S]||s.floating[p]);const x=b/2-E/2,j=T/2-m[p]/2-1,P=Dr(f[g],j),V=Dr(f[y],j),N=P,D=T-m[p]-V,W=T/2-m[p]/2+x,$=af(N,W,D),L=!c.arrow&&ps(i)!=null&&W!==$&&s.reference[p]/2-(W<N?P:V)-m[p]/2<0,q=L?W<N?W-N:W-D:0;return{[h]:d[h]+q,data:{[h]:$,centerOffset:W-$-q,...L&&{alignmentOffset:q}},reset:L}}}),DA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...v}=hs(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Lr(i),y=oi(a),S=Lr(a)===a,b=await(c.isRTL==null?void 0:c.isRTL(l.floating)),E=d||(S||!m?[Bc(a)]:lA(a)),k=p!=="none";!d&&k&&E.push(...dA(a,m,p,b));const T=[a,...E],x=await zh(t,v),j=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&j.push(x[g]),f){const W=cA(i,o,b);j.push(x[W[0]],x[W[1]])}if(P=[...P,{placement:i,overflows:j}],!j.every(W=>W<=0)){var V,N;const W=(((V=s.flip)==null?void 0:V.index)||0)+1,$=T[W];if($)return{data:{index:W,overflows:P},reset:{placement:$}};let L=(N=P.filter(q=>q.overflows[0]<=0).sort((q,R)=>q.overflows[1]-R.overflows[1])[0])==null?void 0:N.placement;if(!L)switch(h){case"bestFit":{var D;const q=(D=P.filter(R=>{if(k){const _=oi(R.placement);return _===y||_==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(_=>_>0).reduce((_,F)=>_+F,0)]).sort((R,_)=>R[1]-_[1])[0])==null?void 0:D[0];q&&(L=q);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};async function LA(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Lr(n),a=ps(n),c=oi(n)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,f=hs(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:d*l}:{x:d*l,y:h*u}}const MA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,c=await LA(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},FA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...c}=hs(e,t),l={x:n,y:r},u=await zh(t,c),f=oi(Lr(i)),d=G0(f);let h=l[d],p=l[f];if(s){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=h+u[v],S=h-u[g];h=af(y,h,S)}if(o){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=p+u[v],S=p-u[g];p=af(y,p,S)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[d]:s,[f]:o}}}}}},jA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:c=()=>{},...l}=hs(e,t),u=await zh(t,l),f=Lr(i),d=ps(i),h=oi(i)==="y",{width:p,height:m}=s.floating;let v,g;f==="top"||f==="bottom"?(v=f,g=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,v=d==="end"?"top":"bottom");const y=m-u.top-u.bottom,S=p-u.left-u.right,b=Dr(m-u[v],y),E=Dr(p-u[g],S),k=!t.middlewareData.shift;let T=b,x=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(x=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=y),k&&!d){const P=zt(u.left,0),V=zt(u.right,0),N=zt(u.top,0),D=zt(u.bottom,0);h?x=p-2*(P!==0||V!==0?P+V:zt(u.left,u.right)):T=m-2*(N!==0||D!==0?N+D:zt(u.top,u.bottom))}await c({...t,availableWidth:x,availableHeight:T});const j=await o.getDimensions(a.floating);return p!==j.width||m!==j.height?{reset:{rects:!0}}:{}}}};function ew(e){const t=Yt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ge(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=Vc(n)!==s||Vc(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Hh(e){return je(e)?e:e.contextElement}function zi(e){const t=Hh(e);if(!Ge(t))return Fn(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=ew(t);let o=(s?Vc(n.width):n.width)/r,a=(s?Vc(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const UA=Fn(0);function tw(e){const t=Gt(e);return!xl()||!t.visualViewport?UA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $A(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gt(e)?!1:t}function ai(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Hh(e);let o=Fn(1);t&&(r?je(r)&&(o=zi(r)):o=zi(e));const a=$A(s,n,r)?tw(s):Fn(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const d=Gt(s),h=r&&je(r)?Gt(r):r;let p=d,m=rf(p);for(;m&&r&&h!==p;){const v=zi(m),g=m.getBoundingClientRect(),y=Yt(m),S=g.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,b=g.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,f*=v.y,c+=S,l+=b,p=Gt(m),m=rf(p)}}return zc({width:u,height:f,x:c,y:l})}function Wh(e,t){const n=Pl(e).scrollLeft;return t?t.left+n:ai($n(e)).left+n}function nw(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:Wh(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function VA(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=$n(r),a=t?Il(t.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=Fn(1);const u=Fn(0),f=Ge(r);if((f||!f&&!s)&&((Ur(r)!=="body"||Bo(o))&&(c=Pl(r)),Ge(r))){const h=ai(r);l=zi(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const d=o&&!f&&!s?nw(o,c,!0):Fn(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+d.x,y:n.y*l.y-c.scrollTop*l.y+u.y+d.y}}function BA(e){return Array.from(e.getClientRects())}function zA(e){const t=$n(e),n=Pl(e),r=e.ownerDocument.body,i=zt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=zt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Wh(e);const a=-n.scrollTop;return Yt(r).direction==="rtl"&&(o+=zt(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function HA(e,t){const n=Gt(e),r=$n(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=xl();(!l||l&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function WA(e,t){const n=ai(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ge(e)?zi(e):Fn(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function xg(e,t,n){let r;if(t==="viewport")r=HA(e,n);else if(t==="document")r=zA($n(e));else if(je(t))r=WA(t,n);else{const i=tw(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return zc(r)}function rw(e,t){const n=rr(e);return n===t||!je(n)||Ar(n)?!1:Yt(n).position==="fixed"||rw(n,t)}function qA(e,t){const n=t.get(e);if(n)return n;let r=Ir(e,[],!1).filter(a=>je(a)&&Ur(a)!=="body"),i=null;const s=Yt(e).position==="fixed";let o=s?rr(e):e;for(;je(o)&&!Ar(o);){const a=Yt(o),c=Uh(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Bo(o)&&!c&&rw(e,o))?r=r.filter(u=>u!==o):i=a,o=rr(o)}return t.set(e,r),r}function KA(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Il(t)?[]:qA(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const f=xg(t,u,i);return l.top=zt(f.top,l.top),l.right=Dr(f.right,l.right),l.bottom=Dr(f.bottom,l.bottom),l.left=zt(f.left,l.left),l},xg(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function GA(e){const{width:t,height:n}=ew(e);return{width:t,height:n}}function JA(e,t,n){const r=Ge(t),i=$n(t),s=n==="fixed",o=ai(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=Fn(0);if(r||!r&&!s)if((Ur(t)!=="body"||Bo(i))&&(a=Pl(t)),r){const d=ai(t,!0,s,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else i&&(c.x=Wh(i));const l=i&&!r&&!s?nw(i,a):Fn(0),u=o.left+a.scrollLeft-c.x-l.x,f=o.top+a.scrollTop-c.y-l.y;return{x:u,y:f,width:o.width,height:o.height}}function xu(e){return Yt(e).position==="static"}function Pg(e,t){if(!Ge(e)||Yt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $n(e)===n&&(n=n.ownerDocument.body),n}function iw(e,t){const n=Gt(e);if(Il(e))return n;if(!Ge(e)){let i=rr(e);for(;i&&!Ar(i);){if(je(i)&&!xu(i))return i;i=rr(i)}return n}let r=Pg(e,t);for(;r&&ZN(r)&&xu(r);)r=Pg(r,t);return r&&Ar(r)&&xu(r)&&!Uh(r)?n:r||eA(e)||n}const YA=async function(e){const t=this.getOffsetParent||iw,n=this.getDimensions,r=await n(e.floating);return{reference:JA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QA(e){return Yt(e).direction==="rtl"}const XA={convertOffsetParentRelativeRectToViewportRelativeRect:VA,getDocumentElement:$n,getClippingRect:KA,getOffsetParent:iw,getElementRects:YA,getClientRects:BA,getDimensions:GA,getScale:zi,isElement:je,isRTL:QA};function ZA(e,t){let n=null,r;const i=$n(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const{left:l,top:u,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=Ai(u),p=Ai(i.clientWidth-(l+f)),m=Ai(i.clientHeight-(u+d)),v=Ai(l),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-v+"px",threshold:zt(0,Dr(1,c))||1};let S=!0;function b(E){const k=E[0].intersectionRatio;if(k!==c){if(!S)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,y)}n.observe(e)}return o(!0),s}function sw(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Hh(e),u=i||s?[...l?Ir(l):[],...Ir(t)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const f=l&&a?ZA(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(g=>{let[y]=g;y&&y.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let p,m=c?ai(e):null;c&&v();function v(){const g=ai(e);m&&(g.x!==m.x||g.y!==m.y||g.width!==m.width||g.height!==m.height)&&n(),m=g,p=requestAnimationFrame(v)}return n(),()=>{var g;u.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(g=h)==null||g.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const eD=MA,tD=FA,nD=DA,rD=jA,Og=AA,iD=(e,t,n)=>{const r=new Map,i={platform:XA,...n},s={...i.platform,_c:r};return NA(e,t,{...i,platform:s})};var Ha=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Kc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Kc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!Kc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ow(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ng(e,t){const n=ow(e);return Math.round(t*n)/n}function Pu(e){const t=C.useRef(e);return Ha(()=>{t.current=e}),t}function sD(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(r);Kc(d,r)||h(r);const[p,m]=C.useState(null),[v,g]=C.useState(null),y=C.useCallback(R=>{R!==k.current&&(k.current=R,m(R))},[]),S=C.useCallback(R=>{R!==T.current&&(T.current=R,g(R))},[]),b=s||p,E=o||v,k=C.useRef(null),T=C.useRef(null),x=C.useRef(u),j=c!=null,P=Pu(c),V=Pu(i),N=Pu(l),D=C.useCallback(()=>{if(!k.current||!T.current)return;const R={placement:t,strategy:n,middleware:d};V.current&&(R.platform=V.current),iD(k.current,T.current,R).then(_=>{const F={..._,isPositioned:N.current!==!1};W.current&&!Kc(x.current,F)&&(x.current=F,sh.flushSync(()=>{f(F)}))})},[d,t,n,V,N]);Ha(()=>{l===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,f(R=>({...R,isPositioned:!1})))},[l]);const W=C.useRef(!1);Ha(()=>(W.current=!0,()=>{W.current=!1}),[]),Ha(()=>{if(b&&(k.current=b),E&&(T.current=E),b&&E){if(P.current)return P.current(b,E,D);D()}},[b,E,D,P,j]);const $=C.useMemo(()=>({reference:k,floating:T,setReference:y,setFloating:S}),[y,S]),L=C.useMemo(()=>({reference:b,floating:E}),[b,E]),q=C.useMemo(()=>{const R={position:n,left:0,top:0};if(!L.floating)return R;const _=Ng(L.floating,u.x),F=Ng(L.floating,u.y);return a?{...R,transform:"translate("+_+"px, "+F+"px)",...ow(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:F}},[n,a,L.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:D,refs:$,elements:L,floatingStyles:q}),[u,D,$,L,q])}const oD=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Og({element:r.current,padding:i}).fn(n):{}:r?Og({element:r,padding:i}).fn(n):{}}}},aD=(e,t)=>({...eD(e),options:[e,t]}),cD=(e,t)=>({...tD(e),options:[e,t]}),aw=(e,t)=>({...nD(e),options:[e,t]}),lD=(e,t)=>({...rD(e),options:[e,t]}),uD=(e,t)=>({...oD(e),options:[e,t]}),cw={...Zw},dD=cw.useInsertionEffect,fD=dD||(e=>e());function wt(e){const t=C.useRef(()=>{});return fD(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}const qh="ArrowUp",zo="ArrowDown",is="ArrowLeft",ms="ArrowRight";function ya(e,t,n){return Math.floor(e/t)!==n}function Qs(e,t){return t<0||t>=e.current.length}function Ou(e,t){return dt(e,{disabledIndices:t})}function Ag(e,t){return dt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function dt(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=t===void 0?{}:t;const o=e.current;let a=n;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&Wa(o,a,i));return a}function hD(e,t){let{event:n,orientation:r,loop:i,cols:s,disabledIndices:o,minIndex:a,maxIndex:c,prevIndex:l,stopEvent:u=!1}=t,f=l;if(n.key===qh){if(u&&rt(n),l===-1)f=c;else if(f=dt(e,{startingIndex:f,amount:s,decrement:!0,disabledIndices:o}),i&&(l-s<a||f<0)){const d=l%s,h=c%s,p=c-(h-d);h===d?f=c:f=h>d?p:p-s}Qs(e,f)&&(f=l)}if(n.key===zo&&(u&&rt(n),l===-1?f=a:(f=dt(e,{startingIndex:l,amount:s,disabledIndices:o}),i&&l+s>c&&(f=dt(e,{startingIndex:l%s-s,amount:s,disabledIndices:o}))),Qs(e,f)&&(f=l)),r==="both"){const d=Ai(l/s);n.key===ms&&(u&&rt(n),l%s!==s-1?(f=dt(e,{startingIndex:l,disabledIndices:o}),i&&ya(f,s,d)&&(f=dt(e,{startingIndex:l-l%s-1,disabledIndices:o}))):i&&(f=dt(e,{startingIndex:l-l%s-1,disabledIndices:o})),ya(f,s,d)&&(f=l)),n.key===is&&(u&&rt(n),l%s!==0?(f=dt(e,{startingIndex:l,decrement:!0,disabledIndices:o}),i&&ya(f,s,d)&&(f=dt(e,{startingIndex:l+(s-l%s),decrement:!0,disabledIndices:o}))):i&&(f=dt(e,{startingIndex:l+(s-l%s),decrement:!0,disabledIndices:o})),ya(f,s,d)&&(f=l));const h=Ai(c/s)===d;Qs(e,f)&&(i&&h?f=n.key===is?c:dt(e,{startingIndex:l-l%s-1,disabledIndices:o}):f=l)}return f}function pD(e,t,n){const r=[];let i=0;return e.forEach((s,o)=>{let{width:a,height:c}=s,l=!1;for(n&&(i=0);!l;){const u=[];for(let f=0;f<a;f++)for(let d=0;d<c;d++)u.push(i+f+d*t);i%t+a<=t&&u.every(f=>r[f]==null)?(u.forEach(f=>{r[f]=o}),l=!0):i++}}),[...r]}function mD(e,t,n,r,i){if(e===-1)return-1;const s=n.indexOf(e),o=t[e];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(e)}}function gD(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Wa(e,t,n){if(n)return n.includes(t);const r=e[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}let Dg=0;function dr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(Dg);const s=()=>e==null?void 0:e.focus({preventScroll:n});i?s():Dg=requestAnimationFrame(s)}var Ce=typeof document<"u"?C.useLayoutEffect:C.useEffect;function vD(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function yD(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}const lw=C.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function SD(e){const{children:t,elementsRef:n,labelsRef:r}=e,[i,s]=C.useState(()=>new Map),o=C.useCallback(c=>{s(l=>new Map(l).set(c,null))},[]),a=C.useCallback(c=>{s(l=>{const u=new Map(l);return u.delete(c),u})},[]);return Ce(()=>{const c=new Map(i);Array.from(c.keys()).sort(vD).forEach((u,f)=>{c.set(u,f)}),yD(i,c)||s(c)},[i]),C.createElement(lw.Provider,{value:C.useMemo(()=>({register:o,unregister:a,map:i,elementsRef:n,labelsRef:r}),[o,a,i,n,r])},t)}function bD(e){e===void 0&&(e={});const{label:t}=e,{register:n,unregister:r,map:i,elementsRef:s,labelsRef:o}=C.useContext(lw),[a,c]=C.useState(null),l=C.useRef(null),u=C.useCallback(f=>{if(l.current=f,a!==null&&(s.current[a]=f,o)){var d;const h=t!==void 0;o.current[a]=h?t:(d=f==null?void 0:f.textContent)!=null?d:null}},[a,s,o,t]);return Ce(()=>{const f=l.current;if(f)return n(f),()=>{r(f)}},[n,r]),Ce(()=>{const f=l.current?i.get(l.current):null;f!=null&&c(f)},[i]),C.useMemo(()=>({ref:u,index:a??-1}),[a,u])}function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ss.apply(this,arguments)}let Lg=!1,wD=0;const Mg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+wD++;function CD(){const[e,t]=C.useState(()=>Lg?Mg():void 0);return Ce(()=>{e==null&&t(Mg())},[]),C.useEffect(()=>{Lg=!0},[]),e}const ED=cw.useId,Nl=ED||CD,kD=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s,shift:o}},width:a=14,height:c=7,tipRadius:l=0,strokeWidth:u=0,staticOffset:f,stroke:d,d:h,style:{transform:p,...m}={},...v}=t,g=Nl(),[y,S]=C.useState(!1);if(Ce(()=>{if(!i)return;Yt(i).direction==="rtl"&&S(!0)},[i]),!i)return null;const[b,E]=r.split("-"),k=b==="top"||b==="bottom";let T=f;(k&&o!=null&&o.x||!k&&o!=null&&o.y)&&(T=null);const x=u*2,j=x/2,P=a/2*(l/-8+1),V=c/2*l/4,N=!!h,D=T&&E==="end"?"bottom":"top";let W=T&&E==="end"?"right":"left";T&&y&&(W=E==="end"?"left":"right");const $=(s==null?void 0:s.x)!=null?T||s.x:"",L=(s==null?void 0:s.y)!=null?T||s.y:"",q=h||"M0,0"+(" H"+a)+(" L"+(a-P)+","+(c-V))+(" Q"+a/2+","+c+" "+P+","+(c-V))+" Z",R={top:N?"rotate(180deg)":"",left:N?"rotate(90deg)":"rotate(-90deg)",bottom:N?"":"rotate(180deg)",right:N?"rotate(-90deg)":"rotate(90deg)"}[b];return C.createElement("svg",ss({},v,{"aria-hidden":!0,ref:n,width:N?a:a+x,height:a,viewBox:"0 0 "+a+" "+(c>a?c:a),style:{position:"absolute",pointerEvents:"none",[W]:$,[D]:L,[b]:k||N?"100%":"calc(100% - "+x/2+"px)",transform:[R,p].filter(_=>!!_).join(" "),...m}}),x>0&&C.createElement("path",{clipPath:"url(#"+g+")",fill:"none",stroke:d,strokeWidth:x+(h?0:1),d:q}),C.createElement("path",{stroke:x&&!h?v.fill:"none",d:q}),C.createElement("clipPath",{id:g},C.createElement("rect",{x:-j,y:j*(N?-1:1),width:a+x,height:a})))});function TD(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const RD=C.createContext(null),_D=C.createContext(null),Kh=()=>{var e;return((e=C.useContext(RD))==null?void 0:e.id)||null},Al=()=>C.useContext(_D);function Io(e){return"data-floating-ui-"+e}function xn(e){const t=C.useRef(e);return Ce(()=>{t.current=e}),t}function ID(e,t){var n;let r=[],i=(n=e.find(s=>s.id===t))==null?void 0:n.parentId;for(;i;){const s=e.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function Hi(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function xD(e,t){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Hi(e,s).forEach(c=>{i(c.id,o+1)})}return i(t,0),e.find(s=>s.id===n)}let yi=new WeakMap,Sa=new WeakSet,ba={},Nu=0;const PD=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,uw=e=>e&&(e.host||uw(e.parentNode)),OD=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=uw(n);return e.contains(r)?r:null}).filter(n=>n!=null);function ND(e,t,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=OD(t,e),a=new Set,c=new Set(o),l=[];ba[i]||(ba[i]=new WeakMap);const u=ba[i];o.forEach(f),d(t),a.clear();function f(h){!h||a.has(h)||(a.add(h),h.parentNode&&f(h.parentNode))}function d(h){!h||c.has(h)||[].forEach.call(h.children,p=>{if(Ur(p)!=="script")if(a.has(p))d(p);else{const m=s?p.getAttribute(s):null,v=m!==null&&m!=="false",g=(yi.get(p)||0)+1,y=(u.get(p)||0)+1;yi.set(p,g),u.set(p,y),l.push(p),g===1&&v&&Sa.add(p),y===1&&p.setAttribute(i,""),!v&&s&&p.setAttribute(s,"true")}})}return Nu++,()=>{l.forEach(h=>{const p=(yi.get(h)||0)-1,m=(u.get(h)||0)-1;yi.set(h,p),u.set(h,m),p||(!Sa.has(h)&&s&&h.removeAttribute(s),Sa.delete(h)),m||h.removeAttribute(i)}),Nu--,Nu||(yi=new WeakMap,yi=new WeakMap,Sa=new WeakSet,ba={})}}function Fg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=en(e[0]).body;return ND(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const xo=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function dw(e,t){const n=Ol(e,xo());t==="prev"&&n.reverse();const r=n.indexOf(Kn(en(e)));return n.slice(r+1)[0]}function fw(){return dw(document.body,"next")}function hw(){return dw(document.body,"prev")}function Xs(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Pt(n,r)}function AD(e){Ol(e,xo()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function jg(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Dl={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let DD;function Ug(e){e.key==="Tab"&&(e.target,clearTimeout(DD))}const Gc=C.forwardRef(function(t,n){const[r,i]=C.useState();Ce(()=>(q0()&&i("button"),document.addEventListener("keydown",Ug),()=>{document.removeEventListener("keydown",Ug)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Io("focus-guard")]:"",style:Dl};return C.createElement("span",ss({},t,s))}),pw=C.createContext(null),$g=Io("portal");function LD(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Nl(),i=mw(),[s,o]=C.useState(null),a=C.useRef(null);return Ce(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),Ce(()=>{if(!r||a.current)return;const c=t?document.getElementById(t):null;if(!c)return;const l=document.createElement("div");l.id=r,l.setAttribute($g,""),c.appendChild(l),a.current=l,o(l)},[t,r]),Ce(()=>{if(n===null||!r||a.current)return;let c=n||(i==null?void 0:i.portalNode);c&&!je(c)&&(c=c.current),c=c||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,c.appendChild(l));const u=document.createElement("div");u.id=r,u.setAttribute($g,""),c=l||c,c.appendChild(u),a.current=u,o(u)},[t,n,r,i]),s}function MD(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,s=LD({id:n,root:r}),[o,a]=C.useState(null),c=C.useRef(null),l=C.useRef(null),u=C.useRef(null),f=C.useRef(null),d=o==null?void 0:o.modal,h=o==null?void 0:o.open,p=!!o&&!o.modal&&o.open&&i&&!!(r||s);return C.useEffect(()=>{if(!s||!i||d)return;function m(v){s&&Xs(v)&&(v.type==="focusin"?jg:AD)(s)}return s.addEventListener("focusin",m,!0),s.addEventListener("focusout",m,!0),()=>{s.removeEventListener("focusin",m,!0),s.removeEventListener("focusout",m,!0)}},[s,i,d]),C.useEffect(()=>{s&&(h||jg(s))},[h,s]),C.createElement(pw.Provider,{value:C.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:l,beforeInsideRef:u,afterInsideRef:f,portalNode:s,setFocusManagerState:a}),[i,s])},p&&s&&C.createElement(Gc,{"data-type":"outside",ref:c,onFocus:m=>{if(Xs(m,s)){var v;(v=u.current)==null||v.focus()}else{const g=hw()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus()}}}),p&&s&&C.createElement("span",{"aria-owns":s.id,style:Dl}),s&&sh.createPortal(t,s),p&&s&&C.createElement(Gc,{"data-type":"outside",ref:l,onFocus:m=>{if(Xs(m,s)){var v;(v=f.current)==null||v.focus()}else{const g=fw()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus(),o!=null&&o.closeOnFocusOut&&(o==null||o.onOpenChange(!1,m.nativeEvent,"focus-out"))}}}))}const mw=()=>C.useContext(pw),uf="data-floating-ui-focusable";function gw(e){return e?e.hasAttribute(uf)?e:e.querySelector("["+uf+"]")||e:null}const Vg=20;let Br=[];function Au(e){Br=Br.filter(n=>n.isConnected);let t=e;if(!(!t||Ur(t)==="body")){if(!OA(t,xo())){const n=Ol(t,xo())[0];n&&(t=n)}Br.push(t),Br.length>Vg&&(Br=Br.slice(-Vg))}}function Bg(){return Br.slice().reverse().find(e=>e.isConnected)}const FD=C.forwardRef(function(t,n){return C.createElement("button",ss({},t,{type:"button",ref:n,tabIndex:-1,style:Dl}))});function jD(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:c=!1,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:f=!0}=e,{open:d,refs:h,nodeId:p,onOpenChange:m,events:v,dataRef:g,floatingId:y,elements:{domReference:S,floating:b}}=t,E=typeof o=="number"&&o<0,k=of(S)&&E,T=PD()?s:!0,x=xn(i),j=xn(o),P=xn(a),V=Al(),N=mw(),D=C.useRef(null),W=C.useRef(null),$=C.useRef(!1),L=C.useRef(!1),q=C.useRef(-1),R=N!=null,_=gw(b),F=wt(function(Y){return Y===void 0&&(Y=_),Y?Ol(Y,xo()):[]}),J=wt(Y=>{const te=F(Y);return x.current.map(z=>S&&z==="reference"?S:_&&z==="floating"?_:te).filter(Boolean).flat()});C.useEffect(()=>{$.current=!1},[r]),C.useEffect(()=>{if(r||!l)return;function Y(z){if(z.key==="Tab"){Pt(_,Kn(en(_)))&&F().length===0&&!k&&rt(z);const X=J(),de=zr(z);x.current[0]==="reference"&&de===S&&(rt(z),z.shiftKey?dr(X[X.length-1]):dr(X[1])),x.current[1]==="floating"&&de===_&&z.shiftKey&&(rt(z),dr(X[0]))}}const te=en(_);return te.addEventListener("keydown",Y),()=>{te.removeEventListener("keydown",Y)}},[r,S,_,l,x,k,F,J]),C.useEffect(()=>{if(r||!b)return;function Y(te){const z=zr(te),de=F().indexOf(z);de!==-1&&(q.current=de)}return b.addEventListener("focusin",Y),()=>{b.removeEventListener("focusin",Y)}},[r,b,F]),C.useEffect(()=>{if(r||!f)return;function Y(){L.current=!0,setTimeout(()=>{L.current=!1})}function te(z){const X=z.relatedTarget;queueMicrotask(()=>{const de=!(Pt(S,X)||Pt(b,X)||Pt(X,b)||Pt(N==null?void 0:N.portalNode,X)||X!=null&&X.hasAttribute(Io("focus-guard"))||V&&(Hi(V.nodesRef.current,p).find(Ue=>{var Ae,at;return Pt((Ae=Ue.context)==null?void 0:Ae.elements.floating,X)||Pt((at=Ue.context)==null?void 0:at.elements.domReference,X)})||ID(V.nodesRef.current,p).find(Ue=>{var Ae,at;return((Ae=Ue.context)==null?void 0:Ae.elements.floating)===X||((at=Ue.context)==null?void 0:at.elements.domReference)===X})));if(c&&de&&Kn(en(_))===en(_).body){Ge(_)&&_.focus();const Ue=q.current,Ae=F(),at=Ae[Ue]||Ae[Ae.length-1]||_;Ge(at)&&at.focus()}(k||!l)&&X&&de&&!L.current&&X!==Bg()&&($.current=!0,m(!1,z,"focus-out"))})}if(b&&Ge(S))return S.addEventListener("focusout",te),S.addEventListener("pointerdown",Y),b.addEventListener("focusout",te),()=>{S.removeEventListener("focusout",te),S.removeEventListener("pointerdown",Y),b.removeEventListener("focusout",te)}},[r,S,b,_,l,p,V,N,m,f,c,F,k]),C.useEffect(()=>{var Y;if(r)return;const te=Array.from((N==null||(Y=N.portalNode)==null?void 0:Y.querySelectorAll("["+Io("portal")+"]"))||[]);if(b){const z=[b,...te,D.current,W.current,x.current.includes("reference")||k?S:null].filter(de=>de!=null),X=l||k?Fg(z,T,!T):Fg(z);return()=>{X()}}},[r,S,b,l,x,N,k,T]),Ce(()=>{if(r||!Ge(_))return;const Y=en(_),te=Kn(Y);queueMicrotask(()=>{const z=J(_),X=j.current,de=(typeof X=="number"?z[X]:X.current)||_,Ue=Pt(_,te);!E&&!Ue&&d&&dr(de,{preventScroll:de===_})})},[r,d,_,E,J,j]),Ce(()=>{if(r||!_)return;let Y=!1;const te=en(_),z=Kn(te);let de=g.current.openEvent;Au(z);function Ue(_t){let{open:Zt,reason:un,event:$e,nested:kn}=_t;Zt&&(de=$e),un==="escape-key"&&h.domReference.current&&Au(h.domReference.current),un==="hover"&&$e.type==="mouseleave"&&($.current=!0),un==="outside-press"&&(kn?($.current=!1,Y=!0):$.current=!(H0($e)||W0($e)))}v.on("openchange",Ue);const Ae=te.createElement("span");Ae.setAttribute("tabindex","-1"),Ae.setAttribute("aria-hidden","true"),Object.assign(Ae.style,Dl),R&&S&&S.insertAdjacentElement("afterend",Ae);function at(){return typeof P.current=="boolean"?Bg()||Ae:P.current.current||Ae}return()=>{v.off("openchange",Ue);const _t=Kn(te),Zt=Pt(b,_t)||V&&Hi(V.nodesRef.current,p).some(kn=>{var Vn;return Pt((Vn=kn.context)==null?void 0:Vn.elements.floating,_t)});(Zt||de&&["click","mousedown"].includes(de.type))&&h.domReference.current&&Au(h.domReference.current);const $e=at();queueMicrotask(()=>{P.current&&!$.current&&Ge($e)&&(!($e!==_t&&_t!==te.body)||Zt)&&$e.focus({preventScroll:Y}),Ae.remove()})}},[r,b,_,P,g,h,v,V,p,R,S]),Ce(()=>{if(!r&&N)return N.setFocusManagerState({modal:l,closeOnFocusOut:f,open:d,onOpenChange:m,refs:h}),()=>{N.setFocusManagerState(null)}},[r,N,l,d,m,h,f]),Ce(()=>{if(r||!_||typeof MutationObserver!="function"||E)return;const Y=()=>{const z=_.getAttribute("tabindex"),X=F(),de=Kn(en(b)),Ue=X.indexOf(de);Ue!==-1&&(q.current=Ue),x.current.includes("floating")||de!==h.domReference.current&&X.length===0?z!=="0"&&_.setAttribute("tabindex","0"):z!=="-1"&&_.setAttribute("tabindex","-1")};Y();const te=new MutationObserver(Y);return te.observe(_,{childList:!0,subtree:!0,attributes:!0}),()=>{te.disconnect()}},[r,b,_,h,x,F,E]);function oe(Y){return r||!u||!l?null:C.createElement(FD,{ref:Y==="start"?D:W,onClick:te=>m(!1,te.nativeEvent)},typeof u=="string"?u:"Dismiss")}const He=!r&&T&&(l?!k:!0)&&(R||l);return C.createElement(C.Fragment,null,He&&C.createElement(Gc,{"data-type":"inside",ref:N==null?void 0:N.beforeInsideRef,onFocus:Y=>{if(l){const z=J();dr(i[0]==="reference"?z[0]:z[z.length-1])}else if(N!=null&&N.preserveTabOrder&&N.portalNode)if($.current=!1,Xs(Y,N.portalNode)){const z=fw()||S;z==null||z.focus()}else{var te;(te=N.beforeOutsideRef.current)==null||te.focus()}}}),!k&&oe("start"),n,oe("end"),He&&C.createElement(Gc,{"data-type":"inside",ref:N==null?void 0:N.afterInsideRef,onFocus:Y=>{if(l)dr(J()[0]);else if(N!=null&&N.preserveTabOrder&&N.portalNode)if(f&&($.current=!0),Xs(Y,N.portalNode)){const z=hw()||S;z==null||z.focus()}else{var te;(te=N.afterOutsideRef.current)==null||te.focus()}}}))}let wa=0;function UD(){const e=/iP(hone|ad|od)|iOS/.test($h()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=t.left?parseFloat(t.left):window.scrollX,o=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var a,c;const l=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,u=((c=window.visualViewport)==null?void 0:c.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(o-Math.floor(u))+"px",left:-(s-Math.floor(l))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let zg=()=>{};const $D=C.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return Ce(()=>{if(r)return wa++,wa===1&&(zg=UD()),()=>{wa--,wa===0&&zg()}},[r]),C.createElement("div",ss({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function Hg(e){return Ge(e.target)&&e.target.tagName==="BUTTON"}function Wg(e){return K0(e)}function VD(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=e,{enabled:o=!0,event:a="click",toggle:c=!0,ignoreMouse:l=!1,keyboardHandlers:u=!0}=t,f=C.useRef(),d=C.useRef(!1),h=C.useMemo(()=>({onPointerDown(p){f.current=p.pointerType},onMouseDown(p){const m=f.current;p.button===0&&a!=="click"&&(Rg(m)&&l||(n&&c&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent,"click"):(p.preventDefault(),r(!0,p.nativeEvent,"click"))))},onClick(p){const m=f.current;if(a==="mousedown"&&f.current){f.current=void 0;return}Rg(m)&&l||(n&&c&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,p.nativeEvent,"click"):r(!0,p.nativeEvent,"click"))},onKeyDown(p){f.current=void 0,!(p.defaultPrevented||!u||Hg(p))&&(p.key===" "&&!Wg(s)&&(p.preventDefault(),d.current=!0),p.key==="Enter"&&r(!(n&&c),p.nativeEvent,"click"))},onKeyUp(p){p.defaultPrevented||!u||Hg(p)||Wg(s)||p.key===" "&&d.current&&(d.current=!1,r(!(n&&c),p.nativeEvent,"click"))}}),[i,s,a,l,u,r,n,c]);return C.useMemo(()=>o?{reference:h}:{},[o,h])}const BD={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},zD={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},qg=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function HD(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:l="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=Al(),v=wt(typeof c=="function"?c:()=>!1),g=typeof c=="function"?v:c,y=C.useRef(!1),S=C.useRef(!1),{escapeKey:b,outsidePress:E}=qg(h),{escapeKey:k,outsidePress:T}=qg(p),x=C.useRef(!1),j=wt($=>{var L;if(!n||!o||!a||$.key!=="Escape"||x.current)return;const q=(L=s.current.floatingContext)==null?void 0:L.nodeId,R=m?Hi(m.nodesRef.current,q):[];if(!b&&($.stopPropagation(),R.length>0)){let _=!0;if(R.forEach(F=>{var J;if((J=F.context)!=null&&J.open&&!F.context.dataRef.current.__escapeKeyBubbles){_=!1;return}}),!_)return}r(!1,rA($)?$.nativeEvent:$,"escape-key")}),P=wt($=>{var L;const q=()=>{var R;j($),(R=zr($))==null||R.removeEventListener("keydown",q)};(L=zr($))==null||L.addEventListener("keydown",q)}),V=wt($=>{var L;const q=y.current;y.current=!1;const R=S.current;if(S.current=!1,l==="click"&&R||q||typeof g=="function"&&!g($))return;const _=zr($),F="["+Io("inert")+"]",J=en(i.floating).querySelectorAll(F);let oe=je(_)?_:null;for(;oe&&!Ar(oe);){const z=rr(oe);if(Ar(z)||!je(z))break;oe=z}if(J.length&&je(_)&&!iA(_)&&!Pt(_,i.floating)&&Array.from(J).every(z=>!Pt(oe,z)))return;if(Ge(_)&&W){const z=_.clientWidth>0&&_.scrollWidth>_.clientWidth,X=_.clientHeight>0&&_.scrollHeight>_.clientHeight;let de=X&&$.offsetX>_.clientWidth;if(X&&Yt(_).direction==="rtl"&&(de=$.offsetX<=_.offsetWidth-_.clientWidth),de||z&&$.offsetY>_.clientHeight)return}const He=(L=s.current.floatingContext)==null?void 0:L.nodeId,Y=m&&Hi(m.nodesRef.current,He).some(z=>{var X;return Iu($,(X=z.context)==null?void 0:X.elements.floating)});if(Iu($,i.floating)||Iu($,i.domReference)||Y)return;const te=m?Hi(m.nodesRef.current,He):[];if(te.length>0){let z=!0;if(te.forEach(X=>{var de;if((de=X.context)!=null&&de.open&&!X.context.dataRef.current.__outsidePressBubbles){z=!1;return}}),!z)return}r(!1,$,"outside-press")}),N=wt($=>{var L;const q=()=>{var R;V($),(R=zr($))==null||R.removeEventListener(l,q)};(L=zr($))==null||L.addEventListener(l,q)});C.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=b,s.current.__outsidePressBubbles=E;let $=-1;function L(J){r(!1,J,"ancestor-scroll")}function q(){window.clearTimeout($),x.current=!0}function R(){$=window.setTimeout(()=>{x.current=!1},xl()?5:0)}const _=en(i.floating);a&&(_.addEventListener("keydown",k?P:j,k),_.addEventListener("compositionstart",q),_.addEventListener("compositionend",R)),g&&_.addEventListener(l,T?N:V,T);let F=[];return d&&(je(i.domReference)&&(F=Ir(i.domReference)),je(i.floating)&&(F=F.concat(Ir(i.floating))),!je(i.reference)&&i.reference&&i.reference.contextElement&&(F=F.concat(Ir(i.reference.contextElement)))),F=F.filter(J=>{var oe;return J!==((oe=_.defaultView)==null?void 0:oe.visualViewport)}),F.forEach(J=>{J.addEventListener("scroll",L,{passive:!0})}),()=>{a&&(_.removeEventListener("keydown",k?P:j,k),_.removeEventListener("compositionstart",q),_.removeEventListener("compositionend",R)),g&&_.removeEventListener(l,T?N:V,T),F.forEach(J=>{J.removeEventListener("scroll",L)}),window.clearTimeout($)}},[s,i,a,g,l,n,r,d,o,b,E,j,k,P,V,T,N]),C.useEffect(()=>{y.current=!1},[g,l]);const D=C.useMemo(()=>({onKeyDown:j,[BD[f]]:$=>{u&&r(!1,$.nativeEvent,"reference-press")}}),[j,r,u,f]),W=C.useMemo(()=>({onKeyDown:j,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[zD[l]]:()=>{y.current=!0}}),[j,l]);return C.useMemo(()=>o?{reference:D,floating:W}:{},[o,D,W])}function WD(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Nl(),s=C.useRef({}),[o]=C.useState(()=>TD()),a=Kh()!=null,[c,l]=C.useState(r.reference),u=wt((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=C.useMemo(()=>({setPositionReference:l}),[]),d=C.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return C.useMemo(()=>({dataRef:s,open:t,onOpenChange:u,elements:d,events:o,floatingId:i,refs:f}),[t,u,d,o,i,f])}function vw(e){e===void 0&&(e={});const{nodeId:t}=e,n=WD({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=C.useState(null),[a,c]=C.useState(null),u=(i==null?void 0:i.domReference)||s,f=C.useRef(null),d=Al();Ce(()=>{u&&(f.current=u)},[u]);const h=sD({...e,elements:{...i,...a&&{reference:a}}}),p=C.useCallback(S=>{const b=je(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;c(b),h.refs.setReference(b)},[h.refs]),m=C.useCallback(S=>{(je(S)||S===null)&&(f.current=S,o(S)),(je(h.refs.reference.current)||h.refs.reference.current===null||S!==null&&!je(S))&&h.refs.setReference(S)},[h.refs]),v=C.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),g=C.useMemo(()=>({...h.elements,domReference:u}),[h.elements,u]),y=C.useMemo(()=>({...h,...r,refs:v,elements:g,nodeId:t}),[h,v,g,t,r]);return Ce(()=>{r.dataRef.current.floatingContext=y;const S=d==null?void 0:d.nodesRef.current.find(b=>b.id===t);S&&(S.context=y)}),C.useMemo(()=>({...h,context:y,refs:v,elements:g}),[h,v,g,y])}const Kg="active",Gg="selected";function Du(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Kg]:o,[Gg]:a,...c}=e;s=c}return{...n==="floating"&&{tabIndex:-1,[uf]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(c=>{let[l,u]=c;if(!(i&&[Kg,Gg].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof u=="function"){var f;(f=r.get(l))==null||f.push(u),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(v=>v(...p)).find(v=>v!==void 0)}}}else o[l]=u}),o),{})}}function qD(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=C.useCallback(a=>Du(a,e,"reference"),t),s=C.useCallback(a=>Du(a,e,"floating"),n),o=C.useCallback(a=>Du(a,e,"item"),r);return C.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}let Jg=!1;function Ll(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Yg(e,t){return Ll(t,e===qh||e===zo,e===is||e===ms)}function Lu(e,t,n){return Ll(t,e===zo,n?e===is:e===ms)||e==="Enter"||e===" "||e===""}function KD(e,t,n){return Ll(t,n?e===is:e===ms,e===zo)}function Qg(e,t,n){return Ll(t,n?e===ms:e===is,e===qh)}function GD(e,t){const{open:n,onOpenChange:r,elements:i}=e,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:c=!0,selectedIndex:l=null,allowEscape:u=!1,loop:f=!1,nested:d=!1,rtl:h=!1,virtual:p=!1,focusItemOnOpen:m="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:g=!0,disabledIndices:y=void 0,orientation:S="vertical",cols:b=1,scrollItemIntoView:E=!0,virtualItemRef:k,itemSizes:T,dense:x=!1}=t,j=gw(i.floating),P=xn(j),V=Kh(),N=Al(),D=wt(a),W=of(i.domReference),$=C.useRef(m),L=C.useRef(l??-1),q=C.useRef(null),R=C.useRef(!0),_=C.useRef(D),F=C.useRef(!!i.floating),J=C.useRef(n),oe=C.useRef(!1),He=C.useRef(!1),Y=xn(y),te=xn(n),z=xn(E),X=xn(l),[de,Ue]=C.useState(),[Ae,at]=C.useState(),_t=wt(function(ne,Re,Q){Q===void 0&&(Q=!1);function be(ge){p?(Ue(ge.id),N==null||N.events.emit("virtualfocus",ge),k&&(k.current=ge)):dr(ge,{preventScroll:!0,sync:tA()&&q0()?Jg||oe.current:!1})}const xe=ne.current[Re.current];xe&&be(xe),requestAnimationFrame(()=>{const ge=ne.current[Re.current]||xe;if(!ge)return;xe||be(ge);const vt=z.current;vt&&un&&(Q||!R.current)&&(ge.scrollIntoView==null||ge.scrollIntoView(typeof vt=="boolean"?{block:"nearest",inline:"nearest"}:vt))})});Ce(()=>{document.createElement("div").focus({get preventScroll(){return Jg=!0,!1}})},[]),Ce(()=>{c&&(n&&i.floating?$.current&&l!=null&&(He.current=!0,L.current=l,D(l)):F.current&&(L.current=-1,_.current(null)))},[c,n,i.floating,l,D]),Ce(()=>{if(c&&n&&i.floating)if(o==null){if(oe.current=!1,X.current!=null)return;if(F.current&&(L.current=-1,_t(s,L)),(!J.current||!F.current)&&$.current&&(q.current!=null||$.current===!0&&q.current==null)){let ne=0;const Re=()=>{s.current[0]==null?(ne<2&&(ne?requestAnimationFrame:queueMicrotask)(Re),ne++):(L.current=q.current==null||Lu(q.current,S,h)||d?Ou(s,Y.current):Ag(s,Y.current),q.current=null,D(L.current))};Re()}}else Qs(s,o)||(L.current=o,_t(s,L,He.current),He.current=!1)},[c,n,i.floating,o,X,d,s,S,h,D,_t,Y]),Ce(()=>{var ne;if(!c||i.floating||!N||p||!F.current)return;const Re=N.nodesRef.current,Q=(ne=Re.find(ge=>ge.id===V))==null||(ne=ne.context)==null?void 0:ne.elements.floating,be=Kn(en(i.floating)),xe=Re.some(ge=>ge.context&&Pt(ge.context.elements.floating,be));Q&&!xe&&R.current&&Q.focus({preventScroll:!0})},[c,i.floating,N,V,p]),Ce(()=>{if(!c||!N||!p||V)return;function ne(Re){at(Re.id),k&&(k.current=Re)}return N.events.on("virtualfocus",ne),()=>{N.events.off("virtualfocus",ne)}},[c,N,p,V,k]),Ce(()=>{_.current=D,F.current=!!i.floating}),Ce(()=>{n||(q.current=null)},[n]),Ce(()=>{J.current=n},[n]);const Zt=o!=null,un=C.useMemo(()=>{function ne(Q){if(!n)return;const be=s.current.indexOf(Q);be!==-1&&D(be)}return{onFocus(Q){let{currentTarget:be}=Q;ne(be)},onClick:Q=>{let{currentTarget:be}=Q;return be.focus({preventScroll:!0})},...v&&{onMouseMove(Q){let{currentTarget:be}=Q;ne(be)},onPointerLeave(Q){let{pointerType:be}=Q;!R.current||be==="touch"||(L.current=-1,_t(s,L),D(null),p||dr(P.current,{preventScroll:!0}))}}}},[n,P,_t,v,s,D,p]),$e=wt(ne=>{if(R.current=!1,oe.current=!0,ne.which===229||!te.current&&ne.currentTarget===P.current)return;if(d&&Qg(ne.key,S,h)){rt(ne),r(!1,ne.nativeEvent,"list-navigation"),Ge(i.domReference)&&(p?N==null||N.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Re=L.current,Q=Ou(s,y),be=Ag(s,y);if(W||(ne.key==="Home"&&(rt(ne),L.current=Q,D(L.current)),ne.key==="End"&&(rt(ne),L.current=be,D(L.current))),b>1){const xe=T||Array.from({length:s.current.length},()=>({width:1,height:1})),ge=pD(xe,b,x),vt=ge.findIndex(G=>G!=null&&!Wa(s.current,G,y)),se=ge.reduce((G,ue,It)=>ue!=null&&!Wa(s.current,ue,y)?It:G,-1),ae=ge[hD({current:ge.map(G=>G!=null?s.current[G]:null)},{event:ne,orientation:S,loop:f,cols:b,disabledIndices:gD([...y||s.current.map((G,ue)=>Wa(s.current,ue)?ue:void 0),void 0],ge),minIndex:vt,maxIndex:se,prevIndex:mD(L.current>be?Q:L.current,xe,ge,b,ne.key===zo?"bl":ne.key===ms?"tr":"tl"),stopEvent:!0})];if(ae!=null&&(L.current=ae,D(L.current)),S==="both")return}if(Yg(ne.key,S)){if(rt(ne),n&&!p&&Kn(ne.currentTarget.ownerDocument)===ne.currentTarget){L.current=Lu(ne.key,S,h)?Q:be,D(L.current);return}Lu(ne.key,S,h)?f?L.current=Re>=be?u&&Re!==s.current.length?-1:Q:dt(s,{startingIndex:Re,disabledIndices:y}):L.current=Math.min(be,dt(s,{startingIndex:Re,disabledIndices:y})):f?L.current=Re<=Q?u&&Re!==-1?s.current.length:be:dt(s,{startingIndex:Re,decrement:!0,disabledIndices:y}):L.current=Math.max(Q,dt(s,{startingIndex:Re,decrement:!0,disabledIndices:y})),Qs(s,L.current)?D(null):D(L.current)}}),kn=C.useMemo(()=>p&&n&&Zt&&{"aria-activedescendant":Ae||de},[p,n,Zt,Ae,de]),Vn=C.useMemo(()=>({"aria-orientation":S==="both"?void 0:S,...!of(i.domReference)&&kn,onKeyDown:$e,onPointerMove(){R.current=!0}}),[kn,$e,i.domReference,S]),or=C.useMemo(()=>{function ne(Q){m==="auto"&&H0(Q.nativeEvent)&&($.current=!0)}function Re(Q){$.current=m,m==="auto"&&W0(Q.nativeEvent)&&($.current=!0)}return{...kn,onKeyDown(Q){R.current=!1;const be=Q.key.startsWith("Arrow"),xe=["Home","End"].includes(Q.key),ge=be||xe,vt=KD(Q.key,S,h),se=Qg(Q.key,S,h),ae=Yg(Q.key,S),G=(d?vt:ae)||Q.key==="Enter"||Q.key.trim()==="";if(p&&n){const fe=N==null?void 0:N.nodesRef.current.find(yt=>yt.parentId==null),K=N&&fe?xD(N.nodesRef.current,fe.id):null;if(ge&&K&&k){const yt=new KeyboardEvent("keydown",{key:Q.key,bubbles:!0});if(vt||se){var ue,It;const gs=((ue=K.context)==null?void 0:ue.elements.domReference)===Q.currentTarget,vs=se&&!gs?(It=K.context)==null?void 0:It.elements.domReference:vt?s.current.find(tp=>(tp==null?void 0:tp.id)===de):null;vs&&(rt(Q),vs.dispatchEvent(yt),at(void 0))}if((ae||xe)&&K.context&&K.context.open&&K.parentId&&Q.currentTarget!==K.context.elements.domReference){var Vt;rt(Q),(Vt=K.context.elements.domReference)==null||Vt.dispatchEvent(yt);return}}return $e(Q)}if(!(!n&&!g&&be)){if(G&&(q.current=d&&ae?null:Q.key),d){vt&&(rt(Q),n?(L.current=Ou(s,Y.current),D(L.current)):r(!0,Q.nativeEvent,"list-navigation"));return}ae&&(l!=null&&(L.current=l),rt(Q),!n&&g?r(!0,Q.nativeEvent,"list-navigation"):$e(Q),n&&D(L.current))}},onFocus(){n&&!p&&D(null)},onPointerDown:Re,onMouseDown:ne,onClick:ne}},[de,kn,$e,Y,m,s,d,D,r,n,g,S,h,l,N,p,k]);return C.useMemo(()=>c?{reference:or,floating:Vn,item:un}:{},[c,or,Vn,un])}const JD=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function YD(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=JD.get(o))!=null?n:o,c=Nl(),u=Kh()!=null,f=C.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:c},...a==="menu"&&u&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,u,r,c,o]),d=C.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":c}}},[a,i,c,o]),h=C.useCallback(p=>{let{active:m,selected:v}=p;const g={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...g,"aria-selected":m&&v};case"combobox":return{...g,...m&&{"aria-selected":!0}}}return{}},[i,o]);return C.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function QD(e,t){var n;const{open:r,dataRef:i}=e,{listRef:s,activeIndex:o,onMatch:a,onTypingChange:c,enabled:l=!0,findMatch:u=null,resetMs:f=750,ignoreKeys:d=[],selectedIndex:h=null}=t,p=C.useRef(),m=C.useRef(""),v=C.useRef((n=h??o)!=null?n:-1),g=C.useRef(null),y=wt(a),S=wt(c),b=xn(u),E=xn(d);Ce(()=>{r&&(clearTimeout(p.current),g.current=null,m.current="")},[r]),Ce(()=>{if(r&&m.current===""){var P;v.current=(P=h??o)!=null?P:-1}},[r,h,o]);const k=wt(P=>{P?i.current.typing||(i.current.typing=P,S(P)):i.current.typing&&(i.current.typing=P,S(P))}),T=wt(P=>{function V(L,q,R){const _=b.current?b.current(q,R):q.find(F=>(F==null?void 0:F.toLocaleLowerCase().indexOf(R.toLocaleLowerCase()))===0);return _?L.indexOf(_):-1}const N=s.current;if(m.current.length>0&&m.current[0]!==" "&&(V(N,N,m.current)===-1?k(!1):P.key===" "&&rt(P)),N==null||E.current.includes(P.key)||P.key.length!==1||P.ctrlKey||P.metaKey||P.altKey)return;r&&P.key!==" "&&(rt(P),k(!0)),N.every(L=>{var q,R;return L?((q=L[0])==null?void 0:q.toLocaleLowerCase())!==((R=L[1])==null?void 0:R.toLocaleLowerCase()):!0})&&m.current===P.key&&(m.current="",v.current=g.current),m.current+=P.key,clearTimeout(p.current),p.current=setTimeout(()=>{m.current="",v.current=g.current,k(!1)},f);const W=v.current,$=V(N,[...N.slice((W||0)+1),...N.slice(0,(W||0)+1)],m.current);$!==-1?(y($),g.current=$):P.key!==" "&&(m.current="",k(!1))}),x=C.useMemo(()=>({onKeyDown:T}),[T]),j=C.useMemo(()=>({onKeyDown:T,onKeyUp(P){P.key===" "&&k(!1)}}),[T,k]);return C.useMemo(()=>l?{reference:x,floating:j}:{},[l,x,j])}function yw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=yw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ye(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=yw(e))&&(r&&(r+=" "),r+=t);return r}const Po=({participant:e,trackType:t="audioTrack",...n})=>{const r=Qe(),[i,s]=C.useState(null),{userId:o,sessionId:a}=e;return C.useEffect(()=>{if(!r||!i)return;const c=r.bindAudioElement(i,a,t);return()=>{c==null||c()}},[r,a,i,t]),w.jsx("audio",{autoPlay:!0,...n,ref:s,"data-user-id":o,"data-session-id":a,"data-track-type":t})};Po.displayName="Audio";const Sw=e=>{const{participants:t,audioProps:n}=e;return w.jsx(w.Fragment,{children:t.map(r=>{if(r.isLocalParticipant)return null;const{audioStream:i,screenShareAudioStream:s,sessionId:o}=r,c=vr(r)&&i&&w.jsx(Po,{...n,trackType:"audioTrack",participant:r}),u=kl(r)&&s&&w.jsx(Po,{...n,trackType:"screenShareAudioTrack",participant:r});return w.jsxs(C.Fragment,{children:[c,u]},o)})})};Sw.displayName="ParticipantsAudio";const bw=C.createContext(void 0),Ml=()=>C.useContext(bw),Gh=({middleware:e=[],placement:t,strategy:n,offset:r=10})=>{const{refs:i,x:s,y:o,update:a,elements:{domReference:c,floating:l},context:u}=vw({placement:t,strategy:n,middleware:[aD(r),cD(),aw(),lD({padding:10,apply:({availableHeight:f,elements:d})=>{Object.assign(d.floating.style,{maxHeight:`${f}px`})}}),...e]});return C.useEffect(()=>{if(!c||!l)return;const f=sw(c,l,a);return()=>f()},[c,l,a]),{refs:i,x:s,y:o,domReference:c,floating:l,strategy:n,context:u}},ww=10,XD=(e,t=ww)=>{const[n,r]=C.useState(null);return C.useEffect(()=>{if(!e)return;const i=()=>{const o=e;if(!(o.scrollHeight>o.clientHeight))return r(null);if(o.scrollTop<=t)return r("top");if(Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=t)return r("bottom");r("between")},s=new ResizeObserver(i);return s.observe(e),e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i),s.disconnect()}},[e,t]),n},ZD=(e,t=ww)=>{const[n,r]=C.useState(null);return C.useEffect(()=>{if(!e)return;const i=()=>{const o=e;if(!(o.scrollWidth>o.clientWidth))return r(null);if(o.scrollLeft<=t)return r("start");if(Math.abs(o.scrollWidth-o.scrollLeft-o.clientWidth)<=t)return r("end");r("between")},s=new ResizeObserver(i);return s.observe(e),e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i),s.disconnect()}},[e,t]),n},Jh=e=>{const t=Qe(),{useHasPermissions:n}=ln(),r=n(e),[i,s]=C.useState(!1);return C.useEffect(()=>{r&&s(!1)},[r]),{requestPermission:C.useCallback(async()=>{if(r)return!0;const a=!!(t!=null&&t.permissionsContext.canRequest(e));if(i||!a)return!1;s(!0);try{await(t==null?void 0:t.requestPermissions({permissions:[e]}))}catch(c){throw s(!1),new Error(`requestPermission failed: ${c}`)}return!1},[t,r,i,e]),hasPermission:r,canRequestPermission:!!(t!=null&&t.permissionsContext.canRequest(e)),isAwaitingPermission:i}};var Wi;(function(e){e.PORTAL="portal",e.MENU="menu"})(Wi||(Wi={}));const Cw=C.createContext({}),Yh=()=>C.useContext(Cw),eL=({children:e,refs:t})=>{const n=C.useMemo(()=>`str-video-portal-${Math.random().toString(36).substring(2,9)}`,[]);return w.jsxs(w.Fragment,{children:[w.jsx("div",{id:n,className:"str-video__portal"}),w.jsx($D,{children:w.jsx(MD,{id:n,children:w.jsx("div",{className:"str-video__portal-content",ref:t.setFloating,children:e})})})]})},Qh=({ToggleButton:e,placement:t="top-start",strategy:n="absolute",offset:r,visualType:i=Wi.MENU,children:s,onToggle:o})=>{const[a,c]=C.useState(!1),l=C.useRef(o);l.current=o;const{floating:u,domReference:f,refs:d,x:h,y:p}=Gh({placement:t,strategy:n,offset:r});return C.useEffect(()=>{const m=g=>{var y,S;!u&&(f!=null&&f.contains(g.target))?(c(!0),(y=l.current)==null||y.call(l,!0)):u&&!(u!=null&&u.contains(g.target))&&(c(!1),(S=l.current)==null||S.call(l,!1))},v=g=>{var y;g.key&&g.key.toLowerCase()==="escape"&&!g.altKey&&!g.ctrlKey&&(c(!1),(y=l.current)==null||y.call(l,!1))};return document==null||document.addEventListener("click",m,{capture:!0}),document==null||document.addEventListener("keydown",v),()=>{document==null||document.removeEventListener("click",m,{capture:!0}),document==null||document.removeEventListener("keydown",v)}},[u,f]),w.jsxs(w.Fragment,{children:[a&&w.jsx(Cw.Provider,{value:{close:()=>c(!1)},children:i===Wi.PORTAL?w.jsx(eL,{refs:d,children:s}):i===Wi.MENU?w.jsx("div",{className:"str-video__menu-container",ref:d.setFloating,style:{position:n,top:p??0,left:h??0,overflowY:"auto"},role:"menu",children:s}):null}),w.jsx(e,{menuShown:a,ref:d.setReference})]})},tL=({children:e,onItemClick:t})=>{const n=C.useRef(null);return w.jsx("ul",{className:"str-video__generic-menu",ref:n,onClick:r=>{var i;t&&r.target!==n.current&&((i=n.current)!=null&&i.contains(r.target))&&t(r)},children:e})},ut=({children:e,...t})=>w.jsx("li",{className:"str-video__generic-menu--item",children:w.jsx("button",{...t,children:e})}),Be=({className:e,icon:t})=>w.jsx("span",{className:Ye("str-video__icon",t&&`str-video__icon--${t}`,e)});function Ew(e){const[t,n]=C.useState(document.pictureInPictureElement===e);return!e&&t&&n(!1),C.useEffect(()=>{if(!e)return;const r=()=>{n(document.pictureInPictureElement===e)};return e.addEventListener("enterpictureinpicture",r),e.addEventListener("leavepictureinpicture",r),()=>{e.removeEventListener("enterpictureinpicture",r),e.removeEventListener("leavepictureinpicture",r)}},[e]),t}const nL=()=>{const{participant:e,participantViewElement:t,videoElement:n}=Ml(),[r,i]=C.useState(!!document.fullscreenElement),s=Qe(),o=Ew(n??void 0),{t:a}=tt(),{pin:c,sessionId:l,userId:u}=e,f=vr(e),d=Pn(e),h=vn(e),p=kl(e),m=()=>s==null?void 0:s.blockUser(u),v=()=>s==null?void 0:s.muteUser(u,"audio"),g=()=>s==null?void 0:s.muteUser(u,"video"),y=()=>s==null?void 0:s.muteUser(u,"screenshare"),S=()=>s==null?void 0:s.muteUser(u,"screenshare_audio"),b=N=>()=>{s==null||s.updateUserPermissions({user_id:u,grant_permissions:[N]})},E=N=>()=>{s==null||s.updateUserPermissions({user_id:u,revoke_permissions:[N]})},k=()=>{c?s==null||s.unpin(l):s==null||s.pin(l)},T=()=>{s==null||s.pinForEveryone({user_id:u,session_id:l}).catch(N=>{console.error(`Failed to pin participant ${u}`,N)})},x=()=>{s==null||s.unpinForEveryone({user_id:u,session_id:l}).catch(N=>{console.error(`Failed to unpin participant ${u}`,N)})},j=()=>r?document.exitFullscreen().catch(console.error):t==null?void 0:t.requestFullscreen().catch(console.error);C.useEffect(()=>{const N=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",N),()=>{document.removeEventListener("fullscreenchange",N)}},[]);const P=()=>n&&!o?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),{close:V}=Yh()||{};return w.jsxs(tL,{onItemClick:V,children:[w.jsxs(ut,{onClick:k,disabled:c&&!c.isLocalPin,children:[w.jsx(Be,{icon:"pin"}),a(c?"Unpin":"Pin")]}),w.jsxs(Dt,{requiredGrants:[ee.PIN_FOR_EVERYONE],children:[w.jsxs(ut,{onClick:T,disabled:c&&!c.isLocalPin,children:[w.jsx(Be,{icon:"pin"}),a("Pin for everyone")]}),w.jsxs(ut,{onClick:x,disabled:!c||c.isLocalPin,children:[w.jsx(Be,{icon:"pin"}),a("Unpin for everyone")]})]}),w.jsx(Dt,{requiredGrants:[ee.BLOCK_USERS],children:w.jsxs(ut,{onClick:m,children:[w.jsx(Be,{icon:"not-allowed"}),a("Block")]})}),w.jsxs(Dt,{requiredGrants:[ee.MUTE_USERS],children:[d&&w.jsxs(ut,{onClick:g,children:[w.jsx(Be,{icon:"camera-off-outline"}),a("Turn off video")]}),h&&w.jsxs(ut,{onClick:y,children:[w.jsx(Be,{icon:"screen-share-off"}),a("Turn off screen share")]}),f&&w.jsxs(ut,{onClick:v,children:[w.jsx(Be,{icon:"no-audio"}),a("Mute audio")]}),p&&w.jsxs(ut,{onClick:S,children:[w.jsx(Be,{icon:"no-audio"}),a("Mute screen share audio")]})]}),t&&w.jsx(ut,{onClick:j,children:a("{{ direction }} fullscreen",{direction:a(r?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&w.jsx(ut,{onClick:P,children:a("{{ direction }} picture-in-picture",{direction:a(o?"Leave":"Enter")})}),w.jsxs(Dt,{requiredGrants:[ee.UPDATE_CALL_PERMISSIONS],children:[w.jsx(ut,{onClick:b(ee.SEND_AUDIO),children:a("Allow audio")}),w.jsx(ut,{onClick:b(ee.SEND_VIDEO),children:a("Allow video")}),w.jsx(ut,{onClick:b(ee.SCREENSHARE),children:a("Allow screen sharing")}),w.jsx(ut,{onClick:E(ee.SEND_AUDIO),children:a("Disable audio")}),w.jsx(ut,{onClick:E(ee.SEND_VIDEO),children:a("Disable video")}),w.jsx(ut,{onClick:E(ee.SCREENSHARE),children:a("Disable screen sharing")})]})]})},kw=e=>e===null?!1:!C.isValidElement(e),Tw=(e,t)=>{if(e){if(typeof e=="function")return e(t);e.current=t}};C.forwardRef(function({stream:t,...n},r){const[i,s]=C.useState(null);return C.useEffect(()=>{if(!(!i||!t)&&t!==i.srcObject)return i.srcObject=t,(eg.isSafari()||eg.isFirefox())&&setTimeout(()=>{i.srcObject=t,i.play().catch(o=>{console.error("Failed to play stream",o)})},0),()=>{i.pause(),i.srcObject=null}},[t,i]),w.jsx("video",{autoPlay:!0,playsInline:!0,...n,ref:o=>{Tw(r,o),s(o)}})});const Rw=C.forwardRef(function({participant:t,style:n,children:r},i){const[s,o]=C.useState(!1),a=t.name||t.userId;return w.jsxs("div",{className:"str-video__video-placeholder",style:n,ref:i,children:[(!t.image||s)&&(a?w.jsx(rL,{name:a}):w.jsx("div",{className:"str-video__video-placeholder__no-video-label",children:r})),t.image&&!s&&w.jsx("img",{onError:()=>o(!0),alt:a,className:"str-video__video-placeholder__avatar",src:t.image})]})}),rL=e=>{const{name:t}=e,n=t.split(" ").slice(0,2).map(r=>r[0]).join("");return w.jsx("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},iL=C.forwardRef(function(t,n){const{t:r}=tt();return w.jsx(Rw,{ref:n,...t,children:r("Video is disabled")})}),Xg=C.forwardRef(function(t,n){const{t:r}=tt();return w.jsx(Rw,{ref:n,...t,children:r("Video is playing in a popup")})}),_w=({enabled:e=!0,mirror:t,trackType:n,participant:r,className:i,VideoPlaceholder:s=iL,PictureInPicturePlaceholder:o=Xg,refs:a,...c})=>{const{sessionId:l,videoStream:u,screenShareStream:f,viewportVisibilityState:d,isLocalParticipant:h,userId:p}=r,m=Qe(),[v,g]=C.useState(null),[y,S]=C.useState(!0),[b,E]=C.useState(!0),k=Ew(v??void 0),T=n==="videoTrack"?u:n==="screenShareTrack"?f:void 0;if(C.useLayoutEffect(()=>{if(!m||!v||n==="none")return;const D=m.bindVideoElement(v,l,n);return()=>{D==null||D()}},[m,n,l,v]),C.useEffect(()=>{if(!T||!v)return;const[D]=T.getVideoTracks();if(!D)return;const W=()=>{S(v.paused);const{width:$=0,height:L=0}=D.getSettings();E($>=L)};return S(v.paused),v.addEventListener("play",W),v.addEventListener("pause",W),D.addEventListener("unmute",W),()=>{v.removeEventListener("play",W),v.removeEventListener("pause",W),D.removeEventListener("unmute",W),S(!0)}},[T,v]),!m)return null;const x=n==="videoTrack"?Pn(r):n==="screenShareTrack"?vn(r):!1,j=n==="none"||(d==null?void 0:d[n])===Ze.INVISIBLE,P=!e||!x||j,V=t===void 0?h&&n==="videoTrack":t,N=n==="screenShareTrack";return w.jsxs(w.Fragment,{children:[!P&&w.jsx("video",{...c,className:Ye("str-video__video",i,{"str-video__video--not-playing":y,"str-video__video--tall":!b,"str-video__video--mirror":V,"str-video__video--screen-share":N}),"data-user-id":p,"data-session-id":l,ref:D=>{var W;g(D),(W=a==null?void 0:a.setVideoElement)==null||W.call(a,D)}}),k&&w.jsx(Xg,{style:{position:"absolute"},participant:r}),(P||y)&&s&&w.jsx(s,{style:{position:"absolute"},participant:r,ref:a==null?void 0:a.setVideoPlaceholderElement})]})};_w.displayName="Video";const sL=({trackedElement:e,dynascaleManager:t,sessionId:n,trackType:r})=>{const i=Qe(),s=t??(i==null?void 0:i.dynascaleManager);C.useEffect(()=>{if(!e||!s||!i||r==="none")return;const o=s.trackElementVisibility(e,n,r);return()=>{o()}},[e,s,i,n,r])};C.createContext(void 0);const wn=C.forwardRef(function(t,n){const{icon:r,enabled:i,variant:s,onClick:o,className:a,...c}=t;return w.jsx("button",{className:Ye("str-video__call-controls__button",a,{[`str-video__call-controls__button--variant-${s}`]:s,"str-video__call-controls__button--enabled":i}),onClick:l=>{l.preventDefault(),o==null||o(l)},ref:n,...c,children:w.jsx(Be,{icon:r})})}),pi=C.forwardRef(function({disabled:t,caption:n,children:r,className:i,active:s,Menu:o,menuPlacement:a,menuOffset:c,title:l,ToggleMenuButton:u=oL,variant:f,onClick:d,onMenuToggle:h,...p},m){return w.jsxs("div",{className:Ye("str-video__composite-button",i,{"str-video__composite-button--caption":n,"str-video__composite-button--menu":o}),title:l,ref:m,children:[w.jsxs("div",{className:Ye("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":s,"str-video__composite-button__button-group--active-primary":s&&f==="primary","str-video__composite-button__button-group--active-secondary":s&&f==="secondary","str-video__composite-button__button-group--disabled":t}),children:[w.jsx("button",{type:"button",className:"str-video__composite-button__button",onClick:v=>{v.preventDefault(),d==null||d(v)},disabled:t,...p,children:r}),o&&w.jsx(Qh,{offset:c,placement:a,ToggleButton:u,onToggle:h,children:kw(o)?w.jsx(o,{}):o})]}),n&&w.jsx("div",{className:"str-video__composite-button__caption",children:n})]})}),oL=C.forwardRef(function({menuShown:t},n){return w.jsx(wn,{className:Ye("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":t}),icon:t?"caret-down":"caret-up",ref:n})}),Jc=e=>{const{isVisible:t,message:n,children:r,visibilityTimeout:i,resetIsVisible:s,placement:o="top",iconClassName:a="str-video__notification__icon",close:c}=e,{refs:l,x:u,y:f,strategy:d}=Gh({placement:o,strategy:"absolute"});return C.useEffect(()=>{if(!t||!i||!s)return;const h=setTimeout(()=>{s()},i);return()=>clearTimeout(h)},[t,s,i]),w.jsxs("div",{ref:l.setReference,children:[t&&w.jsxs("div",{className:"str-video__notification",ref:l.setFloating,style:{position:d,top:f??0,left:u??0,overflowY:"auto"},children:[a&&w.jsx("i",{className:a}),w.jsx("span",{className:"str-video__notification__message",children:n}),c?w.jsx("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:c}):null]}),r]})},Xh=e=>{const{permission:t,isAwaitingApproval:n,messageApproved:r,messageAwaitingApproval:i,messageRevoked:s,visibilityTimeout:o=3500,children:a}=e,{useHasPermissions:c}=ln(),l=c(t),u=C.useRef(l),[f,d]=C.useState();C.useEffect(()=>{l&&!u.current?(d("granted"),u.current=!0):!l&&u.current&&(d("revoked"),u.current=!1)},[l]);const h=C.useCallback(()=>d(void 0),[]);return n?w.jsx(Jc,{isVisible:n&&!l,message:i,children:a}):w.jsx(Jc,{isVisible:!!f,visibilityTimeout:o,resetIsVisible:h,message:f==="granted"?r:s,children:a})},aL=({children:e,text:t,placement:n})=>{const{useMicrophoneState:r}=ln(),{isSpeakingWhileMuted:i}=r(),{t:s}=tt(),o=t??s("You are muted. Unmute to speak.");return w.jsx(Jc,{message:o,isVisible:i,placement:n||"top-start",children:e})},cL=({className:e,type:t="spinner",text:n,tooltip:r})=>w.jsxs("div",{className:Ye("str-video__loading-indicator",e),title:r,children:[w.jsx("div",{className:Ye("str-video__loading-indicator__icon",t)}),n&&w.jsx("p",{className:"str-video__loading-indicator-text",children:n})]}),lL=({children:e,referenceElement:t,tooltipClassName:n,tooltipPlacement:r="top",visible:i=!1})=>{const s=C.useRef(null),{refs:o,x:a,y:c,strategy:l,context:u}=Gh({placement:r,strategy:"absolute",middleware:[uD({element:s})]});return C.useEffect(()=>{o.setReference(t)},[t,o]),i?w.jsxs("div",{className:Ye("str-video__tooltip",n),ref:o.setFloating,style:{position:l,top:c??0,left:a??0},children:[w.jsx(kD,{ref:s,context:u,fill:"var(--str-video__tooltip--background-color)"}),e]}):null},uL=({onMouseEnter:e,onMouseLeave:t}={})=>{const[n,r]=C.useState(!1),i=C.useCallback(o=>{r(!0),e==null||e(o)},[e]),s=C.useCallback(o=>{r(!1),t==null||t(o)},[t]);return{handleMouseEnter:i,handleMouseLeave:s,tooltipVisible:n}},Ho=({title:e,tooltipClassName:t,tooltipPlacement:n,tooltipDisabled:r,...i})=>{const{handleMouseEnter:s,handleMouseLeave:o,tooltipVisible:a}=uL(),[c,l]=C.useState(null),u=!r&&!!e&&a;return w.jsxs(w.Fragment,{children:[w.jsx(lL,{referenceElement:c,visible:u,tooltipClassName:t,tooltipPlacement:n,children:e||""}),w.jsx("div",{ref:l,onMouseEnter:s,onMouseLeave:o,...i})]})};C.forwardRef(function(t,n){return w.jsx(pi,{ref:n,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:w.jsx(Be,{icon:"recording-off"})})});const dL=({caption:e})=>{const{t}=tt(),{toggleCallRecording:n,isAwaitingResponse:r,isCallRecordingInProgress:i}=XN();let s=e??t("Record call");return r&&(s=t(i?"Waiting for recording to stop...":"Waiting for recording to start...")),w.jsx(Dt,{requiredGrants:[ee.START_RECORD_CALL,ee.STOP_RECORD_CALL],children:w.jsx(pi,{active:i,caption:e,variant:"secondary","data-testid":i?"recording-stop-button":"recording-start-button",title:s,onClick:r?void 0:n,children:r?w.jsx(cL,{}):w.jsx(Be,{icon:i?"recording-on":"recording-off"})})})},Iw={":like:":"👍",":raise-hand:":"✋",":fireworks:":"🎉",":dislike:":"👎",":heart:":"❤️",":smile:":"😀"},fL=({participant:{reaction:e,sessionId:t},hideAfterTimeoutInMs:n=5500,emojiReactionMap:r=Iw})=>{const i=Qe();if(C.useEffect(()=>{if(!i||!e)return;const o=setTimeout(()=>{i.resetReaction(t)},n);return()=>{clearTimeout(o)}},[i,n,e,t]),!e)return null;const{emoji_code:s}=e;return w.jsx("div",{className:"str-video__reaction",children:w.jsx("span",{className:"str-video__reaction__emoji",children:s&&r[s]})})},hL=[{type:"reaction",emoji_code:":like:"},{type:"raised-hand",emoji_code:":raise-hand:"},{type:"reaction",emoji_code:":fireworks:"},{type:"reaction",emoji_code:":dislike:"},{type:"reaction",emoji_code:":heart:"},{type:"reaction",emoji_code:":smile:"}],pL=({reactions:e=hL})=>w.jsx(Dt,{requiredGrants:[ee.CREATE_REACTION],children:w.jsx(Qh,{placement:"top",ToggleButton:mL,visualType:Wi.MENU,children:w.jsx(gL,{reactions:e})})}),mL=C.forwardRef(function({menuShown:t},n){const{t:r}=tt();return w.jsx(Ho,{title:r("Reactions"),tooltipDisabled:t,children:w.jsx(pi,{ref:n,active:t,variant:"primary",children:w.jsx(Be,{icon:"reactions"})})})}),gL=({reactions:e,layout:t="horizontal"})=>{const n=Qe(),{close:r}=Yh();return w.jsx("div",{className:Ye("str-video__reactions-menu",{"str-video__reactions-menu--horizontal":t==="horizontal","str-video__reactions-menu--vertical":t==="vertical"}),children:e.map(i=>w.jsx("button",{type:"button",className:"str-video__reactions-menu__button",onClick:()=>{n==null||n.sendReaction(i),r==null||r()},children:i.emoji_code&&Iw[i.emoji_code]},i.emoji_code))})},Zh=(e,t)=>{const n=Ee(["react-sdk"]);return async()=>{try{await t()}catch(r){if(e.onError){e.onError(r);return}vL(r)||n("error","Call control handler failed",r)}}};function vL(e){return e instanceof DOMException&&e.name==="NotAllowedError"}const yL=e=>{const{t}=tt(),{caption:n}=e,{useHasOngoingScreenShare:r,useScreenShareState:i,useCallSettings:s}=ln(),o=r(),{hasPermission:a,requestPermission:c,isAwaitingPermission:l}=Jh(ee.SCREENSHARE),u=s(),f=u==null?void 0:u.screensharing.enabled,{screenShare:d,optimisticIsMute:h}=i(),p=!h,m=!p&&(o||f===!1),v=Zh(e,async()=>{a?await d.toggle():await c()});return w.jsx(Dt,{requiredGrants:[ee.SCREENSHARE],children:w.jsx(Xh,{permission:ee.SCREENSHARE,isAwaitingApproval:l,messageApproved:t("You can now share your screen."),messageAwaitingApproval:t("Awaiting for an approval to share screen."),messageRevoked:t("You can no longer share your screen."),children:w.jsx(Ho,{title:n??t("Share screen"),children:w.jsx(pi,{active:o||p,caption:n,variant:"primary","data-testid":o?"screen-share-stop-button":"screen-share-start-button",disabled:m,onClick:v,children:w.jsx(Be,{icon:o?"screen-share-on":"screen-share-off"})})})})})},xw=C.createContext({}),SL=e=>{const{children:t,icon:n,defaultSelectedLabel:r,defaultSelectedIndex:i,handleSelect:s}=e,[o,a]=C.useState(!1),[c,l]=C.useState(null),[u,f]=C.useState(i),[d,h]=C.useState(r),{refs:p,context:m}=vw({placement:"bottom-start",open:o,onOpenChange:a,whileElementsMounted:sw,middleware:[aw()]}),v=C.useRef([]),g=C.useRef([]),y=C.useCallback(D=>{f(D),s(D||0),a(!1),D!==null&&h(g.current[D])},[s]),S=D=>{o?l(D):y(D)},b=GD(m,{listRef:v,activeIndex:c,selectedIndex:u,onNavigate:l}),E=QD(m,{listRef:g,activeIndex:c,selectedIndex:u,onMatch:S}),k=VD(m),T=HD(m),x=YD(m,{role:"listbox"}),{getReferenceProps:j,getFloatingProps:P,getItemProps:V}=qD([b,E,k,T,x]),N=C.useMemo(()=>({activeIndex:c,selectedIndex:u,getItemProps:V,handleSelect:y}),[c,u,V,y]);return w.jsxs("div",{className:"str-video__dropdown",children:[w.jsxs("div",{className:"str-video__dropdown-selected",ref:p.setReference,tabIndex:0,...j(),children:[w.jsxs("label",{className:"str-video__dropdown-selected__label",children:[n&&w.jsx(Be,{className:"str-video__dropdown-selected__icon",icon:n}),d]}),w.jsx(Be,{className:"str-video__dropdown-selected__chevron",icon:o?"chevron-up":"chevron-down"})]}),w.jsx(xw.Provider,{value:N,children:o&&w.jsx(jD,{context:m,modal:!1,children:w.jsx("div",{className:"str-video__dropdown-list",ref:p.setFloating,...P(),children:w.jsx(SD,{elementsRef:v,labelsRef:g,children:t})})})})]})},Zg=e=>{const{selected:t,label:n,icon:r}=e,{getItemProps:i,handleSelect:s}=C.useContext(xw),{ref:o,index:a}=bD();return w.jsxs("div",{className:Ye("str-video__dropdown-option",{"str-video__dropdown-option--selected":t}),ref:o,...i({onClick:()=>s(a)}),children:[r&&w.jsx(Be,{className:"str-video__dropdown-icon",icon:r}),w.jsx("span",{className:"str-video__dropdown-label",children:n})]})},bL=e=>{const{children:t,icon:n,handleSelect:r,defaultSelectedLabel:i,defaultSelectedIndex:s}=e;return w.jsx(SL,{icon:n,handleSelect:r,defaultSelectedIndex:s,defaultSelectedLabel:i,children:t})},ev=({disabled:e,id:t,label:n,onChange:r,name:i,selected:s,defaultChecked:o,value:a})=>w.jsxs("label",{className:Ye("str-video__device-settings__option",{"str-video__device-settings__option--selected":s,"str-video__device-settings__option--disabled":e}),htmlFor:t,children:[w.jsx("input",{type:"radio",name:i,onChange:r,value:a,id:t,checked:s,defaultChecked:o,disabled:e}),n]}),wL=e=>{const{devices:t=[],selectedDeviceId:n,title:r,type:i,onChange:s}=e,{close:o}=Yh(),{t:a}=tt();return w.jsxs("div",{className:"str-video__device-settings__device-kind",children:[r&&w.jsx("div",{className:"str-video__device-settings__device-selector-title",children:r}),t.length===0?w.jsx(ev,{id:`${i}--default`,label:a("Default"),name:i,defaultChecked:!0,value:"default"}):t.map(c=>w.jsx(ev,{id:`${i}--${c.deviceId}`,value:c.deviceId,label:c.label,onChange:l=>{s==null||s(l.target.value),o==null||o()},name:i,selected:c.deviceId===n||t.length===1},c.deviceId))]})},CL=e=>{var l;const{devices:t=[],selectedDeviceId:n,title:r,onChange:i,icon:s}=e,{t:o}=tt(),a=t.findIndex(u=>u.deviceId===n),c=C.useCallback(u=>{i==null||i(t[u].deviceId)},[t,i]);return w.jsxs("div",{className:"str-video__device-settings__device-kind",children:[w.jsx("div",{className:"str-video__device-settings__device-selector-title",children:r}),w.jsx(bL,{icon:s,defaultSelectedIndex:a,defaultSelectedLabel:((l=t[a])==null?void 0:l.label)??o("Default"),handleSelect:c,children:t.length===0?w.jsx(Zg,{icon:s,label:o("Default"),selected:!0}):t.map(u=>w.jsx(Zg,{icon:s,label:u.label,selected:u.deviceId===n||t.length===1},u.deviceId))})]})},Pw=e=>{const{visualType:t="list",icon:n,placeholder:r,...i}=e;return t==="list"?w.jsx(wL,{...i}):w.jsx(CL,{...i,icon:n})},EL=({title:e,visualType:t})=>{const{useMicrophoneState:n}=ln(),{microphone:r,selectedDevice:i,devices:s}=n();return w.jsx(Pw,{devices:s||[],selectedDeviceId:i,type:"audioinput",onChange:async o=>{await r.select(o)},title:e,visualType:t,icon:"mic"})},kL=({title:e,visualType:t})=>{const{useCameraState:n}=ln(),{camera:r,devices:i,selectedDevice:s}=n();return w.jsx(Pw,{devices:i||[],type:"videoinput",selectedDeviceId:s,onChange:async o=>{await r.select(o)},title:e,visualType:t,icon:"camera"})};C.forwardRef(function({menuShown:t},n){const{t:r}=tt();return w.jsx(wn,{className:Ye("str-video__device-settings__button",{"str-video__device-settings__button--active":t}),title:r("Toggle device menu"),icon:"device-settings",ref:n})});const TL=e=>{const{t}=tt(),{caption:n,Menu:r=w.jsx(EL,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...o}=e,{hasPermission:a,requestPermission:c,isAwaitingPermission:l}=Jh(ee.SEND_AUDIO),{useMicrophoneState:u}=ln(),{microphone:f,optimisticIsMute:d,hasBrowserPermission:h}=u(),[p,m]=C.useState(!1),v=Zh(e,async()=>{a?await f.toggle():await c()});return w.jsx(Dt,{requiredGrants:[ee.SEND_AUDIO],children:w.jsx(Xh,{permission:ee.SEND_AUDIO,isAwaitingApproval:l,messageApproved:t("You can now speak."),messageAwaitingApproval:t("Awaiting for an approval to speak."),messageRevoked:t("You can no longer speak."),children:w.jsx(Ho,{title:a?h?n??t("Mic"):t("Check your browser mic permissions"):t("You have no permission to share your audio"),tooltipDisabled:p,children:w.jsxs(pi,{active:d,caption:n,variant:"secondary",disabled:!h||!a,"data-testid":d?"audio-unmute-button":"audio-mute-button",onClick:v,Menu:r,menuPlacement:i,menuOffset:16,...o,onMenuToggle:g=>{m(g),s==null||s(g)},children:[w.jsx(Be,{icon:d?"mic-off":"mic"}),(!h||!a)&&w.jsx("span",{className:"str-video__no-media-permission",children:"!"})]})})})})},RL=e=>{const{t}=tt(),{caption:n,Menu:r=w.jsx(kL,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...o}=e,{hasPermission:a,requestPermission:c,isAwaitingPermission:l}=Jh(ee.SEND_VIDEO),{useCameraState:u,useCallSettings:f}=ln(),{camera:d,optimisticIsMute:h,hasBrowserPermission:p}=u(),m=f(),v=m==null?void 0:m.video.enabled,[g,y]=C.useState(!1),S=Zh(e,async()=>{a?await d.toggle():await c()});return w.jsx(Dt,{requiredGrants:[ee.SEND_VIDEO],children:w.jsx(Xh,{permission:ee.SEND_VIDEO,isAwaitingApproval:l,messageApproved:t("You can now share your video."),messageAwaitingApproval:t("Awaiting for an approval to share your video."),messageRevoked:t("You can no longer share your video."),children:w.jsx(Ho,{title:a?p?v?n||t("Video"):t("Video publishing is disabled by the system"):t("Check your browser video permissions"):t("You have no permission to share your video"),tooltipDisabled:g,children:w.jsxs(pi,{active:h,caption:n,variant:"secondary",disabled:!p||!a||!v,"data-testid":h?"video-unmute-button":"video-mute-button",onClick:S,Menu:r,menuPlacement:i,menuOffset:16,...o,onMenuToggle:b=>{y(b),s==null||s(b)},children:[w.jsx(Be,{icon:h?"camera-off":"camera"}),(!p||!a||!v)&&w.jsx("span",{className:"str-video__no-media-permission",children:"!"})]})})})})};C.forwardRef(function({menuShown:t},n){const{t:r}=tt();return w.jsx(Ho,{title:r("Leave call"),tooltipDisabled:t,children:w.jsx(wn,{icon:t?"close":"call-end",variant:t?"active":"danger","data-testid":"leave-call-button",ref:n})})});const _L=({disabled:e,caption:t,onClick:n,onLeave:r})=>{const i=Qe(),{t:s}=tt(),o=C.useCallback(async a=>{n?n(a):i&&(await i.leave(),r==null||r())},[n,r,i]);return w.jsx(wn,{disabled:e,icon:"call-end",variant:"danger",title:t??s("Leave call"),"data-testid":"cancel-call-button",onClick:o})},IL=({onLeave:e})=>w.jsxs("div",{className:"str-video__call-controls",children:[w.jsx(Dt,{requiredGrants:[ee.SEND_AUDIO],children:w.jsx(aL,{children:w.jsx(TL,{})})}),w.jsx(Dt,{requiredGrants:[ee.SEND_VIDEO],children:w.jsx(RL,{})}),w.jsx(Dt,{requiredGrants:[ee.CREATE_REACTION],children:w.jsx(pL,{})}),w.jsx(Dt,{requiredGrants:[ee.SCREENSHARE],children:w.jsx(yL,{})}),w.jsx(Dt,{requiredGrants:[ee.START_RECORD_CALL,ee.STOP_RECORD_CALL],children:w.jsx(dL,{})}),w.jsx(_L,{onLeave:e})]});C.lazy(()=>fk(()=>import("./latency-chart-Bj5OSYzg.es-C30vqVqf.js"),[]));var tv;(function(e){e.GOOD="Good",e.OK="Ok",e.BAD="Bad"})(tv||(tv={}));C.forwardRef(function(t,n){const{t:r}=tt(),{caption:i,menuShown:s}=t;return w.jsx(pi,{ref:n,active:s,caption:i,title:i||r("Statistics"),"data-testid":"stats-button",children:w.jsx(Be,{icon:"stats"})})});C.forwardRef(function(t,n){return w.jsx(wn,{enabled:t.menuShown,icon:"ellipsis",ref:n})});C.forwardRef(function(t,n){return w.jsx(wn,{enabled:t.menuShown,icon:"filter",ref:n})});C.createContext(null);H.JOINING+"",H.RINGING+"",H.MIGRATING+"",H.RECONNECTING+"",H.RECONNECTING_FAILED+"",H.OFFLINE+"",H.IDLE+"",H.UNKNOWN+"",H.JOINED+"",H.LEFT+"";C.forwardRef(function(t,n){const{permissionRequests:r,handleUpdatePermission:i,...s}=t,{t:o}=tt();return w.jsx("div",{className:"str-video__permission-requests-list",ref:n,...s,children:r.map((a,c)=>{const{user:l,permissions:u}=a;return w.jsx(C.Fragment,{children:u.map(f=>w.jsxs("div",{className:"str-video__permission-request",children:[w.jsx("div",{className:"str-video__permission-request__message",children:xL(l.name||l.id,f,o)}),w.jsx(Mu,{className:"str-video__permission-request__button--allow",type:"button",onClick:i(a,"grant"),children:o("Allow")}),w.jsx(Mu,{className:"str-video__permission-request__button--reject",type:"button",onClick:i(a,"revoke"),children:o("Revoke")}),w.jsx(Mu,{className:"str-video__permission-request__button--reject",type:"button",onClick:i(a,"dismiss"),children:o("Dismiss")})]},f))},`${l.id}/${c}`)})})});const Mu=e=>{const{className:t,...n}=e;return w.jsx("button",{className:Ye("str-video__permission-request__button",t),...n})},xL=(e,t,n)=>{switch(t){case ee.SEND_AUDIO:return n("{{ userName }} is requesting to speak",{userName:e});case ee.SEND_VIDEO:return n("{{ userName }} is requesting to share their camera",{userName:e});case ee.SCREENSHARE:return n("{{ userName }} is requesting to present their screen",{userName:e});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:e,permission:t})}},PL=({as:e="div",className:t,children:n,...r})=>w.jsx(e,{...r,className:Ye("str-video",t),children:n}),OL=C.forwardRef(function(t,n){return w.jsx(wn,{enabled:t.menuShown,icon:"ellipsis",ref:n})}),NL=()=>{const e=Qe(),{t}=tt(),n=()=>{e==null||e.screenShare.disable()};return w.jsxs("div",{className:"str-video__screen-share-overlay",children:[w.jsx(Be,{icon:"screen-share-off"}),w.jsx("span",{className:"str-video__screen-share-overlay__title",children:t("You are presenting your screen")}),w.jsxs("button",{onClick:n,className:"str-video__screen-share-overlay__button",children:[w.jsx(Be,{icon:"close"})," ",t("Stop Screen Sharing")]})]})},ep=({indicatorsVisible:e=!0,menuPlacement:t="bottom-start",showMenuButton:n=!0,ParticipantActionsContextMenu:r=nL})=>{const{participant:i,trackType:s}=Ml(),o=vn(i);return i.isLocalParticipant&&o&&s==="screenShareTrack"?w.jsxs(w.Fragment,{children:[w.jsx(NL,{}),w.jsx(nv,{indicatorsVisible:e})]}):w.jsxs(w.Fragment,{children:[n&&w.jsx(Qh,{strategy:"fixed",placement:t,ToggleButton:OL,children:w.jsx(r,{})}),w.jsx(fL,{participant:i}),w.jsx(nv,{indicatorsVisible:e})]})},nv=({indicatorsVisible:e=!0})=>{const{participant:t}=Ml(),{isLocalParticipant:n,connectionQuality:r,pin:i,sessionId:s,name:o,userId:a}=t,c=Qe(),{t:l}=tt(),u=!!r&&Yd.ConnectionQuality[r].toLowerCase(),f=vr(t),d=Pn(t),h=!!i&&i.isLocalPin;return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"str-video__participant-details",children:w.jsxs("span",{className:"str-video__participant-details__name",children:[o||a,e&&!f&&w.jsx("span",{className:"str-video__participant-details__name--audio-muted"}),e&&!d&&w.jsx("span",{className:"str-video__participant-details__name--video-muted"}),e&&h&&w.jsx("span",{title:l("Unpin"),onClick:()=>c==null?void 0:c.unpin(s),className:"str-video__participant-details__name--pinned"}),e&&w.jsx(AL,{})]})}),e&&w.jsx(Jc,{isVisible:n&&r===Yd.ConnectionQuality.POOR,message:l("Poor connection quality"),children:u&&w.jsx("span",{className:Ye("str-video__participant-details__connection-quality",`str-video__participant-details__connection-quality--${u}`),title:u})})]})},AL=()=>{const{participant:e}=Ml(),{isSpeaking:t,isDominantSpeaker:n}=e;return w.jsxs("span",{className:Ye("str-video__speech-indicator",t&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[w.jsx("span",{className:"str-video__speech-indicator__bar"}),w.jsx("span",{className:"str-video__speech-indicator__bar"}),w.jsx("span",{className:"str-video__speech-indicator__bar"})]})},qa=C.forwardRef(function({participant:t,trackType:n="videoTrack",mirror:r,muteAudio:i,refs:{setVideoElement:s,setVideoPlaceholderElement:o}={},className:a,VideoPlaceholder:c,PictureInPicturePlaceholder:l,ParticipantViewUI:u=ep},f){const{isLocalParticipant:d,isSpeaking:h,isDominantSpeaker:p,sessionId:m}=t,v=vr(t),g=Pn(t),y=kl(t),[S,b]=C.useState(null),[E,k]=C.useState(null),[T,x]=C.useState(null);sL({sessionId:m,trackedElement:S,trackType:n});const{useIncomingVideoSettings:j}=ln(),{isParticipantVideoEnabled:P}=j(),V=C.useMemo(()=>({participant:t,participantViewElement:S,videoElement:E,videoPlaceholderElement:T,trackType:n}),[E,T,t,S,n]),N=C.useMemo(()=>({setVideoElement:D=>{s==null||s(D),k(D)},setVideoPlaceholderElement:D=>{o==null||o(D),x(D)}}),[s,o]);return w.jsx("div",{"data-testid":"participant-view",ref:D=>{Tw(f,D),b(D)},className:Ye("str-video__participant-view",p&&"str-video__participant-view--dominant-speaker",h&&"str-video__participant-view--speaking",!g&&"str-video__participant-view--no-video",!v&&"str-video__participant-view--no-audio",a),children:w.jsxs(bw.Provider,{value:V,children:[!d&&!i&&w.jsxs(w.Fragment,{children:[v&&w.jsx(Po,{participant:t,trackType:"audioTrack"}),y&&w.jsx(Po,{participant:t,trackType:"screenShareAudioTrack"})]}),w.jsx(_w,{VideoPlaceholder:c,PictureInPicturePlaceholder:l,participant:t,trackType:n,refs:N,enabled:d||n!=="videoTrack"||P(t.sessionId),mirror:r,autoPlay:!0}),kw(u)?w.jsx(u,{}):u]})})});qa.displayName="ParticipantView";const Ow=cN;Ow.displayName="StreamCall";var DL="Joining",LL="Mic",ML="Ringing",FL="Speakers",jL="Video",UL="Live",$L="Reactions",VL="Statistics",BL="Invite",zL="Join",HL="You",WL="Me",qL="Unknown",KL="Default",GL="Refresh",JL="Allow",YL="Revoke",QL="Dismiss",XL="Pinned",ZL="Unpin",eM="Pin",tM="Block",nM="Enter",rM="Leave",iM="Participants",sM=", and ({{ count }}) anonymous",oM={Joining:DL,Mic:LL,"No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:ML,"Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:FL,Video:jL,"You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:UL,"You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:$L,Statistics:VL,"You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:BL,Join:zL,You:HL,Me:WL,Unknown:qL,"Toggle device menu":"Toggle device menu",Default:KL,"Call Recordings":"Call Recordings",Refresh:GL,"Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:JL,Revoke:YL,Dismiss:QL,"Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:XL,Unpin:ZL,Pin:eM,"Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:tM,"Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:nM,Leave:rM,"Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:iM,Anonymous:sM,"No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"};const aM={en:oM},Nw=e=>w.jsx(gN,{translationsOverrides:aM,...e});Nw.displayName="StreamVideo";const cM=(e,t)=>{C.useEffect(()=>{if(e)return t?e.setSortParticipantsBy(si(Ih,uM)):e.setSortParticipantsBy(hP),()=>{lM(e)}},[e,t])},lM=e=>{const t=_0.get(e.type);e.setSortParticipantsBy(t.options.sortParticipantsBy||Ro)},uM=(e,t)=>e.isLocalParticipant?1:t.isLocalParticipant?-1:0,dM=(e,t,n)=>{const[r,i]=C.useState({vertical:typeof n=="number"?n:null,horizontal:typeof n=="number"?n:null});return C.useEffect(()=>{if(!t||!e||typeof n=="number"||typeof n>"u")return;let s=null,o=null;const a=new ResizeObserver((c,l)=>{if(c.length>1){const d=t.firstChild;d&&(o=d.clientHeight,s=d.clientWidth,l.unobserve(t))}if(o===null||s===null)return;const u=Math.floor(e.clientHeight/o),f=Math.floor(e.clientWidth/s);i(d=>d.vertical!==u||d.horizontal!==f?{vertical:u,horizontal:f}:d)});return a.observe(e),a.observe(t),()=>{a.disconnect()}},[t,n,e]),r},fM=()=>w.jsx(ep,{menuPlacement:"top-end"}),Aw=({ParticipantViewUIBar:e=fM,ParticipantViewUISpotlight:t=ep,VideoPlaceholder:n,PictureInPicturePlaceholder:r,participantsBarPosition:i="bottom",participantsBarLimit:s,mirrorLocalParticipantVideo:o=!0,excludeLocalParticipant:a=!1,pageArrowsVisible:c=!0})=>{const l=Qe(),{useParticipants:u,useRemoteParticipants:f}=ln(),d=u(),h=f(),[p,...m]=a?h:d,[v,g]=C.useState(null),[y,S]=C.useState(null),[b,E]=C.useState(null),k=p&&vn(p),T=dM(b,y,s),x=i==="left"||i==="right",j=i==="top"||i==="bottom";C.useEffect(()=>{if(!v||!l)return;const $=l.setViewport(v);return()=>$()},[v,l]);const P=d.length===2;cM(l,P);let V=m;const N=x?T.vertical:T.horizontal;typeof s<"u"&&N!==null&&(V=m.slice(0,N-(k?1:0)));const D=o?void 0:!1;if(!l)return null;const W=i&&(V.length>0||k);return w.jsxs("div",{className:"str-video__speaker-layout__wrapper",children:[w.jsx(Sw,{participants:h}),w.jsxs("div",{className:Ye("str-video__speaker-layout",i&&`str-video__speaker-layout--variant-${i}`),children:[w.jsx("div",{className:"str-video__speaker-layout__spotlight",children:p&&w.jsx(qa,{participant:p,muteAudio:!0,mirror:D,trackType:k?"screenShareTrack":"videoTrack",ParticipantViewUI:t,VideoPlaceholder:n,PictureInPicturePlaceholder:r})}),W&&w.jsxs("div",{ref:E,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[w.jsx("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:g,children:w.jsxs("div",{ref:S,className:"str-video__speaker-layout__participants-bar",children:[k&&w.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:w.jsx(qa,{participant:p,ParticipantViewUI:e,VideoPlaceholder:n,PictureInPicturePlaceholder:r,mirror:D,muteAudio:!0})},p.sessionId),V.map($=>w.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:w.jsx(qa,{participant:$,ParticipantViewUI:e,VideoPlaceholder:n,PictureInPicturePlaceholder:r,mirror:D,muteAudio:!0})},$.sessionId))]})}),c&&x&&w.jsx(pM,{scrollWrapper:v}),c&&j&&w.jsx(hM,{scrollWrapper:v})]})]})]})};Aw.displayName="SpeakerLayout";const hM=({scrollWrapper:e})=>{const t=ZD(e),n=()=>{e==null||e.scrollBy({left:-150,behavior:"smooth"})},r=()=>{e==null||e.scrollBy({left:150,behavior:"smooth"})};return w.jsxs(w.Fragment,{children:[t&&t!=="start"&&w.jsx(wn,{onClick:n,icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),t&&t!=="end"&&w.jsx(wn,{onClick:r,icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},pM=({scrollWrapper:e})=>{const t=XD(e),n=()=>{e==null||e.scrollBy({top:-150,behavior:"smooth"})},r=()=>{e==null||e.scrollBy({top:150,behavior:"smooth"})};return w.jsxs(w.Fragment,{children:[t&&t!=="top"&&w.jsx(wn,{onClick:n,icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),t&&t!=="bottom"&&w.jsx(wn,{onClick:r,icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},[mM,gM,vM]="1.7.8".split(".");jx({type:Yd.SdkType.REACT,major:mM,minor:gM,patch:vM});const yM="mmhfdzb5evj2",SM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL3Byb250by5nZXRzdHJlYW0uaW8iLCJzdWIiOiJ1c2VyL05vbV9Bbm9yIiwidXNlcl9pZCI6Ik5vbV9Bbm9yIiwidmFsaWRpdHlfaW5fc2Vjb25kcyI6NjA0ODAwLCJpYXQiOjE3MzA3NDU4NDMsImV4cCI6MTczMTM1MDY0M30.cjvPD6RFZUE_l08ZytZUnSo3DnTKCtHoPShfH78YpN4",bM="Nom_Anor",wM="p4qFJ6ZUJ5LP",CM={id:bM,name:"Oliver",image:"https://getstream.io/random_svg/?id=oliver&name=Oliver"},Dw=new pr({apiKey:yM,user:CM,token:SM}),Lw=Dw.call("default",wM);Lw.join({create:!0});const EM=()=>{const{useCallCallingState:e}=ln();return e()!==H.JOINED?w.jsx("div",{children:"Loading..."}):w.jsxs(PL,{style:{position:"relative"},children:[w.jsx(Aw,{participantsBarPosition:"bottom"}),w.jsx(IL,{})," "]})};function kM(){return w.jsx("div",{className:"str-video",children:w.jsx(Nw,{client:Dw,children:w.jsx(Ow,{call:Lw,children:w.jsx(EM,{})})})})}vS(document.getElementById("root")).render(w.jsx(C.StrictMode,{children:w.jsx(kM,{})}));export{Xw as R,w as j,C as r};
